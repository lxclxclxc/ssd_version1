cscope 15 $HOME/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed -q 0000002255 0000460519
	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/avlTree.c

1 
	~"avlT»e.h
"

13 
	$avlT»eHigh
(
TREE_NODE
 *
pNode
) {

14 
lh
 = 0, 
rh
 = 0;

15 ià(!
pNode
)

18 
lh
 = 
	`avlT»eHigh
(
pNode
->
Ëá_chd
);

19 
rh
 = 
	`avlT»eHigh
(
pNode
->
right_chd
);

21  (1 + ((
lh
 > 
rh
) ?†h :„h));

22 
	}
}

39 
	$avlT»eCheck
(
tAVLT»e
 *
pT»e
, 
TREE_NODE
 *
pNode
) {

40 
lh
 = 0, 
rh
 = 0;

41 
TREE_NODE
 *
Œ“_roÙ
 = 
AVL_NULL
;

43 ià(!
pT»e
 || !
pNode
)

46 
lh
 = 
	`avlT»eHigh
(
pNode
->
Ëá_chd
);

47 
rh
 = 
	`avlT»eHigh
(
pNode
->
right_chd
);

48 ià(
pNode
->
bf
 !ğ
lh
 - 
rh
)

52 ià(
pNode
->
Ëá_chd
 && ((*
pT»e
->
keyCom·»
)(pNode,…Node->left_child)) >= 0)

56 ià(
pNode
->
right_chd
 && ((*
pT»e
->
keyCom·»
)(pNode,…Node->right_child)) <= 0)

60 
Œ“_roÙ
 = 
pNode
->tree_root;

61 ià(!
Œ“_roÙ
 && (
pT»e
->
pT»eH—d”
 !ğ
pNode
))

64 ià(
Œ“_roÙ
) {

69 ià((
Œ“_roÙ
->
Ëá_chd
 !ğ
pNode
 &&»e_roÙ->
right_chd
 !=…Node) ||

70 (
Œ“_roÙ
->
Ëá_chd
 =ğ
pNode
 &&»e_roÙ->
right_chd
 ==…Node))

78 ià((
pNode
->
Ëá_chd
 &&…Node->Ëá_chd->
Œ“_roÙ
 !=…Node) ||

79 (
pNode
->
right_chd
 &&…Node->right_chd->
Œ“_roÙ
 !=…Node))

82 ià(
pNode
->
Ëá_chd
 && !
	`avlT»eCheck
(
pT»e
,…Node->left_child))

85 ià(
pNode
->
right_chd
 && !
	`avlT»eCheck
(
pT»e
,…Node->right_child))

89 
	}
}

113 
	$R_RÙ©e
(
TREE_NODE
 **
µNode
) {

114 
TREE_NODE
 *
l_chd
 = 
AVL_NULL
;

115 
TREE_NODE
 *
pNode
 = (TREE_NODE *è(*
µNode
);

117 
l_chd
 = 
pNode
->
Ëá_chd
;

118 
pNode
->
Ëá_chd
 = 
l_chd
->
right_chd
;

119 ià(
l_chd
->
right_chd
)

120 
l_chd
->
right_chd
->
Œ“_roÙ
 = 
pNode
;

121 
l_chd
->
right_chd
 = 
pNode
;

122 
l_chd
->
Œ“_roÙ
 = 
pNode
->tree_root;

123 
pNode
->
Œ“_roÙ
 = 
l_chd
;

124 (*
µNode
èğ
l_chd
;

125 
	}
}

146 
	$L_RÙ©e
(
TREE_NODE
 **
µNode
) {

147 
TREE_NODE
 *
r_chd
 = 
AVL_NULL
;

148 
TREE_NODE
 *
pNode
 = (TREE_NODE *è(*
µNode
);

150 
r_chd
 = 
pNode
->
right_chd
;

151 
pNode
->
right_chd
 = 
r_chd
->
Ëá_chd
;

152 ià(
r_chd
->
Ëá_chd
)

153 
r_chd
->
Ëá_chd
->
Œ“_roÙ
 = 
pNode
;

154 
r_chd
->
Ëá_chd
 = 
pNode
;

155 
r_chd
->
Œ“_roÙ
 = 
pNode
->tree_root;

156 
pNode
->
Œ“_roÙ
 = 
r_chd
;

157 (*
µNode
èğ
r_chd
;

158 
	}
}

169 
	$LeáB®ªû
(
TREE_NODE
 **
µNode
) {

170 
TREE_NODE
 *
Ëá_chd
 = 
AVL_NULL
;

171 
TREE_NODE
 *
right_chd
 = 
AVL_NULL
;

172 
TREE_NODE
 *
Œ“_roÙ
 = 
AVL_NULL
;

173 
TREE_NODE
 *
pNode
 = (TREE_NODE *è(*
µNode
);

175 
Œ“_roÙ
 = 
pNode
->tree_root;

176 
Ëá_chd
 = 
pNode
->left_child;

177 
Ëá_chd
->
bf
) {

178 
LH_FACTOR
:

179 
pNode
->
bf
 = 
Ëá_chd
->bàğ
EH_FACTOR
;

180 
	`R_RÙ©e
(
µNode
);

182 
RH_FACTOR
:

184 
right_chd
 = 
Ëá_chd
->right_child;

185 
right_chd
->
bf
) {

186 
LH_FACTOR
:

187 
pNode
->
bf
 = 
RH_FACTOR
;

188 
Ëá_chd
->
bf
 = 
EH_FACTOR
;

190 
EH_FACTOR
:

191 
pNode
->
bf
 = 
Ëá_chd
->bàğ
EH_FACTOR
;

193 
RH_FACTOR
:

194 
pNode
->
bf
 = 
EH_FACTOR
;

195 
Ëá_chd
->
bf
 = 
LH_FACTOR
;

198 
right_chd
->
bf
 = 
EH_FACTOR
;

199 
	`L_RÙ©e
(&
pNode
->
Ëá_chd
);

200 
	`R_RÙ©e
(
µNode
);

202 
EH_FACTOR
:

203 
pNode
->
bf
 = 
LH_FACTOR
;

204 
Ëá_chd
->
bf
 = 
RH_FACTOR
;

205 
	`R_RÙ©e
(
µNode
);

208 (*
µNode
)->
Œ“_roÙ
 =ree_root;

209 ià(
Œ“_roÙ
 &&»e_roÙ->
Ëá_chd
 =ğ
pNode
)

210 
Œ“_roÙ
->
Ëá_chd
 = *
µNode
;

211 ià(
Œ“_roÙ
 &&»e_roÙ->
right_chd
 =ğ
pNode
)

212 
Œ“_roÙ
->
right_chd
 = *
µNode
;

213 
	}
}

224 
	$RightB®ªû
(
TREE_NODE
 **
µNode
) {

225 
TREE_NODE
 *
Ëá_chd
 = 
AVL_NULL
;

226 
TREE_NODE
 *
right_chd
 = 
AVL_NULL
;

227 
TREE_NODE
 *
Œ“_roÙ
 = 
AVL_NULL
;

228 
TREE_NODE
 *
pNode
 = (TREE_NODE *è(*
µNode
);

230 
Œ“_roÙ
 = 
pNode
->tree_root;

231 
right_chd
 = 
pNode
->right_child;

232 
right_chd
->
bf
) {

233 
RH_FACTOR
:

234 
pNode
->
bf
 = 
right_chd
->bàğ
EH_FACTOR
;

235 
	`L_RÙ©e
(
µNode
);

237 
LH_FACTOR
:

238 
Ëá_chd
 = 
right_chd
->left_child;

239 
Ëá_chd
->
bf
) {

240 
RH_FACTOR
:

241 
pNode
->
bf
 = 
LH_FACTOR
;

242 
right_chd
->
bf
 = 
EH_FACTOR
;

244 
EH_FACTOR
:

245 
pNode
->
bf
 = 
right_chd
->bàğ
EH_FACTOR
;

247 
LH_FACTOR
:

248 
pNode
->
bf
 = 
EH_FACTOR
;

249 
right_chd
->
bf
 = 
RH_FACTOR
;

252 
Ëá_chd
->
bf
 = 
EH_FACTOR
;

253 
	`R_RÙ©e
(&
pNode
->
right_chd
);

254 
	`L_RÙ©e
(
µNode
);

256 
EH_FACTOR
:

257 
pNode
->
bf
 = 
RH_FACTOR
;

258 
right_chd
->
bf
 = 
LH_FACTOR
;

259 
	`L_RÙ©e
(
µNode
);

262 (*
µNode
)->
Œ“_roÙ
 =ree_root;

263 ià(
Œ“_roÙ
 &&»e_roÙ->
Ëá_chd
 =ğ
pNode
)

264 
Œ“_roÙ
->
Ëá_chd
 = *
µNode
;

265 ià(
Œ“_roÙ
 &&»e_roÙ->
right_chd
 =ğ
pNode
)

266 
Œ“_roÙ
->
right_chd
 = *
µNode
;

267 
	}
}

290 
	gavlD–B®ªû


292 
tAVLT»e
 *
	gpT»e
,

293 
TREE_NODE
 *
	gpNode
,

294 
	gL_R_MINUS


296 
TREE_NODE
 *
	gŒ“_roÙ
 = 
AVL_NULL
;

298 
	gŒ“_roÙ
 = 
pNode
->
Œ“_roÙ
;

299 ià(
	gL_R_MINUS
 =ğ
LEFT_MINUS
) {

300 
pNode
->
bf
) {

301 
EH_FACTOR
:

302 
pNode
->
bf
 = 
RH_FACTOR
;

304 
	gRH_FACTOR
:

305 
RightB®ªû
(&
pNode
);

306 ià(!
	gŒ“_roÙ
)

307 
	gpT»e
->
	gpT»eH—d”
 = 
pNode
;

308 ià(
	gpNode
->
	gŒ“_roÙ
 &&…Node->
	gbf
 =ğ
EH_FACTOR
) {

309 ià(
pNode
->
Œ“_roÙ
->
Ëá_chd
 ==…Node)

310 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
LEFT_MINUS
);

312 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
RIGHT_MINUS
);

315 
	gLH_FACTOR
:

316 
pNode
->
bf
 = 
EH_FACTOR
;

317 ià(
	gpNode
->
	gŒ“_roÙ
 &&…Node->
	gbf
 =ğ
EH_FACTOR
) {

318 ià(
pNode
->
Œ“_roÙ
->
Ëá_chd
 ==…Node)

319 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
LEFT_MINUS
);

321 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
RIGHT_MINUS
);

327 ià(
	gL_R_MINUS
 =ğ
RIGHT_MINUS
) {

328 
pNode
->
bf
) {

329 
EH_FACTOR
:

330 
pNode
->
bf
 = 
LH_FACTOR
;

332 
	gLH_FACTOR
:

333 
LeáB®ªû
(&
pNode
);

334 ià(!
	gŒ“_roÙ
)

335 
	gpT»e
->
	gpT»eH—d”
 = 
pNode
;

336 ià(
	gpNode
->
	gŒ“_roÙ
 &&…Node->
	gbf
 =ğ
EH_FACTOR
) {

337 ià(
pNode
->
Œ“_roÙ
->
Ëá_chd
 ==…Node)

338 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
LEFT_MINUS
);

340 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
RIGHT_MINUS
);

343 
	gRH_FACTOR
:

344 
pNode
->
bf
 = 
EH_FACTOR
;

345 ià(
	gpNode
->
	gŒ“_roÙ
 &&…Node->
	gbf
 =ğ
EH_FACTOR
) {

346 ià(
pNode
->
Œ“_roÙ
->
Ëá_chd
 ==…Node)

347 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
LEFT_MINUS
);

349 
avlD–B®ªû
(
pT»e
, 
pNode
->
Œ“_roÙ
, 
RIGHT_MINUS
);

370 
	gAVL_TREE_LOCK


372 
tAVLT»e
 *
	gpT»e
,

373 
	gtimeout


375 ià(!
	gpT»e


376 #ià
OS
 == 3 || OS == 4

377 || !
	gpT»e
->
	g£m


382 #ià
OS
 == 3 || OS == 4

383 
£mTake
(
pT»e
->
£m
,
timeout
);

397 
	gAVL_TREE_UNLOCK


399 
tAVLT»e
 *
	gpT»e


401 ià(!
	gpT»e


402 #ià
OS
 == 3 || OS == 4

403 || !
	gpT»e
->
	g£m


408 #ià
OS
 == 3 || OS == 4

409 
£mGive
(
pT»e
->
£m
);

423 
	gAVL_TREENODE_FREE


425 
tAVLT»e
 *
	gpT»e
,

426 
TREE_NODE
 *
	gpNode


428 ià(!
	gpT»e
 || !
	gpNode
)

431 (*
	gpT»e
->
	gä“
)(
	gpNode
);

435 #ifdeà
ORDER_LIST_WANTED


453 
	gÜd”Li¡In£¹


455 
tAVLT»e
 *
	gpT»e
,

456 
TREE_NODE
 *
	gpNode
,

457 
TREE_NODE
 *
	gpIn£¹Node
,

458 
	g´ev_Ü_Ãxt


460 
TREE_NODE
 *
	gp
 = 
AVL_NULL
;

462 ià(!
	gpNode
)

465 ià(
	g´ev_Ü_Ãxt
 =ğ
INSERT_PREV
) {

466 
p
 = 
pNode
->
´ev
;

467 ià(
	gp
èp->
	gÃxt
 = 
pIn£¹Node
;

468 
	gpT»e
->
	gpLi¡H—d”
 = 
pIn£¹Node
;

470 
	gpIn£¹Node
->
	g´ev
 = 
p
;

471 
	gpIn£¹Node
->
	gÃxt
 = 
pNode
;

472 
	gpNode
->
	g´ev
 = 
pIn£¹Node
;

475 ià(
	g´ev_Ü_Ãxt
 =ğ
INSERT_NEXT
) {

476 
p
 = 
pNode
->
Ãxt
;

477 ià(
	gp
èp->
	g´ev
 = 
pIn£¹Node
;

478 
	gpT»e
->
	gpLi¡Ta
 = 
pIn£¹Node
;

480 
	gpIn£¹Node
->
	g´ev
 = 
pNode
;

481 
	gpIn£¹Node
->
	gÃxt
 = 
p
;

482 
	gpNode
->
	gÃxt
 = 
pIn£¹Node
;

499 
	gÜd”Li¡Remove


501 
tAVLT»e
 *
	gpT»e
,

502 
TREE_NODE
 *
	gpRemoveNode


504 
TREE_NODE
 *
	gpP»v
 = 
AVL_NULL
;

505 
TREE_NODE
 *
	gpNext
 = 
AVL_NULL
;

507 ià(!
	gpRemoveNode
)

510 
	gpP»v
 = 
pRemoveNode
->
´ev
;

511 
	gpNext
 = 
pRemoveNode
->
Ãxt
;

512 ià(!
	gpP»v
 && !
	gpNext
) {

513 
	gpT»e
->
	gpLi¡H—d”
 = 
pT»e
->
pLi¡Ta
 = 
AVL_NULL
;

516 ià(
	gpP»v
 && 
	gpNext
) {

517 
	gpP»v
->
	gÃxt
 = 
pNext
;

518 
	gpNext
->
	g´ev
 = 
pP»v
;

522 ià(
	gpP»v
) {

523 
	gpP»v
->
	gÃxt
 = 
AVL_NULL
;

524 
	gpT»e
->
	gpLi¡Ta
 = 
pP»v
;

528 ià(
	gpNext
) {

529 
	gpNext
->
	g´ev
 = 
AVL_NULL
;

530 
	gpT»e
->
	gpLi¡H—d”
 = 
pNext
;

546 
TREE_NODE
 *
	gavlT»eFœ¡


548 
tAVLT»e
 *
	gpT»e


550 ià(!
	gpT»e
)

551  
	gAVL_NULL
;

553 ià(!
	gpT»e
->
	gcouÁ
 || !pT»e->
	gpT»eH—d”
)

554  
	gAVL_NULL
;

556  (
	gTREE_NODE
 *è
	gpT»e
->
	gpLi¡H—d”
;

568 
TREE_NODE
 *
	gavlT»eLa¡


570 
tAVLT»e
 *
	gpT»e


572 ià(!
	gpT»e
)

573  
	gAVL_NULL
;

575 ià(!
	gpT»e
->
	gcouÁ
 || !pT»e->
	gpT»eH—d”
)

576  
	gAVL_NULL
;

578  (
	gTREE_NODE
 *è
	gpT»e
->
	gpLi¡Ta
;

589 
TREE_NODE
 *
	gavlT»eNext


591 
TREE_NODE
 *
	gpNode


593 ià(!
	gpNode
)

594  
	gAVL_NULL
;

596  (
	gTREE_NODE
 *è
	gpNode
->
	gÃxt
;

607 
TREE_NODE
 *
	gavlT»eP»v


609 
TREE_NODE
 *
	gpNode


611 ià(!
	gpNode
)

612  
	gAVL_NULL
;

614  (
	gTREE_NODE
 *è
	gpNode
->
	g´ev
;

634 
	gavlT»eIn£¹


636 
tAVLT»e
 *
	gpT»e
,

637 
TREE_NODE
 **
	gµNode
,

638 
TREE_NODE
 *
	gpIn£¹Node
,

639 *
	ggrowthFÏg


641 
	gcompFÏg
 = 0;

642 
TREE_NODE
 *
	gpNode
 = (TREE_NODE *è(*
µNode
);

644 ià(
	gpT»e
->
	gcouÁ
 == 0) {

645 
pT»e
->
pT»eH—d”
 = 
pIn£¹Node
;

646 
	gpIn£¹Node
->
	gbf
 = 
EH_FACTOR
;

647 
	gpIn£¹Node
->
	gËá_chd
 = 
pIn£¹Node
->
right_chd
 = 
AVL_NULL
;

648 
	gpIn£¹Node
->
	gŒ“_roÙ
 = 
AVL_NULL
;

649 #ifdeà
ORDER_LIST_WANTED


650 
	gpT»e
->
	gpLi¡H—d”
 = 
pT»e
->
pLi¡Ta
 = 
pIn£¹Node
;

651 
	gpIn£¹Node
->
	g´ev
 = 
pIn£¹Node
->
Ãxt
 = 
AVL_NULL
;

656 
	gcompFÏg
 = ((*
pT»e
->
keyCom·»
)(
pNode
, 
	gpIn£¹Node
));

657 ià(!
	gcompFÏg
) {

658 *
	ggrowthFÏg
 = 0;

662 ià(
	gcompFÏg
 < 0) {

663 ià(!
	gpNode
->
	gËá_chd
) {

664 
	gpNode
->
	gËá_chd
 = 
pIn£¹Node
;

665 
	gpIn£¹Node
->
	gbf
 = 
EH_FACTOR
;

666 
	gpIn£¹Node
->
	gËá_chd
 = 
pIn£¹Node
->
right_chd
 = 
AVL_NULL
;

667 
	gpIn£¹Node
->
	gŒ“_roÙ
 = (
TREE_NODE
 *è
pNode
;

668 #ifdeà
ORDER_LIST_WANTED


669 
Üd”Li¡In£¹
(
pT»e
, 
pNode
, 
pIn£¹Node
, 
INSERT_PREV
);

671 
	gpNode
->
	gbf
) {

672 
	gEH_FACTOR
:

673 
pNode
->
bf
 = 
LH_FACTOR
;

674 *
	ggrowthFÏg
 = 1;

676 
	gRH_FACTOR
:

677 
pNode
->
bf
 = 
EH_FACTOR
;

678 *
	ggrowthFÏg
 = 0;

682 ià(!
avlT»eIn£¹
(
pT»e
, &
pNode
->
Ëá_chd
, 
pIn£¹Node
, 
growthFÏg
))

685 ià(*
	ggrowthFÏg
) {

686 
	gpNode
->
	gbf
) {

687 
	gLH_FACTOR
:

688 
LeáB®ªû
(
µNode
);

689 *
	ggrowthFÏg
 = 0;

691 
	gEH_FACTOR
:

692 
pNode
->
bf
 = 
LH_FACTOR
;

693 *
	ggrowthFÏg
 = 1;

695 
	gRH_FACTOR
:

696 
pNode
->
bf
 = 
EH_FACTOR
;

697 *
	ggrowthFÏg
 = 0;

704 ià(
	gcompFÏg
 > 0) {

705 ià(!
	gpNode
->
	gright_chd
) {

706 
	gpNode
->
	gright_chd
 = 
pIn£¹Node
;

707 
	gpIn£¹Node
->
	gbf
 = 
EH_FACTOR
;

708 
	gpIn£¹Node
->
	gËá_chd
 = 
pIn£¹Node
->
right_chd
 = 
AVL_NULL
;

709 
	gpIn£¹Node
->
	gŒ“_roÙ
 = (
TREE_NODE
 *è
pNode
;

710 #ifdeà
ORDER_LIST_WANTED


711 
Üd”Li¡In£¹
(
pT»e
, 
pNode
, 
pIn£¹Node
, 
INSERT_NEXT
);

713 
	gpNode
->
	gbf
) {

714 
	gEH_FACTOR
:

715 
pNode
->
bf
 = 
RH_FACTOR
;

716 *
	ggrowthFÏg
 = 1;

718 
	gLH_FACTOR
:

719 
pNode
->
bf
 = 
EH_FACTOR
;

720 *
	ggrowthFÏg
 = 0;

724 ià(!
avlT»eIn£¹
(
pT»e
, &
pNode
->
right_chd
, 
pIn£¹Node
, 
growthFÏg
))

727 ià(*
	ggrowthFÏg
) {

728 
	gpNode
->
	gbf
) {

729 
	gLH_FACTOR
:

730 
pNode
->
bf
 = 
EH_FACTOR
;

731 *
	ggrowthFÏg
 = 0;

733 
	gEH_FACTOR
:

734 
pNode
->
bf
 = 
RH_FACTOR
;

735 *
	ggrowthFÏg
 = 1;

737 
	gRH_FACTOR
:

738 
RightB®ªû
(
µNode
);

739 *
	ggrowthFÏg
 = 0;

775 
	gavlT»eRemove


777 
tAVLT»e
 *
	gpT»e
,

778 
TREE_NODE
 *
	gpRemoveNode


780 
	gcompFÏg
 = 0;

781 
TREE_NODE
 *
	gŒ“_roÙ
 = 
AVL_NULL
;

782 
TREE_NODE
 *
	gp
 = 
AVL_NULL
;

783 
TREE_NODE
 *
	groÙ_p
 = 
AVL_NULL
;

784 
TREE_NODE
 
	gsw­Node
;

786 
	gŒ“_roÙ
 = 
pRemoveNode
->
Œ“_roÙ
;

787 ià(!
	gpRemoveNode
->
	gËá_chd
 && !pRemoveNode->
	gright_chd
) {

788 ià(!
	gŒ“_roÙ
) {

789 
	gpT»e
->
	gpT»eH—d”
 = 
AVL_NULL
;

790 #ifdeà
ORDER_LIST_WANTED


791 
	gpT»e
->
	gpLi¡H—d”
 = 
pT»e
->
pLi¡Ta
 = 
AVL_NULL
;

794 } ià(
	gŒ“_roÙ
->
	gËá_chd
 =ğ
pRemoveNode
) {

795 #ifdeà
ORDER_LIST_WANTED


796 
Üd”Li¡Remove
(
pT»e
, 
pRemoveNode
);

798 
	gŒ“_roÙ
->
	gËá_chd
 = 
AVL_NULL
;

799 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
LEFT_MINUS
);

801 #ifdeà
ORDER_LIST_WANTED


802 
Üd”Li¡Remove
(
pT»e
, 
pRemoveNode
);

804 
	gŒ“_roÙ
->
	gright_chd
 = 
AVL_NULL
;

805 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
RIGHT_MINUS
);

809 ià(
	gpRemoveNode
->
	gËá_chd
 &&…RemoveNode->
	gright_chd
) {

810 
TREE_NODE
 *
	g´ev
 = 
AVL_NULL
;

811 
TREE_NODE
 *
	gÃxt
 = 
AVL_NULL
;

812 
TREE_NODE
 *
	gr_chd
 = 
AVL_NULL
;

813 
	groÙ_p
 = 
pRemoveNode
;

814 
	gp
 = 
pRemoveNode
->
right_chd
;

815 
	gp
->
	gËá_chd
) {

816 
	groÙ_p
 = 
p
;

817 
	gp
 = 
p
->
Ëá_chd
;

819 ià(
	gp
 =ğ
pRemoveNode
->
right_chd
) {

820 
p
->
Œ“_roÙ
 =…;

821 
	gpRemoveNode
->
	gright_chd
 = 
pRemoveNode
;

823 
	gsw­Node
 = *
p
;

824 
	g´ev
 = 
p
->
´ev
;

825 
	gÃxt
 = 
p
->
Ãxt
;

826 *
	gp
 = *
pRemoveNode
;

827 
	gp
->
	g´ev
 = 
´ev
;

828 
	gp
->
	gÃxt
 = 
Ãxt
;

829 
	g´ev
 = 
pRemoveNode
->
´ev
;

830 
	gÃxt
 = 
pRemoveNode
->
Ãxt
;

831 *
	gpRemoveNode
 = 
sw­Node
;

832 
	gpRemoveNode
->
	g´ev
 = 
´ev
;

833 
	gpRemoveNode
->
	gÃxt
 = 
Ãxt
;

834 ià(!
	gŒ“_roÙ
)

835 
	gpT»e
->
	gpT»eH—d”
 = 
p
;

836 ià(
	gŒ“_roÙ
->
	gËá_chd
 =ğ
pRemoveNode
)

837 
Œ“_roÙ
->
Ëá_chd
 = 
p
;

839 
	gŒ“_roÙ
->
	gright_chd
 = 
p
;

841 ià(
	gp
->
	gËá_chd
)

842 
	gp
->
	gËá_chd
->
	gŒ“_roÙ
 = 
p
;

843 ià(
	gp
->
	gright_chd
)

844 
	gp
->
	gright_chd
->
	gŒ“_roÙ
 = 
p
;

846 ià(
	gpRemoveNode
->
	gËá_chd
)

847 
	gpRemoveNode
->
	gËá_chd
->
	gŒ“_roÙ
 = 
pRemoveNode
;

848 ià(
	gpRemoveNode
->
	gright_chd
)

849 
	gpRemoveNode
->
	gright_chd
->
	gŒ“_roÙ
 = 
pRemoveNode
;

851 ià(
	groÙ_p
 !ğ
pRemoveNode
) {

852 ià(
roÙ_p
->
Ëá_chd
 =ğ
p
)

853 
roÙ_p
->
Ëá_chd
 = 
pRemoveNode
;

855 
	groÙ_p
->
	gright_chd
 = 
pRemoveNode
;

858  
avlT»eRemove
(
pT»e
, 
pRemoveNode
);

861 ià(
	gpRemoveNode
->
	gËá_chd
) {

862 #ifdeà
ORDER_LIST_WANTED


863 
Üd”Li¡Remove
(
pT»e
, 
pRemoveNode
);

865 ià(!
	gŒ“_roÙ
) {

866 
	gpT»e
->
	gpT»eH—d”
 = 
pRemoveNode
->
Ëá_chd
;

867 
	gpRemoveNode
->
	gËá_chd
->
	gŒ“_roÙ
 = 
AVL_NULL
;

871 ià(
	gŒ“_roÙ
->
	gËá_chd
 =ğ
pRemoveNode
) {

872 
Œ“_roÙ
->
Ëá_chd
 = 
pRemoveNode
->left_child;

873 
	gpRemoveNode
->
	gËá_chd
->
	gŒ“_roÙ
 = 
Œ“_roÙ
;

874 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
LEFT_MINUS
);

876 
	gŒ“_roÙ
->
	gright_chd
 = 
pRemoveNode
->
Ëá_chd
;

877 
	gpRemoveNode
->
	gËá_chd
->
	gŒ“_roÙ
 = 
Œ“_roÙ
;

878 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
RIGHT_MINUS
);

884 ià(
	gpRemoveNode
->
	gright_chd
) {

885 #ifdeà
ORDER_LIST_WANTED


886 
Üd”Li¡Remove
(
pT»e
, 
pRemoveNode
);

888 ià(!
	gŒ“_roÙ
) {

889 
	gpT»e
->
	gpT»eH—d”
 = 
pRemoveNode
->
right_chd
;

890 
	gpRemoveNode
->
	gright_chd
->
	gŒ“_roÙ
 = 
AVL_NULL
;

894 ià(
	gŒ“_roÙ
->
	gËá_chd
 =ğ
pRemoveNode
) {

895 
Œ“_roÙ
->
Ëá_chd
 = 
pRemoveNode
->
right_chd
;

896 
	gpRemoveNode
->
	gright_chd
->
	gŒ“_roÙ
 = 
Œ“_roÙ
;

897 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
LEFT_MINUS
);

899 
	gŒ“_roÙ
->
	gright_chd
 = 
pRemoveNode
->
right_chd
;

900 
	gpRemoveNode
->
	gright_chd
->
	gŒ“_roÙ
 = 
Œ“_roÙ
;

901 
avlD–B®ªû
(
pT»e
, 
Œ“_roÙ
, 
RIGHT_MINUS
);

924 
TREE_NODE
 *
	gavlT»eLookup


926 
tAVLT»e
 *
	gpT»e
,

927 
TREE_NODE
 *
	gpNode
,

928 
TREE_NODE
 *
	gpS—rchKey


930 
	gcompFÏg
 = 0;

931 ià(!
	gpT»e
 || !
	gpNode
)

932  
	gAVL_NULL
;

934 
	gcompFÏg
 = (*
pT»e
->
keyCom·»
)(
pNode
, 
	gpS—rchKey
);

935 ià(!
	gcompFÏg
)

936  (
	gTREE_NODE
 *è
	gpNode
;

938 ià(
	gcompFÏg
 > 0è
	gpNode
 = 
pNode
->
right_chd
;

939 
	gpNode
 = 
pNode
->
Ëá_chd
;

941  (
	gTREE_NODE
 *è
avlT»eLookup
(
pT»e
, 
pNode
, 
pS—rchKey
);

956 
tAVLT»e
 *
	$avlT»eC»©e
(*
keyCom·»Func
, *
ä“Func
) {

957 
tAVLT»e
 *
pT»e
 = (tAVLTree *) 0;

959 ià(!
keyCom·»Func
 || !
ä“Func
)

960  (
tAVLT»e
 *) 0;

962 
pT»e
 = (
tAVLT»e
 *è
	`m®loc
((tAVLTree));

964 ià(
pT»e
 !ğ(
tAVLT»e
 *) 0) {

965 
	`mem£t
((*è
pT»e
, 0, (
tAVLT»e
));

966 
pT»e
->
keyCom·»
 = (*è
keyCom·»Func
;

967 
pT»e
->
ä“
 = (*è
ä“Func
;

968 #ifdeà
ORDER_LIST_WANTED


969 
pT»e
->
pLi¡H—d”
 =…T»e->
pLi¡Ta
 = 
AVL_NULL
;

972 #ià
OS
 == 3 || OS == 4

973 
pT»e
->
£m
 = 
	`£mBC»©e
(0 , 1);

974 if(!
pT»e
->
£m
)

976 
	`ä“
((*)
pT»e
);

977  (
tAVLT»e
 *)0;

982  (
tAVLT»e
 *è
pT»e
;

983 
	}
}

998 
	$avlT»eD–
(
tAVLT»e
 *
pT»e
, 
TREE_NODE
 *
pD–Node
) {

999 
»t
 = 0;

1001 ià(!
pT»e
 || !
pD–Node
 || !pT»e->
couÁ
)

1004 
»t
 = 
	`avlT»eRemove
(
pT»e
, 
pD–Node
);

1005 ià(
»t
)

1006 
pT»e
->
couÁ
--;

1009 
	}
}

1024 
	gavlT»eDe¡roy


1026 
tAVLT»e
 *
	gpT»e


1028 
TREE_NODE
 *
	gpNode
 = 
AVL_NULL
;

1029 ià(!
	gpT»e
)

1032 
	gpNode
 = 
pT»e
->
pT»eH—d”
) {

1033 
avlT»eD–
(
pT»e
, 
pNode
);

1034 
AVL_TREENODE_FREE
(
pT»e
, 
pNode
);

1037 ià(!
	gpT»e
->
	gcouÁ
 || !pT»e->
	gpT»eH—d”
) {

1038 #ià
OS
 == 3 || OS == 4

1039 
£mD–‘e
(
pT»e
->
£m
);

1041 
ä“
((*è
pT»e
);

1061 
	gavlT»eFlush


1063 
tAVLT»e
 *
	gpT»e


1065 
TREE_NODE
 *
	gpNode
 = 
AVL_NULL
;

1067 ià(!
	gpT»e
)

1070 ià(!
	gpT»e
->
	gcouÁ
 || !pT»e->
	gpT»eH—d”
)

1073 
	gpNode
 = 
pT»e
->
pT»eH—d”
) {

1074 
avlT»eD–
(
pT»e
, 
pNode
);

1075 
AVL_TREENODE_FREE
(
pT»e
, 
pNode
);

1095 
	gavlT»eAdd


1097 
tAVLT»e
 *
	gpT»e
,

1098 
TREE_NODE
 *
	gpIn£¹Node


1100 
	ggrowthFÏg
 = 0, 
	g»t
 = 0;

1102 ià(!
	gpT»e
 || !
	gpIn£¹Node
)

1105 
	g»t
 = 
avlT»eIn£¹
(
pT»e
, &pT»e->
pT»eH—d”
, 
pIn£¹Node
, &
growthFÏg
);

1106 ià(
	g»t
)

1107 
	gpT»e
->
	gcouÁ
++;

1108  
	g»t
;

1126 
TREE_NODE
 *
	gavlT»eFšd


1128 
tAVLT»e
 *
	gpT»e
,

1129 
TREE_NODE
 *
	gpKeyNode


1131 ià(!
	gpT»e
 || !pT»e->
	gcouÁ
 || !pT»e->
	gpT»eH—d”
)

1132  
	gAVL_NULL
;

1134  (
	gTREE_NODE
 *è
avlT»eLookup
(
pT»e
,…T»e->
pT»eH—d”
, 
pKeyNode
);

1148 
	gavlT»eCouÁ


1150 
tAVLT»e
 *
	gpT»e


1152 ià(!
	gpT»e
)

1155  
	gpT»e
->
	gcouÁ
;

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/avlTree.h

1 #iâdeà
AVLTREE_H


2 
	#AVLTREE_H
 10000

	)

4 
	~<¡ršg.h
>

5 
	~<m®loc.h
>

6 
	~<¡dlib.h
>

8 
	#AVL_NULL
 (
TREE_NODE
 *)0

	)

10 
	#EH_FACTOR
 0

	)

11 
	#LH_FACTOR
 1

	)

12 
	#RH_FACTOR
 -1

	)

13 
	#LEFT_MINUS
 0

	)

14 
	#RIGHT_MINUS
 1

	)

17 
	#ORDER_LIST_WANTED


	)

19 
	#INSERT_PREV
 0

	)

20 
	#INSERT_NEXT
 1

	)

22 
	s_AVL_TREE_NODE
 {

23 #ifdeà
ORDER_LIST_WANTED


24 
_AVL_TREE_NODE
 *
	m´ev
;

25 
_AVL_TREE_NODE
 *
	mÃxt
;

27 
_AVL_TREE_NODE
 *
	mŒ“_roÙ
;

28 
_AVL_TREE_NODE
 *
	mËá_chd
;

29 
_AVL_TREE_NODE
 *
	mright_chd
;

30 
	mbf
;

31 } 
	tTREE_NODE
;

33 
	sbufãr_šfo
 {

34 
	m»ad_h™
;

35 
	m»ad_miss_h™
;

36 
	mwr™e_h™
;

37 
	mwr™e_miss_h™
;

39 
bufãr_group
 *
	mbufãr_h—d
;

40 
bufãr_group
 *
	mbufãr_
;

41 
TREE_NODE
 *
	mpT»eH—d”
;

43 
	mmax_bufãr_£ùÜ
;

44 
	mbufãr_£ùÜ_couÁ
;

46 #ifdeà
ORDER_LIST_WANTED


47 
TREE_NODE
 *
	mpLi¡H—d”
;

48 
TREE_NODE
 *
	mpLi¡Ta
;

50 
	mcouÁ
;

51 (*
	mkeyCom·»
)(
	mTREE_NODE
 *, TREE_NODE *);

53 (*
	mä“
)(
	mTREE_NODE
 *);

54 } 
	ttAVLT»e
;

57 
avlT»eHigh
(
TREE_NODE
 *);

59 
avlT»eCheck
(
tAVLT»e
 *, 
TREE_NODE
 *);

61 
R_RÙ©e
(
TREE_NODE
 **);

63 
L_RÙ©e
(
TREE_NODE
 **);

65 
LeáB®ªû
(
TREE_NODE
 **);

67 
RightB®ªû
(
TREE_NODE
 **);

69 
avlD–B®ªû
(
tAVLT»e
 *, 
TREE_NODE
 *, );

71 
AVL_TREE_LOCK
(
tAVLT»e
 *, );

73 
AVL_TREE_UNLOCK
(
tAVLT»e
 *);

75 
AVL_TREENODE_FREE
(
tAVLT»e
 *, 
TREE_NODE
 *);

77 #ifdeà
ORDER_LIST_WANTED


79 
Üd”Li¡In£¹
(
tAVLT»e
 *, 
TREE_NODE
 *, TREE_NODE *, );

81 
Üd”Li¡Remove
(
tAVLT»e
 *, 
TREE_NODE
 *);

83 
TREE_NODE
 *
avlT»eFœ¡
(
tAVLT»e
 *);

85 
TREE_NODE
 *
avlT»eLa¡
(
tAVLT»e
 *);

87 
TREE_NODE
 *
avlT»eNext
(TREE_NODE *
pNode
);

89 
TREE_NODE
 *
avlT»eP»v
(TREE_NODE *
pNode
);

93 
avlT»eIn£¹
(
tAVLT»e
 *, 
TREE_NODE
 **, TREE_NODE *, *);

95 
avlT»eRemove
(
tAVLT»e
 *, 
TREE_NODE
 *);

97 
TREE_NODE
 *
avlT»eLookup
(
tAVLT»e
 *, TREE_NODE *, TREE_NODE *);

99 
tAVLT»e
 *
avlT»eC»©e
(*, *);

101 
avlT»eDe¡roy
(
tAVLT»e
 *);

103 
avlT»eFlush
(
tAVLT»e
 *);

105 
avlT»eAdd
(
tAVLT»e
 *, 
TREE_NODE
 *);

107 
avlT»eD–
(
tAVLT»e
 *, 
TREE_NODE
 *);

109 
TREE_NODE
 *
avlT»eFšd
(
tAVLT»e
 *, TREE_NODE *);

111 
avlT»eCouÁ
(
tAVLT»e
 *);

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/flash.c

19 
	~"æash.h
"

20 
	~"ssd.h
"

25 
Stus
 
	$®loÿ‹_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub_»q
) {

26 
sub_»que¡
 *
upd©e
 = 
NULL
;

27 
chªÃl_num
 = 0, 
ch_num
 = 0, 
d›_num
 = 0, 
¶ªe_num
 = 0;

28 
loÿl
 *
loÿtiÚ
 = 
NULL
;

30 
chªÃl_num
 = 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

31 
ch_num
 = 
ssd
->
·¿m‘”
->
ch_chªÃl
[0];

32 
d›_num
 = 
ssd
->
·¿m‘”
->
d›_ch
;

33 
¶ªe_num
 = 
ssd
->
·¿m‘”
->
¶ªe_d›
;

34 #ifdeà
DEBUG_CURR_TIME


35 
	`´štf
("cu¼’t_timi %Îd iÀ®loÿ‹_loÿtiÚ funùiÚ,‡nd ssdsim…¬am‘” h”i  chªÃÊum %d, chnum %d, d›num %d,…ÏÃ‚um%d\n", 
ssd
->
cu¼’t_time
, 
chªÃl_num
, 
ch_num
, 
d›_num
, 
¶ªe_num
);

39 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 0)

45 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
¡©e
 != 0) {

46 ià((
sub_»q
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub_»q->
Ín
].state) !=

47 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
¡©e
) {

48 #ifdeà
DEBUG


49 
	`´štf
("©†—¡ , wr™»que¡ should bæushed iÁØæashcu¼’t_timi %Îd iÀ®loÿ‹_loÿtiÚ funùiÚ\n", 
ssd
->
cu¼’t_time
);

52 
ssd
->
»ad_couÁ
++;

53 
ssd
->
upd©e_»ad_couÁ
++;

55 
upd©e
 = (
sub_»que¡
 *è
	`m®loc
((sub_request));

56 
	`®loc_as£¹
(
upd©e
, "update");

57 
	`mem£t
(
upd©e
, 0, (
sub_»que¡
));

59 ià(
upd©e
 =ğ
NULL
) {

60  
ERROR
;

62 
upd©e
->
loÿtiÚ
 = 
NULL
;

63 
upd©e
->
Ãxt_node
 = 
NULL
;

64 
upd©e
->
Ãxt_subs
 = 
NULL
;

65 
upd©e
->upd©ğ
NULL
;

66 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, ssd->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
²
);

67 
upd©e
->
loÿtiÚ
 =†ocation;

68 
upd©e
->
begš_time
 = 
ssd
->
cu¼’t_time
;

69 
upd©e
->
cu¼’t_¡©e
 = 
SR_WAIT
;

70 
upd©e
->
cu¼’t_time
 = 
MAX_INT64
;

71 #ifdeà
DEBUG_CURR_TIME


72 
	`´štf
("cu¼’t_timi %Îd iÀ‡Îoÿ‹_loÿtiÚ funùiÚ m­_’Œy[xx].¡©e!=0‡nd dyÇmiø®loÿtiÚ\n", 
ssd
->
cu¼’t_time
);

75 
upd©e
->
Ãxt_¡©e
 = 
SR_R_C_A_TRANSFER
;

76 
upd©e
->
Ãxt_¡©e_´ediù_time
 = 
MAX_INT64
;

77 
upd©e
->
Ín
 = 
sub_»q
->lpn;

78 
upd©e
->
¡©e
 = ((
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].state ^ sub_req->state) & 0x7fffffff);

79 
upd©e
->
size
 = 
	`size
(upd©e->
¡©e
);

80 
upd©e
->
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
²
;

81 
upd©e
->
İ”©iÚ
 = 
READ
;

84 ià((
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
subs_r_h—d
 !ğ
NULL
 )&& (ssd->chªÃl_h—d[loÿtiÚ->chªÃl].
subs_r_
 !=

85 
NULL
) )

87 
	`´štf
("here†ength is‚ot 0 \n");

88 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
subs_r_
->
Ãxt_node
 = 
upd©e
;

89 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
subs_r_
 = 
upd©e
;

91 if(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
 != 0){

92 
	`´štf
("lxclxclxc,wrong \n");

94 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
subs_r_
 = 
upd©e
;

95 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
subs_r_h—d
 = 
upd©e
;

104 
ssd
->
·¿m‘”
->
dyÇmic_®loÿtiÚ
) {

106 
sub_»q
->
loÿtiÚ
->
chªÃl
 = -1;

107 
sub_»q
->
loÿtiÚ
->
ch
 = -1;

108 
sub_»q
->
loÿtiÚ
->
d›
 = -1;

109 
sub_»q
->
loÿtiÚ
->
¶ªe
 = -1;

110 
sub_»q
->
loÿtiÚ
->
block
 = -1;

111 
sub_»q
->
loÿtiÚ
->
·ge
 = -1;

113 ià(
ssd
->
subs_w_
 !ğ
NULL
) {

114 
ssd
->
subs_w_
->
Ãxt_node
 = 
sub_»q
;

115 
ssd
->
subs_w_
 = 
sub_»q
;

117 
ssd
->
subs_w_
 = 
sub_»q
;

118 
ssd
->
subs_w_h—d
 = 
sub_»q
;

121 ià(
upd©e
 !ğ
NULL
) {

122 
sub_»q
->
upd©e
 = update;

129 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

130 
sub_»q
->
loÿtiÚ
->
ch
 = -1;

131 
sub_»q
->
loÿtiÚ
->
d›
 = -1;

132 
sub_»q
->
loÿtiÚ
->
¶ªe
 = -1;

133 
sub_»q
->
loÿtiÚ
->
block
 = -1;

134 
sub_»q
->
loÿtiÚ
->
·ge
 = -1;

136 ià(
upd©e
 !ğ
NULL
) {

137 
sub_»q
->
upd©e
 = update;

154 #ifdeà
DEBUGSUSPEND


155 
	`´štf
("h”i ¡©ic_®loÿtiÚ iÀ®loÿ‹†oÿtiÚ....,ªd sŒ©egy i %d, \n", 
ssd
->
·¿m‘”
->
¡©ic_®loÿtiÚ
);

158 
ssd
->
·¿m‘”
->
¡©ic_®loÿtiÚ
) {

161 
sub_»q
->
loÿtiÚ
->
chªÃl
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
ch_num
)è% 
chªÃl_num
;

162 
sub_»q
->
loÿtiÚ
->
ch
 = sub_»q->
Ín
 % 
ch_num
;

163 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / 
ch_num
è% 
d›_num
;

164 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / (
d›_num
 * 
ch_num
)è% 
¶ªe_num
;

168 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
chªÃl_num
;

169 
sub_»q
->
loÿtiÚ
->
ch
 = (sub_»q->
Ín
 / 
chªÃl_num
è% 
ch_num
;

170 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / (
ch_num
 * 
chªÃl_num
)è% 
d›_num
;

171 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / (
d›_num
 * 
ch_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

176 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
chªÃl_num
;

177 
sub_»q
->
loÿtiÚ
->
ch
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
chªÃl_num
)è% 
ch_num
;

178 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
ch_num
 * 
chªÃl_num
)è% 
d›_num
;

179 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / 
chªÃl_num
è% 
¶ªe_num
;

183 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
chªÃl_num
;

184 
sub_»q
->
loÿtiÚ
->
ch
 = (sub_»q->
Ín
 / (
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

185 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / 
chªÃl_num
è% 
d›_num
;

186 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / (
d›_num
 * 
ch_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

190 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
chªÃl_num
;

191 
sub_»q
->
loÿtiÚ
->
ch
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

192 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
chªÃl_num
)è% 
d›_num
;

193 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / 
chªÃl_num
è% 
¶ªe_num
;

198 
sub_»q
->
loÿtiÚ
->
chªÃl
 = sub_»q->
Ín
 % 
chªÃl_num
;

199 
sub_»q
->
loÿtiÚ
->
ch
 = (sub_»q->
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

200 
sub_»q
->
loÿtiÚ
->
d›
 = (sub_»q->
Ín
 / 
chªÃl_num
è% 
d›_num
;

201 
sub_»q
->
loÿtiÚ
->
¶ªe
 = (sub_»q->
Ín
 / (
d›_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

206  
ERROR
;

210 #ifdeà
DEBUGSUSPEND


211 
	`´štf
("aá” stiø®loÿtiÚ.....now, wr™»que¡ c»©ed iÀchªÃÈ%d, ch %d, d› %d,…ÏÃ %d\n",
sub_»q
->
loÿtiÚ
->
chªÃl
,sub_»q->loÿtiÚ->
ch
,sub_»q->loÿtiÚ->
d›
, sub_»q->loÿtiÚ->
¶ªe
);

215 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
¡©e
 !=

217 ià((
sub_»q
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub_»q->
Ín
].state) !=

218 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
¡©e
) {

219 #ifdeà
DEBUGSUSPEND


220 
	`´štf
("should create update for write‚ow.\n");

223 
ssd
->
»ad_couÁ
++;

224 
ssd
->
upd©e_»ad_couÁ
++;

225 
upd©e
 = (
sub_»que¡
 *è
	`m®loc
((sub_request));

226 
	`®loc_as£¹
(
upd©e
, "update");

227 
	`mem£t
(
upd©e
, 0, (
sub_»que¡
));

229 ià(
upd©e
 == 0x0) {

230 #ifdeà
DEBUGSUSPEND


231 
	`´štf
("lxclxc, wrong in creating update„ead for write .\n");

233  
ERROR
;

235 
upd©e
->
loÿtiÚ
 = 
NULL
;

236 
upd©e
->
Ãxt_node
 = 
NULL
;

237 
upd©e
->
Ãxt_subs
 = 
NULL
;

238 
upd©e
->upd©ğ
NULL
;

239 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, ssd->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
²
);

240 if(
loÿtiÚ
 == 0x0){

242 
	`´štf
("lxc, wr™e' upd©ÍÀ%d, siz%d,„eque¡ %Îd, o³¿tiÚ %d ha wrÚg‚ow\n", 
sub_»q
->
Ín
,sub_»q->
size
, sub_»q,sub_»q->
İ”©iÚ
);

243 
	`´štf
("lxclxc, wrong in creating update„ead for write .\n");

245 
upd©e
->
loÿtiÚ
 =†ocation;

246 
upd©e
->
begš_time
 = 
ssd
->
cu¼’t_time
;

247 #ifdeà
DEBUG_CURR_TIME


248 
	`´štf
("cu¼’t_timi %Îd iÀ‡Îoÿ‹_loÿtiÚ funùiÚ m­_’Œy[xx].¡©e!=0‡nd stiø®loÿtiÚ\n", 
ssd
->
cu¼’t_time
);

252 
upd©e
->
cu¼’t_¡©e
 = 
SR_WAIT
;

253 
upd©e
->
cu¼’t_time
 = 
MAX_INT64
;

254 
upd©e
->
Ãxt_¡©e
 = 
SR_R_C_A_TRANSFER
;

255 
upd©e
->
Ãxt_¡©e_´ediù_time
 = 
MAX_INT64
;

256 
upd©e
->
Ín
 = 
sub_»q
->lpn;

257 
upd©e
->
¡©e
 = ((
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].state ^ sub_req->state) & 0x7fffffff);

258 
upd©e
->
size
 = 
	`size
(upd©e->
¡©e
);

259 
upd©e
->
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub_»q
->
Ín
].
²
;

260 
upd©e
->
İ”©iÚ
 = 
READ
;

261 #ifdeà
DEBUGSUSPEND


262 
	`´štf
("h”buˆ¥ecŸÈfÜ wr™e!!‡dd„—d, fœ¡ s”viû„—d,now.„—d†oÿtiÚ i chªÃl%d, ch %d, d› %d,¶ª%d,…² %d\n",
upd©e
->
loÿtiÚ
->
chªÃl
, upd©e->loÿtiÚ->
ch
,upd©e->loÿtiÚ->
d›
,upd©e->loÿtiÚ->
¶ªe
 ,upd©e->
µn
 );

266 ifĞ(
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_h—d
 !ğ
NULL
)&&(ssd->chªÃl_h—d[upd©e->loÿtiÚ->chªÃl].
subs_r_
 != NULL) ){

267 #ifdeà
DEBUGSUSPEND


268 
	`´štf
("h”m—n sus_r_ i nÙ NULL , h”i chªÃÈ[%d], ch [%d],ha th‡dd»s %Îd,upd©add»s i %Îd\n",
upd©e
->
loÿtiÚ
->
chªÃl
, upd©e->loÿtiÚ->
ch
,
ssd
->
chªÃl_h—d
[upd©e->loÿtiÚ->chªÃl].
subs_r_
, update );

271 
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_
->
Ãxt_node
 = update;

272 
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_
 = update;

273 } ià((
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_h—d
 =ğ
NULL
è&& (ssd->chªÃl_h—d[upd©e->loÿtiÚ->chªÃl].
subs_r_
 == NULL)){

274 if(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
 != 0){

275 
	`´štf
("lxclxclxc, wrong\n");

278 
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_
 = update;

279 
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
subs_r_h—d
 = update;

281 
	`´štf
("lxclxclxc2,‡dded„ead wrong\n");

283 #ifdeà
DEBUGSUSPEND


284 
	`´štf
("added„—d h”i chªÃÈ[%d], ch [%d],ha th‡dd»s %Îd,upd©add»s i %Îd\n",
upd©e
->
loÿtiÚ
->
chªÃl
, upd©e->loÿtiÚ->
ch
,
ssd
->
chªÃl_h—d
[upd©e->loÿtiÚ->chªÃl].
subs_r_
, update );

288 ià(
upd©e
 !ğ
NULL
) {

290 
sub_»q
->
upd©e
 = update;

291 
sub_»q
->
¡©e
 = (sub_»q->¡©| 
upd©e
->state);

292 
sub_»q
->
size
 = 
	`size
(sub_»q->
¡©e
);

295 
ssd
->
chªÃl_h—d
[
upd©e
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[upd©e->loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
 ++;

296 
	`´štf
("added upd©%Îd,†oÿtiÚ i %Îd\n",
upd©e
, upd©e->
loÿtiÚ
);

297 if(
upd©e
->
loÿtiÚ
 =ğ
NULL
){

298 
	`´štf
("lxclxclxc_updatelocation wrong\n");

301 if(
upd©e
->
Ín
 > 16777216){

302 
	`´štf
("lxclxclxc_lpnwrong in‚ow\n");

305 
	`´štf
("now chªÃÈ%d, ch %d†’gth i %d, h—d‡dd»s %Îd,a‡dd»s %Îd , sub %Îd\n", 
loÿtiÚ
->
chªÃl
,†oÿtiÚ->
ch
, 
ssd
->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[loÿtiÚ->ch].
ch_»ad_queue_Ëngth
, ssd->chªÃl_h—d[loÿtiÚ->chªÃl].
subs_r_h—d
,ssd->chªÃl_h—d[loÿtiÚ->chªÃl].
subs_r_
, 
upd©e
);

307 if(
upd©e
->
loÿtiÚ
 =ğ
NULL
){

309 
	`´štf
("Ãw c»©„—d upd©†oÿtiÚ i chªÃÈ%d, ch %d, d› %d,…ÏÃ %d\n",
loÿtiÚ
->
chªÃl
,loÿtiÚ->
ch
,loÿtiÚ->
d›
,loÿtiÚ->
¶ªe
);

319 if(
sub_»q
->
loÿtiÚ
 =ğ
NULL
){

321 
	`´štf
("Ãw c»© wr™loÿtiÚ i chªÃÈ%d, ch %d, d› %d,…ÏÃ %d\n",
sub_»q
->
loÿtiÚ
->
chªÃl
,sub_»q->loÿtiÚ->
ch
,sub_»q->loÿtiÚ->
d›
,sub_»q->loÿtiÚ->
¶ªe
);

325 
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub_»q->loÿtiÚ->
ch
].
ch_wr™e_queue_Ëngth
 ++;

326 #ifdeà
DEBUGSUSPEND


327 
	`´štf
("chªÃl[%d], ch[%d], wr™Ëngth‡dd oÃ i [%d]\n",
sub_»q
->
loÿtiÚ
->
chªÃl
, sub_»q->loÿtiÚ->
ch
, 
ssd
->
chªÃl_h—d
[sub_»q->loÿtiÚ->chªÃl].
ch_h—d
[sub_»q->loÿtiÚ->ch].
ch_wr™e_queue_Ëngth
);

330 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 !ğ0è|| (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 != 0)) {

331 ifĞ(
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_
 !ğ
NULL
è&& (ssd->chªÃl_h—d[sub_»q->loÿtiÚ->chªÃl].
subs_w_h—d
 != NULL) ) {

332 
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_
->
Ãxt_node
 = sub_req;

333 
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_
 = sub_req;

334 } ifĞ(
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_
 =ğ
NULL
è&& (ssd->chªÃl_h—d[sub_»q->loÿtiÚ->chªÃl].
subs_w_h—d
 == NULL)){

335 
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_
 = sub_req;

336 
ssd
->
chªÃl_h—d
[
sub_»q
->
loÿtiÚ
->
chªÃl
].
subs_w_h—d
 = sub_req;

338 
	`´štf
("writewrong\n");

348  
SUCCESS
;

349 
	}
}

355 
ssd_šfo
 *

356 
	$š£¹2bufãr
(
ssd_šfo
 *
ssd
, 
Ín
, 
¡©e
, 
sub_»que¡
 *
sub
, 
»que¡
 *
»q
) {

357 
wr™e_back_couÁ
, 
æag
 = 0;

358 
i
, 
l¢
, 
h™_æag
, 
add_æag
, 
£ùÜ_couÁ
, 
aùive_»giÚ_æag
 = 0, 
ä“_£ùÜ
 = 0;

359 
bufãr_group
 *
bufãr_node
 = 
NULL
, *
±
, *
Ãw_node
 = NULL, 
key
;

360 
sub_»que¡
 *
sub_»q
 = 
NULL
, *
upd©e
 = NULL;

363 
sub_»q_¡©e
 = 0, 
sub_»q_size
 = 0, 
sub_»q_Ín
 = 0;

365 #ifdeà
DEBUG_CURR_TIME


366 
	`´štf
("’‹¸š£¹2bufãr,hi i »®†² (Úby oÃèäom„—Èssd->»que¡_,h© m—n ®sØthÃw„eque¡. cu¼’ˆtime:%Îd,†²:%d, s‹:%d, .sØbufãr->„eq' l¢ i %d, sizi %d, o³¿tiÚ i %d\n",
ssd
->
cu¼’t_time
,
Ín
,
¡©e
, 
»q
->
l¢
,„eq->
size
,„eq->
İ”©iÚ
);

369 
£ùÜ_couÁ
 = 
	`size
(
¡©e
);

370 
key
.
group
 = 
Ín
;

371 
bufãr_node
 = (
bufãr_group
 *è
	`avlT»eFšd
(
ssd
->
d¿m
->
bufãr
,

372 (
TREE_NODE
 *è&
key
);

381 #ifdeà
DEBUG


382 
	`´štf
("bufãr_nodi %d\n",
bufãr_node
);

384 ià(
bufãr_node
 =ğ
NULL
) {

385 #ifdeà
DEBUG


386 
	`´štf
("buffer_node has‚ot been hitted\n");

389 
ä“_£ùÜ
 = 
ssd
->
d¿m
->
bufãr
->
max_bufãr_£ùÜ
 - ssd->d¿m->bufãr->
bufãr_£ùÜ_couÁ
;

390 ià(
ä“_£ùÜ
 >ğ
£ùÜ_couÁ
) {

391 
æag
 = 1;

393 ià(
æag
 == 0) {

394 #ifdeà
DEBUG


395 
	`´štf
("bufã¸nÙ h™, f»e_£ùÜ„emašed i %d,Ãed wr™štØ£ùÜ_couÁ i %d\n",
ä“_£ùÜ
, 
£ùÜ_couÁ
);

398 
wr™e_back_couÁ
 = 
£ùÜ_couÁ
 - 
ä“_£ùÜ
;

399 
ssd
->
d¿m
->
bufãr
->
wr™e_miss_h™
 = ssd->d¿m->bufãr->wr™e_miss_h™ + 
wr™e_back_couÁ
;

400 
wr™e_back_couÁ
 > 0) {

401 
sub_»q
 = 
NULL
;

402 
sub_»q_¡©e
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
¡Üed
;

403 #ifdeà
DEBUG


404 
	`´štf
("next is write back buffer size‡mount.\n");

406 
sub_»q_size
 = 
	`size
(
ssd
->
d¿m
->
bufãr
->
bufãr_
->
¡Üed
);

407 
sub_»q_Ín
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
group
;

408 
sub_»q
 = 
	`ü—t_sub_»que¡
(
ssd
, 
sub_»q_Ín
, 
sub_»q_size
, 
sub_»q_¡©e
, 
»q
, 
WRITE
);

417 ià(
»q
 !ğ
NULL
) {

419 #ifdeà
DEBUG


420 
	`´štf
("opps,‚ever happen \n");

422 
sub_»q
->
Ãxt_subs
 = 
sub
->next_subs;

423 
sub
->
Ãxt_subs
 = 
sub_»q
;

432 
ssd
->
d¿m
->
bufãr
->
bufãr_£ùÜ_couÁ
 = ssd->d¿m->bufãr->bufãr_£ùÜ_couÁ - 
sub_»q_size
;

434 
±
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
;

435 
	`avlT»eD–
(
ssd
->
d¿m
->
bufãr
, (
TREE_NODE
 *è
±
);

436 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_Ãxt
 =ğ
NULL
) {

437 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
NULL
;

438 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
NULL
;

440 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = ssd->d¿m->bufãr->bufãr_->
LRU_lšk_´e
;

441 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_Ãxt
 = 
NULL
;

443 
±
->
LRU_lšk_Ãxt
 = 
NULL
;

444 
±
->
LRU_lšk_´e
 = 
NULL
;

445 
	`AVL_TREENODE_FREE
(
ssd
->
d¿m
->
bufãr
, (
TREE_NODE
 *è
±
);

446 
±
 = 
NULL
;

448 
wr™e_back_couÁ
 =

450 
wr™e_back_couÁ
 - 
sub_»q_size
;

451 #ifdeà
DEBUG


452 
	`´štf
("Úû wr™š£¹ iÁØbufã¸buˆwr™eback fœ¡,‡Î‚“d wr™štØ£ùÜi %d, buˆthi timwr™eback iÁØ£ùÜ i %d \n", 
wr™e_back_couÁ
, 
sub_»q_size
);

460 #ifdeà
DEBUG


461 
	`´štf
("here make‡ buffer-node‡nd insert into bufferree. should…rintf here\n");

463 
Ãw_node
 = 
NULL
;

464 
Ãw_node
 = (
bufãr_group
 *è
	`m®loc
((buffer_group));

465 
	`®loc_as£¹
(
Ãw_node
, "buffer_group_node");

466 
	`mem£t
(
Ãw_node
, 0, (
bufãr_group
));

468 
Ãw_node
->
group
 = 
Ín
;

469 
Ãw_node
->
¡Üed
 = 
¡©e
;

470 
Ãw_node
->
dœty_ş—n
 = 
¡©e
;

471 
Ãw_node
->
LRU_lšk_´e
 = 
NULL
;

472 
Ãw_node
->
LRU_lšk_Ãxt
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
;

473 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 !ğ
NULL
) {

474 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_´e
 = 
Ãw_node
;

476 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
Ãw_node
;

478 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
Ãw_node
;

479 
Ãw_node
->
LRU_lšk_´e
 = 
NULL
;

480 
	`avlT»eAdd
(
ssd
->
d¿m
->
bufãr
, (
TREE_NODE
 *è
Ãw_node
);

481 
ssd
->
d¿m
->
bufãr
->
bufãr_£ùÜ_couÁ
 +ğ
£ùÜ_couÁ
;

489 #ifdeà
DEBUG


490 
	`´štf
("buffer_node hit\n");

493 
i
 = 0; i < 
ssd
->
·¿m‘”
->
sub·ge_·ge
; i++) {

498 ià((
¡©e
 >> 
i
) % 2 != 0) {

499 
l¢
 = 
Ín
 * 
ssd
->
·¿m‘”
->
sub·ge_·ge
 + 
i
;

500 
h™_æag
 = 0;

501 
h™_æag
 = (
bufãr_node
->
¡Üed
è& (0x00000001 << 
i
);

503 ià(
h™_æag
 !=

506 
aùive_»giÚ_æag
 = 1;

508 ià(
»q
 !ğ
NULL
) {

509 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 !ğ
bufãr_node
) {

510 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_
 =ğ
bufãr_node
) {

511 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
bufãr_node
->
LRU_lšk_´e
;

512 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = 
NULL
;

513 } ià(
bufãr_node
 !ğ
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
) {

514 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = buffer_node->LRU_link_next;

515 
bufãr_node
->
LRU_lšk_Ãxt
->
LRU_lšk_´e
 = buffer_node->LRU_link_pre;

517 
bufãr_node
->
LRU_lšk_Ãxt
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
;

518 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_´e
 = 
bufãr_node
;

519 
bufãr_node
->
LRU_lšk_´e
 = 
NULL
;

520 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
bufãr_node
;

522 
ssd
->
d¿m
->
bufãr
->
wr™e_h™
++;

523 
»q
->
com¶‘e_l¢_couÁ
++;

536 
ssd
->
d¿m
->
bufãr
->
wr™e_miss_h™
++;

538 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_£ùÜ_couÁ
 >ğssd->d¿m->bufãr->
max_bufãr_£ùÜ
) {

539 ià(
bufãr_node
 ==

540 
ssd
->
d¿m
->
bufãr
->
bufãr_
)

542 
±
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_´e
;

543 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_´e
 = 
±
->LRU_link_pre;

544 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = ssd->dram->buffer->buffer_tail;

545 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_Ãxt
 = 
±
;

546 
±
->
LRU_lšk_Ãxt
 = 
NULL
;

547 
±
->
LRU_lšk_´e
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
;

548 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
±
;

551 
sub_»q
 = 
NULL
;

552 
sub_»q_¡©e
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
¡Üed
;

553 
sub_»q_size
 = 
	`size
(
ssd
->
d¿m
->
bufãr
->
bufãr_
->
¡Üed
);

554 
sub_»q_Ín
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
group
;

555 
sub_»q
 = 
	`ü—t_sub_»que¡
(
ssd
, 
sub_»q_Ín
, 
sub_»q_size
, 
sub_»q_¡©e
, 
»q
, 
WRITE
);

557 ià(
»q
 !ğ
NULL
) {

559 } ià(
»q
 =ğ
NULL
) {

560 
sub_»q
->
Ãxt_subs
 = 
sub
->next_subs;

561 
sub
->
Ãxt_subs
 = 
sub_»q
;

564 
ssd
->
d¿m
->
bufãr
->
bufãr_£ùÜ_couÁ
 = ssd->d¿m->bufãr->bufãr_£ùÜ_couÁ - 
sub_»q
->
size
;

565 
±
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_
;

566 
	`avlT»eD–
(
ssd
->
d¿m
->
bufãr
, (
TREE_NODE
 *è
±
);

572 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_Ãxt
 =ğ
NULL
) {

573 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
NULL
;

574 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
NULL
;

576 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = ssd->d¿m->bufãr->bufãr_->
LRU_lšk_´e
;

577 
ssd
->
d¿m
->
bufãr
->
bufãr_
->
LRU_lšk_Ãxt
 = 
NULL
;

579 
±
->
LRU_lšk_Ãxt
 = 
NULL
;

580 
±
->
LRU_lšk_´e
 = 
NULL
;

581 
	`AVL_TREENODE_FREE
(
ssd
->
d¿m
->
bufãr
, (
TREE_NODE
 *è
±
);

582 
±
 = 
NULL
;

586 
add_æag
 = 0x00000001 << (
l¢
 % 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

588 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 !=

589 
bufãr_node
)

591 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_
 =ğ
bufãr_node
) {

592 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = 
NULL
;

593 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
bufãr_node
->
LRU_lšk_´e
;

595 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = buffer_node->LRU_link_next;

596 
bufãr_node
->
LRU_lšk_Ãxt
->
LRU_lšk_´e
 = buffer_node->LRU_link_pre;

598 
bufãr_node
->
LRU_lšk_Ãxt
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
;

599 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_´e
 = 
bufãr_node
;

600 
bufãr_node
->
LRU_lšk_´e
 = 
NULL
;

601 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
bufãr_node
;

603 
bufãr_node
->
¡Üed
 = bufãr_node->¡Üed | 
add_æag
;

604 
bufãr_node
->
dœty_ş—n
 = bufãr_node->dœty_ş—À| 
add_æag
;

605 
ssd
->
d¿m
->
bufãr
->
bufãr_£ùÜ_couÁ
++;

612  
ssd
;

613 
	}
}

618 
Stus


619 
	$fšd_aùive_block
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
) {

620 
aùive_block
;

621 
ä“_·ge_num
 = 0;

622 
couÁ
 = 0;

624 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

625 
ä“_·ge_num
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].free_page_num;

627 (
ä“_·ge_num
 =ğ0è&& (
couÁ
 < 
ssd
->
·¿m‘”
->
block_¶ªe
)) {

628 
aùive_block
 = (aùive_block + 1è% 
ssd
->
·¿m‘”
->
block_¶ªe
;

629 
ä“_·ge_num
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].free_page_num;

630 
couÁ
++;

632 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
aùive_block
 =‡ctive_block;

633 ià(
couÁ
 < 
ssd
->
·¿m‘”
->
block_¶ªe
) {

634  
SUCCESS
;

636  
FAILURE
;

638 
	}
}

644 
Stus
 
	$wr™e_·ge
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

645 
aùive_block
, *
µn
) {

646 
Ï¡_wr™e_·ge
 = 0;

647 
Ï¡_wr™e_·ge
 = ++(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].last_write_page);

648 ià(
Ï¡_wr™e_·ge
 >ğ(è(
ssd
->
·¿m‘”
->
·ge_block
)) {

649 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
 = 0;

650 
	`´štf
("error!he†ast write…age†argerhan 64!!\n");

651  
ERROR
;

654 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
ä“_·ge_num
--;

655 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
--;

656 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
Ï¡_wr™e_·ge
].
wr™‹n_couÁ
++;

657 
ssd
->
wr™e_æash_couÁ
++;

658 *
µn
 = 
	`fšd_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
aùive_block
, 
Ï¡_wr™e_·ge
);

660  
SUCCESS
;

661 
	}
}

666 
sub_»que¡
 *

667 
	$ü—t_sub_»que¡
(
ssd_šfo
 *
ssd
, 
Ín
, 
size
, 
¡©e
, 
»que¡
 *
»q
,

668 
İ”©iÚ
) {

669 
sub_»que¡
 *
sub
 = 
NULL
, *
sub_r
 = NULL;

670 
chªÃl_šfo
 *
p_ch
 = 
NULL
;

671 
loÿl
 *
loc
 = 
NULL
;

672 
æag
 = 0;

674 
sub
 = (
sub_»que¡
 *è
	`m®loc
((sub_request));

675 
	`®loc_as£¹
(
sub
, "sub_request");

676 
	`mem£t
(
sub
, 0, (
sub_»que¡
));

678 ià(
sub
 =ğ
NULL
) {

679  
NULL
;

681 
sub
->
loÿtiÚ
 = 
NULL
;

682 
sub
->
Ãxt_node
 = 
NULL
;

683 
sub
->
Ãxt_subs
 = 
NULL
;

684 
sub
->
upd©e
 = 
NULL
;

686 ià(
»q
 !ğ
NULL
) {

687 
sub
->
Ãxt_subs
 = 
»q
->
subs
;

688 
»q
->
subs
 = 
sub
;

690 #ifdeà
DEBUG


691 
	`´štf
("’‹¸ü—t_sub_»que¡.!!!!!!!Úû oÃ bufãr->ƒËm’t.sØth»q‡nd sizi righˆ»qã€‚nÙhssd->»que¡_' »que¡!!!!!! o³¿tiÚ i %d,„eq i %xÒØ0 i nØNULL),ÍÀi %d, sizi %d, s‹ i %d\n",
İ”©iÚ
, 
»q
, 
Ín
, 
size
, 
¡©e
);

697 ià(
İ”©iÚ
 =ğ
READ
) {

698 
loc
 = 
	`fšd_loÿtiÚ
(
ssd
, ssd->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
);

701 if(
loc
 == 0x0){

703 
	`´štf
("lxşxşxc,ÍÀ%d, siz%d,„eque¡ %Îd, o³¿tiÚ %d ha wrÚg‚ow\n", 
Ín
, 
size
, 
»q
, 
İ”©iÚ
);

705 if(
Ín
 > 16777216){

706 
	`´štf
("lxclxclxc_lpnwrong in‚ow\n");

708 
sub
->
loÿtiÚ
 = 
loc
;

709 
sub
->
begš_time
 = 
ssd
->
cu¼’t_time
;

710 
sub
->
cu¼’t_¡©e
 = 
SR_WAIT
;

711 
sub
->
cu¼’t_time
 = 
MAX_INT64
;

712 
sub
->
Ãxt_¡©e
 = 
SR_R_C_A_TRANSFER
;

713 
sub
->
Ãxt_¡©e_´ediù_time
 = 
MAX_INT64
;

714 
sub
->
Ín
 =†pn;

715 
sub
->
size
 = size;

718 
p_ch
 = &
ssd
->
chªÃl_h—d
[
loc
->
chªÃl
];

719 
sub
->
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
;

720 
sub
->
İ”©iÚ
 = 
READ
;

721 
sub
->
¡©e
 = (
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].state & 0x7fffffff);

722 
sub_r
 = 
p_ch
->
subs_r_h—d
;

723 
æag
 = 0;

724 
sub_r
 !ğ
NULL
) {

725 ià(
sub_r
->
µn
 =ğ
sub
->ppn) {

726 
æag
 = 1;

729 
sub_r
 = sub_r->
Ãxt_node
;

731 #ifdeà
DEBUG


732 
	`´štf
("æag i %d *** 1 m—n th”i §msub»que¡ iÀqueu0 i İpos™e\n",
æag
);

734 ià(
æag
 == 0) {

735 #ifdeà
DEBUG


736 
	`´štf
("sub queuš£¹„—d,æag=0h’ in£¹ sub štØpch %d\n",
loc
->
chªÃl
);

741 #ifdeà
DEBUGSUSPEND


742 
	`´štf
("Úly h”add ch' »ad†’gth,Ãw c»©„—d†oÿtiÚ i chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d\n",
loc
->
chªÃl
,†oc->
ch
,†oc->
d›
,†oc->
¶ªe
, 
sub
->
µn
);

745 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
 ++;

749 
‹mp_Ëngth
 = 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
;

752 #ifdeà
DEBUGSUSPEND


753 
	`´štf
("ch_»ad_queue_Ëngth‡dd oÃ‚ow i %d,[chªÃÈ%d, ch %d] s”viûd_timi %Îd\n", 
‹mp_Ëngth
,
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->
£rviûd_time
);

759 ifĞĞ
p_ch
->
subs_r_h—d
 !ğ
NULL
è&& (p_ch->
subs_r_
 != NULL)){

760 
	`´štf
("length is‚ot 1\n");

761 
p_ch
->
subs_r_
->
Ãxt_node
 = 
sub
;

762 
p_ch
->
subs_r_
 = 
sub
;

763 } if((
p_ch
->
subs_r_h—d
 =ğ
NULL
) && (p_ch->subs_r_head == NULL)){

765 
p_ch
->
subs_r_h—d
 = 
sub
;

766 
p_ch
->
subs_r_
 = 
sub
;

768 
	`´štf
("lxclxclxc,„ead‡dded wrong‚ow\n");

776 if(
sub
->
loÿtiÚ
 =ğ
NULL
){

777 
	`´štf
("lxclxclxc_readlocation wrong\n");

782 #ifdeà
DEBUG


783 
	`´štf
("sub queu¡©u chªg¡©äom SR_R_DATA_RANSFERØÃxt_¡©com¶‘ªd sub‚exˆtime=+1000,æag=1…ch i  %d\n",
p_ch
);

786 
	`´štf
("read dont haveo be inserted 1000‚ow\n");

787 
sub
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

788 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

789 #ifdeà
DEBUG_CURR_TIME


790 
	`´štf
("sub_cu¼’t_timi %Îd , ssd_cu¼’t_timi %Îd iÀü—t_sub_»que¡ funùiÚ\n", 
sub
->
cu¼’t_time
,
ssd
->current_time);

793 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

794 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 1000;

795 
sub
->
com¶‘e_time
 = 
ssd
->
cu¼’t_time
 + 1000;

801 ià(
İ”©iÚ
 =ğ
WRITE
) {

802 
sub
->
µn
 = 0;

803 
sub
->
İ”©iÚ
 = 
WRITE
;

804 
sub
->
loÿtiÚ
 = (
loÿl
 *è
	`m®loc
((local));

805 
	`®loc_as£¹
(
sub
->
loÿtiÚ
, "sub->location");

806 
	`mem£t
(
sub
->
loÿtiÚ
, 0, (
loÿl
));

808 
sub
->
cu¼’t_¡©e
 = 
SR_WAIT
;

809 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

810 
sub
->
Ín
 =†pn;

811 
sub
->
size
 = size;

812 
sub
->
¡©e
 = state;

813 
sub
->
begš_time
 = 
ssd
->
cu¼’t_time
;

815 ià(
	`®loÿ‹_loÿtiÚ
(
ssd
, 
sub
è=ğ
ERROR
) {

816 
	`´štf
("lxc, must mark here, create write„equest fail!!\n");

817 
	`ä“
(
sub
->
loÿtiÚ
);

818 
sub
->
loÿtiÚ
 = 
NULL
;

819 
	`ä“
(
sub
);

820 
sub
 = 
NULL
;

821  
NULL
;

825 
	`´štf
("opps!,‚ever happen\n");

826 
	`ä“
(
sub
->
loÿtiÚ
);

827 
sub
->
loÿtiÚ
 = 
NULL
;

828 
	`ä“
(
sub
);

829 
sub
 = 
NULL
;

830 
	`´štf
("\nERROR ! Unexpected command.\n");

831  
NULL
;

834  
sub
;

835 
	}
}

841 
sub_»que¡
 *

842 
	$fšd_»ad_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
) {

843 
¶ªe
 = 0;

844 
add»ss_µn
 = 0;

845 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

847 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

848 
add»ss_µn
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
add_»g_µn
;

849 #ifdeà
DEBUG


853 ià(
add»ss_µn
 != -1) {

854 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

855 ià(
sub
->
µn
 =ğ
add»ss_µn
) {

857  
sub
;

860 ià(
sub
->
Ãxt_node
 =ğ
NULL
) {

861 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
 = 
NULL
;

862 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_
 = 
NULL
;

864 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
 = 
sub
->
Ãxt_node
;

866 (
sub
->
µn
 !ğ
add»ss_µn
è&& (sub->
Ãxt_node
 !ğ
NULL
)) {

867 ià(
sub
->
Ãxt_node
->
µn
 =ğ
add»ss_µn
) {

868 
p
 = 
sub
->
Ãxt_node
;

870  
p
;

873 ià(
p
->
Ãxt_node
 =ğ
NULL
) {

874 
sub
->
Ãxt_node
 = 
NULL
;

875 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_
 = 
sub
;

877 
sub
->
Ãxt_node
 = 
p
->next_node;

879 
sub
 = 
p
;

882 
sub
 = sub->
Ãxt_node
;

884 ià(
sub
->
µn
 =ğ
add»ss_µn
) {

885 
sub
->
Ãxt_node
 = 
NULL
;

886 
	`´štf
("fšd„—d sub , sub…² i %d\n",
sub
->
µn
);

887  
sub
;

889 
	`´štf
("Error! Can't findhe sub„equest.");

893  
NULL
;

894 
	}
}

901 
sub_»que¡
 *
	$fšd_wr™e_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
) {

902 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

903 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ0è&& (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 == 0))

905 
sub
 = 
ssd
->
subs_w_h—d
;

906 
sub
 !ğ
NULL
) {

907 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

908 ià(
sub
->
upd©e
 !ğ
NULL
)

910 ià((
sub
->
upd©e
->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
è|| ((sub->upd©e->
Ãxt_¡©e
 == SR_COMPLETE) &&

911 (
sub
->
upd©e
->
Ãxt_¡©e_´ediù_time
 <=

912 
ssd
->
cu¼’t_time
)))

920 
p
 = 
sub
;

921 
sub
 = sub->
Ãxt_node
;

924 ià(
sub
 ==

925 
NULL
)

927  
NULL
;

930 ià(
sub
 !ğ
ssd
->
subs_w_h—d
) {

931 ià(
sub
 !ğ
ssd
->
subs_w_
) {

932 
p
->
Ãxt_node
 = 
sub
->next_node;

934 
ssd
->
subs_w_
 = 
p
;

935 
ssd
->
subs_w_
->
Ãxt_node
 = 
NULL
;

938 ià(
sub
->
Ãxt_node
 !ğ
NULL
) {

939 
ssd
->
subs_w_h—d
 = 
sub
->
Ãxt_node
;

941 
ssd
->
subs_w_h—d
 = 
NULL
;

942 
ssd
->
subs_w_
 = 
NULL
;

945 
sub
->
Ãxt_node
 = 
NULL
;

946 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 !ğ
NULL
) {

947 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
->
Ãxt_node
 = 
sub
;

948 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
sub
;

950 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
sub
;

951 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 = 
sub
;

959 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

960 
sub
 !ğ
NULL
) {

961 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

962 ià(
sub
->
upd©e
 !ğ
NULL
) {

963 ià((
sub
->
upd©e
->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
è|| ((sub->upd©e->
Ãxt_¡©e
 == SR_COMPLETE) &&

964 (
sub
->
upd©e
->
Ãxt_¡©e_´ediù_time
 <=

965 
ssd
->
cu¼’t_time
)))

973 
p
 = 
sub
;

974 
sub
 = sub->
Ãxt_node
;

977 ià(
sub
 =ğ
NULL
) {

978  
NULL
;

982  
sub
;

983 
	}
}

986 
	$£rviûs_2_wr™e_busy_š_ch
(
ssd_šfo
 *
ssd
)

989 
i
 = 0;

990 
j
 = 0;

991 
Has_»ad_»que¡
 = 0;

992 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

993 
sub_»que¡
 *
sub_fÜ_»ad
 = 
NULL
;

994 
sub_»que¡
 *
‹¡_sub
 = 
NULL
;

996 #ifdeà
DEBUGSUSPEND


997 
	`´štf
("services_2_write_busy_in_chip function go into.\n");

1001 
i
 = 0; i <

1002 
ssd
->
·¿m‘”
->
chªÃl_numb”
; 
i
++)

1016 
j
 = 0; j < 
ssd
->
chªÃl_h—d
[
i
].
ch
; j++){

1017 #ifdeà
DEBUG


1018 
	`´štf
("ev”yim´oûs funùiÚ‚Üm® mÚi¡”‚ewe¡‚um_w_cyşv®uh”th%d chªÃÈ, %d ch,‚um_w_wr™i %d.\n",
i
 ,
j
, 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
num_w_cyşe
 );

1020 if(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
wr™e_´“m±ive_sign
 == 1) {

1021 #ifdeà
DEBUGSUSPEND


1022 
	`´štf
("h”i wr™…»em±iv! jum°out,‡nd‚owh%d chªÃÈ, %d ch,‚um_w_wr™i %d.\n",
i
 ,
j
, 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
num_w_cyşe
 );

1029 ià(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
cu¼’t_¡©e
 !ğ
CHIP_WRITE_DATA_CMD_BUSY
){

1031 ià(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
cu¼’t_¡©e
 !ğ
CHIP_WRITE_BUSY
) {

1032 #ifdeà
DEBUGSUSPEND


1033 
	`´štf
("here chip is‚ot write status ! jump out.\n");

1045 if(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
){

1048 if(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
cu¼’t_¡©e
 =ğ
CHIP_WRITE_DATA_CMD_BUSY
){

1050 
sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

1051 
sub
 !ğ
NULL
){

1052 ifĞ(
sub
->
cu¼’t_¡©e
 =ğ
SR_W_C_A_DATA_TRANSFER
è&& (sub->
loÿtiÚ
->
ch
 =ğ
j
) ){

1055 
sub
 = sub->
Ãxt_node
;

1057 if(
sub
 =ğ
NULL
){

1058 
	`´štf
("error happen,†xclxclxc\n");

1063 
‹¡_sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

1064 
‹¡_sub
 !ğ
NULL
){

1065 ifĞ
‹¡_sub
->
loÿtiÚ
->
ch
 =ğ
j
 ){

1068 
‹¡_sub
 =e¡_sub->
Ãxt_node
;

1070 if(
sub
 !ğ
‹¡_sub
){

1071 
	`´štf
("lxşxşxc1.£riou¦y wrÚg, fœ¡_wr™e_sub cu¼’t_¡©i %d,‚ext_¡©i %d\n", 
‹¡_sub
->
cu¼’t_¡©e
,e¡_sub->
Ãxt_¡©e
);

1073 
	`´štf
("lxclxclxc2.right\n");

1076 #ifdeà
DEBUGSUSPEND


1077 
	`´štf
("now i judgšg fšish s’d_wr™e_cmd…roûss,ªdhsub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1080 iàĞ(
sub
->
cu¼’t_¡©e
 =ğ
SR_W_C_A_DATA_TRANSFER
è&& (sub->
Ãxt_¡©e
 =ğ
SR_W_DATA_TRANSFER
) ) {

1082 #ifdeà
DEBUGSUSPEND


1083 
	`´štf
("now wÈgo_Úe_¡• fÜ fšishšg s’d_wr™e_cmd…roûss,ªdhsub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1086 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS
, 
NORMAL
);

1088 #ifdeà
DEBUGSUSPEND


1089 
	`´štf
("befÜ‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1091 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 += 1;

1093 #ifdeà
DEBUGSUSPEND


1094 
	`´štf
("aá”‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1100 #ifdeà
DEBUGSUSPEND


1101 
	`´štf
("begino judge for suspendhe write,now.\n");

1105 
Has_»ad_»que¡
 = 0;

1106 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

1107 
sub_fÜ_»ad
 !ğ
NULL
)

1110 if(
sub_fÜ_»ad
->
loÿtiÚ
->
ch
 =ğ
j
)

1114 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
 ;

1116 if(
sub_fÜ_»ad
 !ğ
NULL
){

1117 
Has_»ad_»que¡
 = 1;

1118 #ifdeà
DEBUGSUSPEND


1119 
	`´štf
("suspend!!!!!‚ow‡fter send_cmd do suspend for„ead\n");

1122 
	`´štf
("wr™su¥’d…os™iÚ i š ju¡ fšish s’d_»ad_cmd .‚um_w_cylû i  %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1125 #ifdeà
DEBUGSUSPEND


1126 
	`´štf
("don't‚eedo suspend.\n");

1133 if(
Has_»ad_»que¡
 == 1) {

1134 
ssd
->
wr™e_su¥’d_times
 ++;

1136 
	`´štf
("wr™su¥’dime i %d\n", 
ssd
->
wr™e_su¥’d_times
);

1137 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
wr™e_´“m±ive_sign
 = 1;

1140 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1141 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
UNKNOWN
;

1142 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

1143 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + (7+2è* ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

1144 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
¡Üedsub
 = sub;

1146 
	`´štf
("statistic_suspendsion_write, 0\n");

1149 
	`´štf
("¡Üesub o³¿tiÚ. ch: %d,†²: %d,…²: %d o³¿tiÚ: %d,size: %d, ////sub_»que¡ stus:: cu¼’t_¡©e: %d, cu¼’t_time: %Îu,‚ext_¡©e: %d,‚ext_¡©e_´ediù_time: %Îu, s‹(Úly fÜ wr™e): %d\n", 
sub
->
loÿtiÚ
->
ch
, sub->
Ín
, sub->
µn
,sub->
İ”©iÚ
, sub->
size
, sub->
cu¼’t_¡©e
, sub->
cu¼’t_time
,sub->
Ãxt_¡©e
, sub->
Ãxt_¡©e_´ediù_time
, sub->
¡©e
) ;

1152 
	`´štf
("wr™su¥’d…os™iÚ i ™”©iÚ.‚um_w_cylû i  %d, stÜed sub i %Îd, sub i %Îd\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
, ssd->chªÃl_h—d[sub->loÿtiÚ->chªÃl].ch_h—d[sub->loÿtiÚ->ch].
¡Üedsub
, sub);

1168 ifĞ(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
num_w_cyşe
 <= 10) && (ssd->channel_head[i].chip_head[j].num_w_cycle >= 1) ){

1173 
sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

1174 
sub
 !ğ
NULL
){

1175 ifĞ((
sub
->
cu¼’t_¡©e
 =ğ
SR_W_DATA_TRANSFER
è&& (sub->
loÿtiÚ
->
ch
 =ğ
j
)) ) {

1178 
sub
 = sub->
Ãxt_node
;

1180 if(
sub
 =ğ
NULL
){

1181 
	`´štf
("error happen,†xclxclxc\n");

1186 ià((
sub
->
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
è&& (ssd->
chªÃl_h—d
[sub->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 == 10) ) {

1188 #ifdeà
DEBUGSUSPEND


1189 
	`´štf
("now wÈŒyØdØÏ¡ v”ify‚ow sub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1191 #ifdeà
DEBUGSUSPEND


1192 
	`´štf
("sub cu¼’t_§‹ i (%d)=SR_COMPLETE o¸sub->Ãxt_¡©i (%d)=SR_COMPLETE,\n",
sub
->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
);

1196 if(
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 =ğ
CHIP_WRITE_BUSY
){

1197 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_IDLE
;

1202 #ifdeà
DEBUGSUSPEND


1203 
	`´štf
("begin get_ppn operation‚ow,\n");

1206 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

1207 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

1210 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub);

1212 #ifdeà
DEBUGSUSPEND


1213 
	`´štf
("begin delete shown‡bove sub_write‚ow\n");

1216 
	`d–‘e_w_sub_»que¡
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub);

1217 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 = 0;

1238 ifĞ(
sub
->
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
è&& (ssd->
chªÃl_h—d
[sub->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 < 10) && (ssd->channel_head[sub->location->channel].chip_head[sub->location->chip].num_w_cycle > 0) ) {

1239 #ifdeà
DEBUGSUSPEND


1240 
	`´štf
("now wÈ dØnÜm® i‹¿tiÚ‚ow sub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1243 #ifdeà
DEBUGSUSPEND


1244 
	`´štf
("now gØštØwr™3.2.2!! %d chªÃl, %d ch,‚um_w_cyşğ%d\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
,
ssd
->
chªÃl_h—d
[sub->loÿtiÚ->chªÃl].
ch_h—d
[sub->loÿtiÚ->ch].
num_w_cyşe
 );

1247 ifĞ((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
) % 2) == 1 ){

1249 
	`go_Úe_¡•
Ğ
ssd
, 
sub
, 
NULL
,
SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS
, 
NORMAL
);

1251 #ifdeà
DEBUGSUSPEND


1252 
	`´štf
("befÜ‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1254 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 += 1;

1256 #ifdeà
DEBUGSUSPEND


1257 
	`´štf
("aá”‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1261 #ifdeà
DEBUGSUSPEND


1262 
	`´štf
("befÜ‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1264 
	`go_Úe_¡•
Ğ
ssd
, 
sub
, 
NULL
, 
SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS
, 
NORMAL
);

1265 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 += 1;

1267 #ifdeà
DEBUGSUSPEND


1268 
	`´štf
("aá”‚um_w_cyşadd 1 i %d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1271 ifĞ(
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
) == 10){

1272 #ifdeà
DEBUGSUSPEND


1273 
	`´štf
("num_w_cycle == 10\n");

1281 ifĞ((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
è=ğ6è&& (((sub->loÿtiÚ->
¶ªe
) % 2) == 1) ){

1285 #ifdeà
DEBUGSUSPEND


1286 
	`´štf
("now wÈŒyØdØÏ¡ v”ify‚ow sub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1287 
	`´štf
("now wÈŒyØdØÏ¡ v”ify‚ow sub' chªÃÈ%d, ch %d , block %d,…ag%d(block,·gha nÙ in™ŸËd h”e)\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1289 #ifdeà
DEBUGSUSPEND


1290 
	`´štf
("sub cu¼’t_§‹ i (%d)=SR_COMPLETE o¸sub->Ãxt_¡©i (%d)=SR_COMPLETE,\n",
sub
->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
);

1294 if(
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 =ğ
CHIP_WRITE_BUSY
){

1295 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_IDLE
;

1300 #ifdeà
DEBUGSUSPEND


1301 
	`´štf
("begin get_ppn operation‚ow,\n");

1304 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

1305 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

1308 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub);

1310 #ifdeà
DEBUGSUSPEND


1311 
	`´štf
("begin delete shown‡bove sub_write‚ow\n");

1314 
	`d–‘e_w_sub_»que¡
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub);

1315 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
 = 0;

1328 #ifdeà
DEBUGSUSPEND


1329 
	`´štf
("begino judge for suspendhe write,now.\n");

1332 
Has_»ad_»que¡
 = 0;

1333 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

1334 
sub_fÜ_»ad
 !ğ
NULL
)

1337 if(
sub_fÜ_»ad
->
loÿtiÚ
->
ch
 =ğ
j
)

1341 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
 ;

1343 if(
sub_fÜ_»ad
 !ğ
NULL
){

1344 
Has_»ad_»que¡
 = 1;

1345 #ifdeà
DEBUGSUSPEND


1346 
	`´štf
("su¥’d!!!!!‚ow duršg…rog¿m dØsu¥’d fÜ„—d,‚um_w_cyşeğ%d\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
);

1350 #ifdeà
DEBUGSUSPEND


1351 
	`´štf
("don't‚eedo suspend‚ow \n");

1357 if(
Has_»ad_»que¡
 == 1) {

1359 
ssd
->
wr™e_su¥’d_times
 ++;

1360 
	`´štf
("wr™su¥’dime i %d\n", 
ssd
->
wr™e_su¥’d_times
);

1361 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
wr™e_´“m±ive_sign
 = 1;

1364 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1365 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
UNKNOWN
;

1366 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

1367 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + (7+2è* ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

1369 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
¡Üedsub
 = sub;

1370 
	`´štf
("¡©i¡ic_su¥’siÚ_wr™e, %d, %Îd\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
, ssd->
cu¼’t_time
);

1372 
	`´štf
("wr™su¥’d…os™iÚ i ™”©iÚ.‚um_w_cylû i  %d, stÜed sub i %Îd\n",
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
num_w_cyşe
, ssd->chªÃl_h—d[sub->loÿtiÚ->chªÃl].ch_h—d[sub->loÿtiÚ->ch].
¡Üedsub
);

1387 #ifdeà
DEBUG


1388 
	`´štf
("ssd->chªÃl_h—d[%d].ch_h—d[%d].Ãxt_¡©e_´ediù_time[%Îd] i nÙ <ğssd->cu¼’t_time[%Îd],sØgivup\n", 
i
, 
j
, 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
Ãxt_¡©e_´ediù_time
,ssd->
cu¼’t_time
);

1397  
SUCCESS
;

1399 
	}
}

1405 
	$Œy_to_»¡Üe_gc_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
)

1407 
j
 = -1;

1409 
j
 = 
	`judgšg_»ad_š_gc_ch
(
ssd
, 
chªÃl
);

1410 if(
j
 == 1){

1411 
gc_node
->
sign_fÜ_´“m±ive
 = 0;

1412 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
gc_node
->
ch_¡©us
;

1413 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + 
gc_node
->
ch_Ãxt_´ediù_time_diff
;

1415 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
gc_node
->
ch_Ãxt_¡©us
;

1416 
	`´štf
("now gøÿÀb»¡Üed h”e,chªÃÈi %d \n", 
chªÃl
);

1417 
	`´štf_gc_node_šfÜm©iÚ
(
gc_node
);

1418 #ifdeà
DEBUGSUSPEND


1419 
	`´štf
("now gc can be„estored here\n");

1423 #ifdeà
DEBUG


1424 
	`´štf
("now gc can't„estore here, forhere‡re„eads here.\n");

1427 
	}
}

1433 
	$gc_Œy_to_su¥’d_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
, 
cu¼’t_¡©e
, 
Ãxt_¡©e
, 
time
)

1435 
j
 = -1;

1437 
j
 = 
	`judgšg_»ad_š_gc_ch
(
ssd
, 
chªÃl
);

1440 if(
j
 == 0){

1441 
gc_node
->
ch_¡©us
 = 
cu¼’t_¡©e
;

1442 
gc_node
->
ch_Ãxt_¡©us
 = 
Ãxt_¡©e
;

1443 
gc_node
->
sign_fÜ_´“m±ive
 = 1;

1444 
gc_node
->
ch_Ãxt_´ediù_time_diff
 = 
time
;

1446 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
UNKNOWN
;

1449 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1450 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1451 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 +(7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
) ;

1455 
ssd
->
gc_su¥’d_times
 ++;

1456 
	`´štf
("¡©i¡ic_su¥’siÚ_gc, viùim_block_numb”,»ad, wr™e, wr™e_šÃr,ƒ¿£, chªÃl, ch, d›,…ÏÃ, cu¼’t_tim%d,%d,%d,%d,%d, %d,%d,%d,%d,%Îd\n", 
gc_node
->
viùim_block_numb”
, gc_node->
»ad
, gc_node->
wr™e
, gc_node->
gc_wr™e_šÃr
, gc_node->
”a£
, 
chªÃl
, gc_node->
ch
, gc_node->
d›
, gc_node->
¶ªe
, 
ssd
->
cu¼’t_time
);

1457 
	`´štf
("gøsu¥’dime i %d\n", 
ssd
->
gc_su¥’d_times
);

1458 
	`´štf
("now in…reemptive state here\n");

1459 
	`´štf_gc_node_šfÜm©iÚ
(
gc_node
);

1460 #ifdeà
DEBUG


1461 
	`´štf
("now in…reemptive state here\n");

1465 #ifdeà
DEBUG


1466 
	`´štf
("dont haveo suspend here\n");

1469 
	}
}

1478 
	$£rviûs_2_gc_busy_š_ch
(
ssd_šfo
 *
ssd
)

1480 
i
 = 0;

1481 
j
 = 0;

1482 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
;

1483 
cu¼’t_¡©e
 = 0, 
Ãxt_¡©e
 = 0;

1484 
Ãxt_¡©e_´ediù_time
 = 0;

1486 
loÿl
 *
loÿtiÚ
 = 
NULL
;

1487 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
Œªsãr_size
;

1488 #ifdeà
DEBUG


1489 
	`´štf
("go into gc busy…rocess here\n");

1493 if(
ssd
->
debug_sign
 == 1){

1504 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1506 
gc_node
 = 
ssd
->
chªÃl_h—d
[
i
].
gc_commªd
;

1509 if(
gc_node
 =ğ
NULL
){

1510 #ifdeà
DEBUGONLYGC


1511 
	`´štf
("h”chªÃÈ%d ha nØgø! jum°out.\n", 
i
);

1515 
chªÃl
 = 
i
;

1516 
ch
 = 
gc_node
->chip;

1517 
d›
 = 
gc_node
->die;

1518 
¶ªe
 = 
gc_node
->plane;

1519 
block
 = 
gc_node
->block;

1521 ià(
gc_node
->
sign_fÜ_´“m±ive
 == 1){

1522 #ifdeà
DEBUGONLYGC


1523 
	`´štf
("here is gc…reemptive ! jump out.\n");

1529 #ifdeà
DEBUGONLYGC


1531 
	`´štf
("h”i chªÃÈ%d begš gc_busy_d—Ènow.\n", 
i
);

1532 
	`´štf_gc_node_šfÜm©iÚ
 (
gc_node
);

1536 ià(
gc_node
 !ğ
NULL
) {

1537 #ifdeà
DEBUG


1538 
	`´štf
("gc must be unNULL sincehis ishe channel gc.\n");

1541 
cu¼’t_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].current_state;

1542 
Ãxt_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].next_state;

1543 
Ãxt_¡©e_´ediù_time
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].next_state_predict_time;

1547 ifĞ(
cu¼’t_¡©e
 !ğ
CHIP_GC_RW_BUSY
è&& (cu¼’t_¡©!ğ
CHIP_ERASE_BUSY
) ) {

1549 #ifdeà
DEBUG


1550 
	`´štf
("here channel's chip is‚ot gc status ! jump out.\n");

1563 ià((
gc_node
->
»ad_wr™e_’d
 =ğ-1è&& (
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
)){

1564 #ifdeà
DEBUG


1565 
	`´štf
("in„ead_transfer_write…art\n");

1568 #ifdeà
DEBUG


1569 
	`´štf_ssd_gc_node
(
ssd
);

1576 ifĞ(
gc_node
->
»ad
 =ğ1è&& (gc_node->
wr™e
 =ğ0è&& (gc_node->
gc_»ad_šÃr
 == 0)) {

1577 #ifdeà
DEBUG


1578 
	`´štf
("gø»ad…ha£,„—d i‹¿tiÚ i %d,ªd iÂ” sequ’û i %d \n", 
gc_node
->
»ad
, gc_node->
gc_»ad_šÃr
);

1584 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_GC_RW_BUSY
;

1585 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1586 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1588 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
;

1591 
gc_node
->
gc_»ad_šÃr
 = 1;

1595 ifĞ
	`gc_Œy_to_su¥’d_funùiÚ
(
ssd
, 
gc_node
, 
chªÃl
, 
ch
, 
CHIP_GC_RW_BUSY
, 
CHIP_IDLE
, ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
) == 1 ){

1609 ifĞ(
gc_node
->
»ad
 =ğ1è&& (gc_node->
wr™e
 =ğ0è&& (gc_node->
gc_»ad_šÃr
 == 1)) {

1610 #ifdeà
DEBUG


1611 
	`´štf
("gø»ad…ha£,„—d i‹¿tiÚ i %d,ªd iÂ” sequ’û i %d \n", 
gc_node
->
»ad
, gc_node->
gc_»ad_šÃr
);

1616 
gc_node
->
gc_»ad_šÃr
 = -1;

1617 
gc_node
->
»ad
 = 0;

1618 
gc_node
->
wr™e
 = 1;

1626 ifĞ(
gc_node
->
»ad
 =ğ0è&& (gc_node->
wr™e
 =ğ1è&& (gc_node->
gc_wr™e_šÃr
 >= 0) && (gc_node->gc_write_inner <= 9)) {

1627 #ifdeà
DEBUG


1628 
	`´štf
("chªÃÈ%d, gøwr™pha£, wr™™”©iÚ i %d,ªd iÂ” sequ’û i %d \n",
chªÃl
, 
gc_node
->
wr™e
, gc_node->
gc_wr™e_šÃr
);

1635 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_GC_RW_BUSY
;

1636 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1637 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_GC_RW_BUSY
;

1639 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + 20000;

1641 
gc_node
->
gc_wr™e_šÃr
 ++;

1646 iàĞ
	`gc_Œy_to_su¥’d_funùiÚ
(
ssd
, 
gc_node
, 
chªÃl
, 
ch
, 
CHIP_GC_RW_BUSY
, CHIP_GC_RW_BUSY, 20000) == 1){

1662 ifĞ(
gc_node
->
»ad
 =ğ0è&& (gc_node->
wr™e
 =ğ1è&& (gc_node->
gc_wr™e_šÃr
 == 10)) {

1663 #ifdeà
DEBUG


1664 
	`´štf
("gøwr™pha£, wr™™”©iÚ i %d,ªd iÂ” sequ’û i %d \n", 
gc_node
->
wr™e
, gc_node->
gc_wr™e_šÃr
);

1670 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1672 if(
gc_node
->
Ï¡_·ge_š_viùim_d—l
 == 0)

1674 
gc_node
->
»ad_wr™e_’d
 = 0;

1676 
loÿtiÚ
 = (
loÿl
 *è
	`m®loc
((local));

1677 
	`®loc_as£¹
(
loÿtiÚ
, "location");

1678 
	`mem£t
(
loÿtiÚ
, 0, (
loÿl
));

1680 
loÿtiÚ
->
chªÃl
 = channel;

1681 
loÿtiÚ
->
ch
 = chip;

1682 
loÿtiÚ
->
d›
 = die;

1683 
loÿtiÚ
->
¶ªe
 =…lane;

1684 
loÿtiÚ
->
block
 = block;

1685 
loÿtiÚ
->
·ge
 = 
gc_node
->
cİy_·ge_numb”
;

1686 
	`move_·ge
(
ssd
, 
loÿtiÚ
,

1687 &
Œªsãr_size
);

1692 
gc_node
->
gc_wr™e_šÃr
 = -1;

1693 
gc_node
->
»ad
 = 1;

1694 
gc_node
->
wr™e
 = 0;

1700 
loÿtiÚ
 = (
loÿl
 *è
	`m®loc
((local));

1701 
	`®loc_as£¹
(
loÿtiÚ
, "location");

1702 
	`mem£t
(
loÿtiÚ
, 0, (
loÿl
));

1704 
loÿtiÚ
->
chªÃl
 = channel;

1705 
loÿtiÚ
->
ch
 = chip;

1706 
loÿtiÚ
->
d›
 = die;

1707 
loÿtiÚ
->
¶ªe
 =…lane;

1708 
loÿtiÚ
->
block
 = block;

1709 
loÿtiÚ
->
·ge
 = 
gc_node
->
cİy_·ge_numb”
;

1710 
	`move_·ge
(
ssd
, 
loÿtiÚ
,

1711 &
Œªsãr_size
);

1714 
	`ä“
(
loÿtiÚ
);

1715 
loÿtiÚ
 = 
NULL
;

1723 #ifdeà
DEBUG


1724 
	`´štf_ssd_gc_node
(
ssd
);

1734 ià((
gc_node
->
»ad_wr™e_’d
 =ğ0è&& (
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
)){

1736 #ifdeà
DEBUG


1737 
	`´štf
("inƒrase…art\n");

1739 #ifdeà
DEBUG


1740 
	`´štf_ssd_gc_node
(
ssd
);

1745 ià(
gc_node
->
”a£
 == 0) {

1746 #ifdeà
DEBUG


1747 
	`´štf
("gø”a£…ha£,ƒ¿£ i‹¿tiÚ i %d\n", 
gc_node
->
”a£
);

1751 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_ERASE_BUSY
;

1752 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1753 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_ERASE_BUSY
;

1755 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
/2;

1757 
gc_node
->
”a£
 = 1;

1760 ifĞ
	`gc_Œy_to_su¥’d_funùiÚ
(
ssd
, 
gc_node
, 
chªÃl
, 
ch
, 
CHIP_ERASE_BUSY
, CHIP_ERASE_BUSY, ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
/2 ) == 1){

1774 ià(
gc_node
->
”a£
 == 1) {

1775 #ifdeà
DEBUG


1776 
	`´štf
("gø”a£…ha£,ƒ¿£ i‹¿tiÚ i %d\n", 
gc_node
->
”a£
);

1781 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_ERASE_BUSY
;

1782 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1783 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1785 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
/2;

1786 
gc_node
->
”a£
 = 2;

1789 ifĞ
	`gc_Œy_to_su¥’d_funùiÚ
(
ssd
, 
gc_node
, 
chªÃl
, 
ch
, 
CHIP_ERASE_BUSY
, 
CHIP_IDLE
, ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
/2 ) == 1){

1804 ià(
gc_node
->
”a£
 == 2) {

1805 #ifdeà
DEBUG


1806 
	`´štf
("gø”a£…ha£,ƒ¿£ i‹¿tiÚ i %d\n", 
gc_node
->
”a£
);

1820 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
);

1822 
	`´štf
("now gøfšished iÀchªÃÈ%d\n", 
i
);

1823 
	`d–‘e_gc_node
(
ssd
, 
chªÃl
, 
gc_node
);

1840 
	}
}

1852 
	$£rviûs_2_r_cmd_Œªs_ªd_com¶‘e
(
ssd_šfo
 *
ssd
) {

1853 
i
 = 0;

1854 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

1856 
‹mp_ch_numb”
 = 0 ;

1857 
‹mpchªÃl_»ad_Ëngth
 = 0;

1859 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
;

1860 
ch
 ;

1861 #ifdeà
DEBUGSUSPEND


1862 
	`´štf
("go into services_2_r_cmd_trans_and_complete\n");

1866 
i
 = 0; i <

1867 
ssd
->
·¿m‘”
->
chªÃl_numb”
; 
i
++)

1869 
sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

1871 
sub
 !ğ
NULL
) {

1874 if(
sub
->
loÿtiÚ
 =ğ
NULL
){

1875 
	`´štf
("lxc,now i wrÚg„—d h”e.chªÃÈi %d, \n", 
i
);

1879 if(
i
 !ğ
sub
->
loÿtiÚ
->
chªÃl
){

1880 
	`´štf
("here what kind of wrong???\n");

1882 
ch
 = 
sub
->
loÿtiÚ
->chip;

1883 #ifdeà
DEBUGSUSPEND


1886 
	`´štf
(":£rviûs_2_r_cmd_Œªs_ªd_com¶‘sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d,sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd,ssd-> cu¼’t_tim%Îd, sub->cu¼’t_¡©%d, sub->Ãxt_¡©%d\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time,sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
 );

1889 ià(
sub
->
cu¼’t_¡©e
 ==

1890 
SR_R_C_A_TRANSFER
)

1892 #ifdeà
DEBUGSUSPEND


1893 
	`´štf
("sub cu¼’t_¡©i SR_R_C_A_TRANSFER,sub i %d\n",
sub
);

1896 ià(
sub
->
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
) {

1897 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_R_READ
, 
NORMAL
);

1901 
sub
 = sub->
Ãxt_node
;

1907 
i
 = 0; i <

1908 
ssd
->
·¿m‘”
->
chªÃl_numb”
; 
i
++)

1910 
sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

1911 
p
 = 
sub
;

1912 
sub
 !ğ
NULL
) {

1915 if(
sub
->
loÿtiÚ
 =ğ
NULL
){

1916 
	`´štf
("lxc,now i wrÚg„—d h”e.chªÃÈi %d, \n", 
i
);

1920 if(
i
 !ğ
sub
->
loÿtiÚ
->
chªÃl
){

1921 
	`´štf
("here what kind of wrong???\n");

1923 
ch
 = 
sub
->
loÿtiÚ
->chip;

1925 ià((
sub
->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
) ||

1926 ((
sub
->
Ãxt_¡©e
 =ğ
SR_COMPLETE
è&& (sub->
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
))) {

1927 #ifdeà
DEBUGSUSPEND


1928 
	`´štf
("now gØštØ»ad com¶‘funùiÚ.sub->cu¼’t_§‹ i (%d)=SR_COMPLETE o¸sub->Ãxt_¡©i (%d)=COMPLETE,\n",
sub
->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
);

1934 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
ch_»ad_queue_Ëngth
 --;

1941 
	`´štf
("now chªÃÈ%d, ch i %d, h—d‡dd»s %Îd,a‡dd»s %Îd, moved sub i %Îd\n", 
i
, 
sub
->
loÿtiÚ
->
ch
, 
ssd
->
chªÃl_h—d
[i].
subs_r_h—d
,ssd->chªÃl_h—d[i].
subs_r_
, sub);

1942 
‹mp_ch_numb”
 = 0, 
‹mpchªÃl_»ad_Ëngth
 = 0;emp_ch_numb” < (
ssd
->
·¿m‘”
->
ch_num
 / ssd->·¿m‘”->
chªÃl_numb”
);emp_chip_number ++){

1943 
	`´štf
("chªÃÈ%d, ch %d,„—d_Ëngth i %d\n", 
i
, 
‹mp_ch_numb”
, 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[‹mp_ch_numb”].
ch_»ad_queue_Ëngth
);

1944 
‹mpchªÃl_»ad_Ëngth
 +ğ
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
‹mp_ch_numb”
].
ch_»ad_queue_Ëngth
;

1947 ià(
sub
 !=

1948 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
)

1950 
	`´štf
("not head\n");

1953 if(
sub
 =ğ
ssd
->
chªÃl_h—d
[
i
].
subs_r_
){

1955 
p
->
Ãxt_node
 = 
sub
->next_node;

1956 
ssd
->
chªÃl_h—d
[
i
].
subs_r_
 = 
p
;

1960 
p
->
Ãxt_node
 = 
sub
->next_node;

1962 
sub
 = sub->
Ãxt_node
;

1964 if(
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
->
loÿtiÚ
 == 0){

1966 
	`´štf
("lxclxclxc2_deletereadwrongin channelhead\n");

1972 if(
‹mpchªÃl_»ad_Ëngth
 != 0){

1973 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
 = ssd->chªÃl_h—d[i].subs_r_h—d->
Ãxt_node
;

1974 
sub
 = sub->
Ãxt_node
;

1975 
p
 = 
sub
;

1979 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
 = 
NULL
;

1980 
ssd
->
chªÃl_h—d
[
i
].
subs_r_
 = 
NULL
;

1986 if(
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
->
loÿtiÚ
 == 0){

1988 
	`´štf
("lxclxclxc1_deletereadwrongin channelhead\n");

1993 
	`´štf
("aá” moved‚ow chªÃÈ%d,†’gth i %d, h—d‡dd»s %Îd,0x %x,a‡dd»s %Îd, 0x%x \n", 
i
, 
‹mpchªÃl_»ad_Ëngth
, 
ssd
->
chªÃl_h—d
[i].
subs_r_h—d
,ssd->chªÃl_h—d[i].subs_r_h—d,ssd->chªÃl_h—d[i].
subs_r_
,ssd->channel_head[i].subs_r_tail );

1994 if((
‹mpchªÃl_»ad_Ëngth
 !ğ0è&& ( 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
 == 0)){

1995 
	`´štf
("stop here\n");

1999 
p
 = 
sub
;

2000 
sub
 = sub->
Ãxt_node
;

2004 if(
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
->
loÿtiÚ
 == 0){

2006 
	`´štf
("lxclxclxc_deletereadwrongin channelhead\n");

2014 
i
 = 0; i <

2015 
ssd
->
·¿m‘”
->
chªÃl_numb”
; 
i
++) {

2016 
gc_node
 = 
ssd
->
chªÃl_h—d
[
i
].
gc_commªd
;

2017 if(
gc_node
 !ğ
NULL
){

2019 
ch
 = 
gc_node
->chip;

2022 if((
gc_node
 !ğ
NULL
è&& (gc_node->
sign_fÜ_´“m±ive
 == 1) ){

2023 
	`Œy_to_»¡Üe_gc_funùiÚ
(
ssd
, 
gc_node
, 
i
, 
ch
);

2030 
	`Œy_to_»¡Üe_wr™e_funùiÚ
(
ssd
);

2033  
SUCCESS
;

2034 
	}
}

2040 
Stus
 
	$£rviûs_2_r_d©a_Œªs
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

2041 *
chªge_cu¼’t_time_æag
) {

2042 
ch
 = 0;

2043 
d›
 = 0, 
¶ªe
 = 0, 
add»ss_µn
 = 0, 
d›1
 = 0;

2044 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL, *
sub1
 = NULL;

2045 
sub_»que¡
 *
sub_twİÏÃ_Úe
 = 
NULL
, *
sub_twİÏÃ_two
 = NULL;

2046 
sub_»que¡
 *
sub_š‹¾—ve_Úe
 = 
NULL
, *
sub_š‹¾—ve_two
 = NULL;

2047 
ch
 = 0; ch < 
ssd
->
chªÃl_h—d
[
chªÃl
].chip; chip++) {

2048 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 =ğ
CHIP_WAIT
) ||

2049 ((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 =ğ
CHIP_DATA_TRANSFER
) &&

2050 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
))) {

2051 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

2052 
sub
 = 
	`fšd_»ad_sub_»que¡
(
ssd
, 
chªÃl
, 
ch
, 
d›
);

2053 ià(
sub
 !ğ
NULL
) {

2058 ià(
sub
 =ğ
NULL
) {

2062 #ifdeà
DEBUGSUSPEND


2063 
	`´štf
("SERVICES_2_r_d©a_Œªs, sub from fšd_»ad_sub_»que¡,sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
);

2073 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE_READ
) == AD_TWOPLANE_READ) ||

2074 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE)) {

2075 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE_READ
) ==

2076 
AD_TWOPLANE_READ
)

2078 #ifdeà
DEBUG


2079 
	`´štf
("only has‡d_twoplane_read\n");

2081 
sub_twİÏÃ_Úe
 = 
sub
;

2082 
sub_twİÏÃ_two
 = 
NULL
;

2084 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
sub
->
loÿtiÚ
->
¶ªe
].
add_»g_µn
 = -1;

2085 
sub_twİÏÃ_two
 = 
	`fšd_»ad_sub_»que¡
(
ssd
, 
chªÃl
, 
ch
,

2086 
d›
);

2092 ià(
sub_twİÏÃ_two
 =ğ
NULL
) {

2093 
	`go_Úe_¡•
(
ssd
, 
sub_twİÏÃ_Úe
, 
NULL
, 
SR_R_DATA_TRANSFER
, 
NORMAL
);

2094 *
chªge_cu¼’t_time_æag
 = 0;

2095 *
chªÃl_busy_æag
 = 1;

2098 
	`go_Úe_¡•
(
ssd
, 
sub_twİÏÃ_Úe
, 
sub_twİÏÃ_two
, 
SR_R_DATA_TRANSFER
, 
TWO_PLANE
);

2099 *
chªge_cu¼’t_time_æag
 = 0;

2100 *
chªÃl_busy_æag
 = 1;

2103 } ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) ==

2104 
AD_INTERLEAVE
)

2106 #ifdeà
DEBUG


2107 
	`´štf
("opps,‚ever here for‡d_interleave\n");

2109 
sub_š‹¾—ve_Úe
 = 
sub
;

2110 
sub_š‹¾—ve_two
 = 
NULL
;

2111 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
sub
->
loÿtiÚ
->
¶ªe
].
add_»g_µn
 = -1;

2113 
d›1
 = 0; d›1 < 
ssd
->
·¿m‘”
->
d›_ch
; die1++) {

2114 ià(
d›1
 !ğ
d›
) {

2115 
sub_š‹¾—ve_two
 = 
	`fšd_»ad_sub_»que¡
(
ssd
, 
chªÃl
, 
ch
,

2116 
d›1
);

2117 ià(
sub_š‹¾—ve_two
 !ğ
NULL
) {

2122 ià(
sub_š‹¾—ve_two
 =ğ
NULL
) {

2123 
	`go_Úe_¡•
(
ssd
, 
sub_š‹¾—ve_Úe
, 
NULL
, 
SR_R_DATA_TRANSFER
, 
NORMAL
);

2125 *
chªge_cu¼’t_time_æag
 = 0;

2126 *
chªÃl_busy_æag
 = 1;

2129 
	`go_Úe_¡•
(
ssd
, 
sub_twİÏÃ_Úe
, 
sub_š‹¾—ve_two
, 
SR_R_DATA_TRANSFER
, 
INTERLEAVE
);

2131 *
chªge_cu¼’t_time_æag
 = 0;

2132 *
chªÃl_busy_æag
 = 1;

2138 #ifdeà
DEBUGSUSPEND


2139 
	`´štf
("SERVICES_2_r_data_trans, in chipƒnter go_one_step(SR_R_DATA_TRANSFER)‚ow\n");

2142 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_R_DATA_TRANSFER
, 
NORMAL
);

2143 *
chªge_cu¼’t_time_æag
 = 0;

2144 *
chªÃl_busy_æag
 = 1;

2150 ià(*
chªÃl_busy_æag
 == 1) {

2154  
SUCCESS
;

2155 
	}
}

2161 
	$£rviûs_2_r_wa™
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

2162 *
chªge_cu¼’t_time_æag
) {

2163 
¶ªe
 = 0, 
add»ss_µn
 = 0;

2164 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

2165 
sub_»que¡
 *
sub_twİÏÃ_Úe
 = 
NULL
, *
sub_twİÏÃ_two
 = NULL;

2166 
sub_»que¡
 *
sub_š‹¾—ve_Úe
 = 
NULL
, *
sub_š‹¾—ve_two
 = NULL;

2169 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

2171 #ifdeà
DEBUGSUSPEND


2172 
	`´štf
("enter services_2_r_wait\n");

2175 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE_READ
) ==

2176 
AD_TWOPLANE_READ
)

2178 #ifdeà
DEBUGSUSPEND


2179 
	`´štf
("enter services_2_r_wait AD_TWOPLANE_READ\n");

2183 
sub_twİÏÃ_Úe
 = 
NULL
;

2184 
sub_twİÏÃ_two
 = 
NULL
;

2186 
	`fšd_š‹¾—ve_twİÏÃ_sub_»que¡
(
ssd
, 
chªÃl
, 
sub_twİÏÃ_Úe
, 
sub_twİÏÃ_two
, 
TWO_PLANE
);

2188 ià(
sub_twİÏÃ_two
 !ğ
NULL
)

2190 #ifdeà
DEBUG


2191 
	`´štf
("opps,‚ever happen,enter services_2_r_wait\n");

2194 
	`go_Úe_¡•
(
ssd
, 
sub_twİÏÃ_Úe
, 
sub_twİÏÃ_two
, 
SR_R_C_A_TRANSFER
, 
TWO_PLANE
);

2196 *
chªge_cu¼’t_time_æag
 = 0;

2197 *
chªÃl_busy_æag
 = 1;

2198 } ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) !=

2199 
AD_INTERLEAVE
)

2201 #ifdeà
DEBUG


2202 
	`´štf
("opps1,‚ever happen‡lso here, services_2_r_wait\n");

2205 
sub
 !=

2206 
NULL
)

2208 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2210 ià((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 ==

2211 
CHIP_IDLE
) ||

2212 ((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e
 ==

2213 
CHIP_IDLE
) &&

2214 (
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

2215 
ssd
->
cu¼’t_time
))) {

2216 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_R_C_A_TRANSFER
, 
NORMAL
);

2218 *
chªge_cu¼’t_time_æag
 = 0;

2219 *
chªÃl_busy_æag
 = 1;

2225 
sub
 = sub->
Ãxt_node
;

2229 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) ==

2230 
AD_INTERLEAVE
)

2232 #ifdeà
DEBUGSUSPEND


2233 
	`´štf
("enter services_2_r_wait INTERLEAVE\n");

2237 
sub_š‹¾—ve_Úe
 = 
NULL
;

2238 
sub_š‹¾—ve_two
 = 
NULL
;

2239 
	`fšd_š‹¾—ve_twİÏÃ_sub_»que¡
(
ssd
, 
chªÃl
, 
sub_š‹¾—ve_Úe
, 
sub_š‹¾—ve_two
, 
INTERLEAVE
);

2241 ià(
sub_š‹¾—ve_two
 !ğ
NULL
)

2243 #ifdeà
DEBUG


2244 
	`´štf
("opps2,‚ever happen services_2_r_wait\n");

2248 
	`go_Úe_¡•
(
ssd
, 
sub_š‹¾—ve_Úe
, 
sub_š‹¾—ve_two
, 
SR_R_C_A_TRANSFER
, 
INTERLEAVE
);

2250 *
chªge_cu¼’t_time_æag
 = 0;

2251 *
chªÃl_busy_æag
 = 1;

2254 #ifdeà
DEBUG


2255 
	`´štf
("in services_2_r_wait, only here\n");

2258 
sub
 !=

2259 
NULL
)

2261 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2262 ià((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 ==

2263 
CHIP_IDLE
) ||

2264 ((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e
 ==

2265 
CHIP_IDLE
) &&

2266 (
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

2267 
ssd
->
cu¼’t_time
))) {

2269 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_R_C_A_TRANSFER
, 
NORMAL
);

2271 *
chªge_cu¼’t_time_æag
 = 0;

2272 *
chªÃl_busy_æag
 = 1;

2280 
sub
 = sub->
Ãxt_node
;

2288 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

2289 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE_READ
) != AD_TWOPLANE_READ)) {

2290 
sub
 !=

2291 
NULL
)

2294 #ifdeà
DEBUGSUSPEND


2295 
	`´štf
("begšƒÁ” s”viûs_2_r_wa™ NO‡dvªû commªds,h”i sub infÜm©iÚ, but, somoàthem‡»‚Ù u£ful, sub cu¼’t_¡©%d, sub cu¼’t_tim%Îd, sub‚ext_¡©%d,sub‚exˆ´ediùim%Îd, sub begš_tim%Îd, sub chªÃÈ%d, sub ch %d, sub d› %d, sub…ÏÃ %d, sub block %d, sub…ag%d, sub->ÍÀ%d\n",
sub
->
cu¼’t_¡©e
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e
, sub->
Ãxt_¡©e_´ediù_time
, sub->
begš_time
, sub->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
, sub->
Ín
);

2298 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2300 ià((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
cu¼’t_¡©e
 ==

2301 
CHIP_IDLE
) ||

2302 ((
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e
 ==

2303 
CHIP_IDLE
) &&

2304 (
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

2305 
ssd
->
cu¼’t_time
))) {

2307 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_R_C_A_TRANSFER
, 
NORMAL
);

2309 *
chªge_cu¼’t_time_æag
 = 0;

2310 *
chªÃl_busy_æag
 = 1;

2316 
sub
 = sub->
Ãxt_node
;

2320  
SUCCESS
;

2321 
	}
}

2326 
	$d–‘e_w_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub
) {

2327 
sub_»que¡
 *
p
 = 
NULL
;

2332 
ssd
->
chªÃl_h—d
[
sub
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub->loÿtiÚ->
ch
].
ch_wr™e_queue_Ëngth
 --;

2333 #ifdeà
DEBUGSUSPEND


2334 
	`´štf
("chªÃÈ[%d], ch [%d],d› [%d], block[%d],…age[%d], wr™queuËngth mšu Ú%d\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
, 
ssd
->
chªÃl_h—d
[sub->loÿtiÚ->chªÃl].
ch_h—d
[sub->loÿtiÚ->ch].
ch_wr™e_queue_Ëngth
);

2337 ià(
sub
 =ğ
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
)

2339 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 !ğssd->chªÃl_h—d[chªÃl].
subs_w_
) {

2340 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 = 
sub
->
Ãxt_node
;

2342 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 = 
NULL
;

2343 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
NULL
;

2346 
p
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

2347 
p
->
Ãxt_node
 !ğ
sub
) {

2348 
p
 =…->
Ãxt_node
;

2351 ià(
sub
->
Ãxt_node
 !ğ
NULL
) {

2352 
p
->
Ãxt_node
 = 
sub
->next_node;

2354 
p
->
Ãxt_node
 = 
NULL
;

2355 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
p
;

2359  
SUCCESS
;

2360 
	}
}

2365 
Stus


2366 
	$cİy_back
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
) {

2367 
Şd_µn
 = -1, 
Ãw_µn
 = -1;

2368 
time
 = 0;

2369 ià(
ssd
->
·¿m‘”
->
g»ed_CB_ad
 == 1)

2371 
Şd_µn
 = -1;

2372 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 !=

2375 ià((
sub
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub->
Ín
].state) == ssd->dram->map->map_entry[sub->lpn].state) {

2376 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2377 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2378 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2380 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 19 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2381 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

2382 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2383 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2384 
ssd
->
cİy_back_couÁ
++;

2385 
ssd
->
»ad_couÁ
++;

2386 
ssd
->
upd©e_»ad_couÁ
++;

2387 
Şd_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

2390 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2391 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2392 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2394 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

2395 
time
 = 
sub
->
com¶‘e_time
;

2397 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub);

2399 ià(
Şd_µn
 !=

2402 
Ãw_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

2403 
Şd_µn
 % 2 !ğ
Ãw_µn
 % 2)

2405 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
,

2406 
sub
);

2407 
ssd
->
´og¿m_couÁ
--;

2408 
ssd
->
wr™e_æash_couÁ
--;

2409 
ssd
->
wa¡e_·ge_couÁ
++;

2410 
Ãw_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

2415 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 != 0) {

2416 ià((
sub
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub->
Ín
].state) == ssd->dram->map->map_entry[sub->lpn].state) {

2417 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2418 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2419 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2420 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
,

2421 
sub
);

2423 
Şd_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

2424 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
,

2425 
sub
);

2426 
Ãw_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

2427 ià(
Şd_µn
 % 2 =ğ
Ãw_µn
 % 2) {

2428 
ssd
->
cİy_back_couÁ
++;

2429 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 19 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2430 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

2431 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2432 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2434 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2435 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

2436 (
	`size
(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
)) *

2437 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
 +

2438 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2439 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2441 
ssd
->
»ad_couÁ
++;

2442 
ssd
->
upd©e_»ad_couÁ
++;

2445 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2446 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2447 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2448 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub);

2450 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

2451 
time
 = 
sub
->
com¶‘e_time
;

2457 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

2458 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

2459 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

2460 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
time
;

2462 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

2463 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

2464 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

2465 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

2466 
time
 + 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

2468  
SUCCESS
;

2469 
	}
}

2474 
Stus


2475 
	$¡©ic_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
) {

2476 
time
 = 0;

2477 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 !=

2480 ià((
sub
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub->
Ín
].state) ==

2481 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
)

2483 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2484 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2485 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2487 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2488 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

2489 (
	`size
((
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 ^ sub->state))) *

2490 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
 +

2491 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2492 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2493 
ssd
->
»ad_couÁ
++;

2494 
ssd
->
upd©e_»ad_couÁ
++;

2497 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

2498 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

2499 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

2501 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

2502 
time
 = 
sub
->
com¶‘e_time
;

2504 
	`g‘_µn
(
ssd
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub);

2509 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

2510 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

2511 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

2512 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
time
;

2514 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

2515 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

2516 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

2517 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

2518 
time
 + 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

2520  
SUCCESS
;

2521 
	}
}

2526 
	$Ãw_£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

2527 *
chªge_cu¼’t_time_æag
) {

2528 
j
 = 0, 
ch
 = 0;

2529 
k
 = 0;

2530 
Şd_µn
 = 0, 
Ãw_µn
 = 0;

2531 
ch_tok’
 = 0, 
d›_tok’
 = 0, 
¶ªe_tok’
 = 0, 
add»ss_µn
 = 0;

2532 
d›
 = 0, 
¶ªe
 = 0;

2533 
time
 = 0;

2534 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

2535 
sub_»que¡
 *
sub_twİÏÃ_Úe
 = 
NULL
, *
sub_twİÏÃ_two
 = NULL;

2536 
sub_»que¡
 *
sub_š‹¾—ve_Úe
 = 
NULL
, *
sub_š‹¾—ve_two
 = NULL;

2542 #ifdeà
DEBUG


2543 
	`´štf
("’‹¸£rviûs_2_wr™e, chªÃÈi %d, chªÃl_busy_æag i %d, chªge_cu¼’t_time_æag i %d\n",
chªÃl
, *
chªÃl_busy_æag
, *
chªge_cu¼’t_time_æag
);

2545 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 !ğ
NULL
) || (ssd->subs_w_head != NULL)) {

2546 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 0)

2548 
j
 = 0; j < 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch
; j++) {

2549 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) && (ssd->subs_w_head == NULL)) {

2554 
ch_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
;

2555 #ifdeà
DEBUG


2556 
	`´štf
("chªÃÈ%d' chok’ i %d\n", 
chªÃl
, 
ch_tok’
);

2560 ià(*
chªÃl_busy_æag
 == 0) {

2561 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
cu¼’t_¡©e
 =ğ
CHIP_IDLE
) ||

2562 ((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
Ãxt_¡©e
 =ğ
CHIP_IDLE
) &&

2563 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
Ãxt_¡©e_´ediù_time
 <=

2564 
ssd
->
cu¼’t_time
))) {

2565 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) && (ssd->subs_w_head == NULL)) {

2568 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
;

2569 #ifdeà
DEBUG


2570 
	`´štf
("chªÃÈ%d' chok’ i %d,d›ok’ i %d\n", 
chªÃl
, 
ch_tok’
, 
d›_tok’
);

2574 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

2575 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) !=

2576 
AD_TWOPLANE
))

2578 #ifdeà
DEBUG


2579 
	`´štf
("if you have‚ot set‡dvanced command,then only do‚ormal„ead‡nd write\n");

2582 
sub
 = 
	`fšd_wr™e_sub_»que¡
(
ssd
, 
chªÃl
);

2583 ià(
sub
 =ğ
NULL
) {

2587 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2588 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
;

2590 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch_tok’
, 
d›_tok’
, 
¶ªe_tok’
, 
sub
);

2592 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
 =

2593 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
 +

2594 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

2596 *
chªge_cu¼’t_time_æag
 = 0;

2598 ià(
ssd
->
·¿m‘”
->
ad_´iÜ™y2
 == 0) {

2599 
ssd
->
»®_time_sub»q
--;

2601 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_W_TRANSFER
, 
NORMAL
);

2602 
	`d–‘e_w_sub_»que¡
(
ssd
, 
chªÃl
, 
sub
);

2604 *
chªÃl_busy_æag
 = 1;

2610 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2611 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1) %

2612 
ssd
->
·¿m‘”
->
d›_ch
;

2613 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2614 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

2619 ià(
	`dyÇmic_advªûd_´oûss
(
ssd
, 
chªÃl
, 
ch_tok’
è=ğ
NULL
) {

2620 *
chªÃl_busy_æag
 = 0;

2621 #ifdeà
DEBUG


2622 
	`´štf
("chªÃÈ%d' chok’ i %d,h”i nÙ su™ o³¿tiÚ iÀthi chªÃl\n", 
chªÃl
, 
ch_tok’
);

2626 #ifdeà
DEBUG


2627 
	`´štf
("chªÃÈ%d' chok’ i %d, h”g‘‡ dyÇmic_advªû_´oûss\n", 
chªÃl
, 
ch_tok’
);

2630 *
chªÃl_busy_æag
 = 1;

2631 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2632 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1) %

2633 
ssd
->
·¿m‘”
->
d›_ch
;

2634 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2635 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

2636 #ifdeà
DEBUG


2637 
	`´štf
("chªÃl---tok’ upd©(Úly movah—dèchªÃÈ%d' chok’ i %d\n", 
chªÃl
, 
ssd
->
chªÃl_h—d
[chªÃl].
tok’
);

2644 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2645 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

2646 #ifdeà
DEBUG


2647 
	`´štf
("d›---tok’ upd©(Úly movh—d),h’‚ewok’ i chªÃÈ%d' chok’ i %d, d›_tok’ i %d\n", 
chªÃl
, 
ch_tok’
, 
ssd
->
chªÃl_h—d
[chªÃl].
ch_h—d
[ch_tok’].
tok’
);

2653 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2654 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

2656 } ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 1)

2658 #ifdeà
DEBUGSUSPEND


2659 
	`´štf
("¡©iø®loÿtiÚ.....now,‡nd v”y impÜÁ, chªÃÈh”i %d.\n", 
chªÃl
);

2661 
ch
 = 0; ch < 
ssd
->
chªÃl_h—d
[
chªÃl
].chip; chip++) {

2663 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 =ğ
CHIP_IDLE
) ||

2664 ((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 =ğ
CHIP_IDLE
) &&

2665 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
))) {

2666 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) {

2669 ià(*
chªÃl_busy_æag
 == 0) {

2671 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

2672 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) != AD_TWOPLANE))

2674 #ifdeà
DEBUGSUSPEND


2675 
	`´štf
("new_services_2_write static operation. Here markshathere is‚o use of interleave‡ndwoplaneechonologies. \n");

2679 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) {

2682 #ifdeà
DEBUGSUSPEND


2683 
	`´štf
("fÜ†oİ,chªÃÈi %d, ch i %d, d› i %d\n",
chªÃl
, 
ch
, 
d›
);

2687 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

2688 
sub
 !ğ
NULL
) {

2689 #ifdeà
DEBUGSUSPEND


2690 
	`´štf
("lxc!!, h”i ¡¿nge!!,ƒv”y sub: sub->loÿtiÚ->chªÃÈ%d, sub->loÿtiÚ->ch %d, sub->loÿtiÚ->d› %d, sub->loÿtiÚ->block %d, sub->loÿtiÚ->·g%d ,sub->cu¼’t_¡©%d\n", 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
, sub->
cu¼’t_¡©e
 );

2693 ià((
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
è&& (sub->
loÿtiÚ
->
chªÃl
 == channel) &&

2694 (
sub
->
loÿtiÚ
->
ch
 == chip) )

2699 
sub
 = sub->
Ãxt_node
;

2701 ià(
sub
 =ğ
NULL
) {

2702 #ifdeà
DEBUGSUSPEND


2703 
	`´štf
("thi ch %d, d› %d ha nØavaabË sub-»que¡s,movtØÃxˆd› \n", 
ch
,
d›
);

2709 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2710 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

2715 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_COPYBACK
) == AD_COPYBACK) {

2716 
	`cİy_back
(
ssd
, 
chªÃl
, 
ch
, 
d›
,

2717 
sub
);

2718 #ifdeà
DEBUGSUSPEND


2719 
	`´štf
("will‚ever happen‚ow,†xclxclxc\n");

2723 *
chªge_cu¼’t_time_æag
 = 0;

2726 #ifdeà
DEBUGSUSPEND


2727 
	`´štf
("wr™begš!!now begš„uÀthgo_Úe_¡•, sr_w_c_a_d©a_Œªsãr,‚ow %d chªÃl, %d ch\n",
chªÃl
, 
ch
);

2729 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_W_C_A_DATA_TRANSFER
, 
NORMAL
);

2731 *
chªge_cu¼’t_time_æag
 = 0;

2735 *
chªÃl_busy_æag
 = 1;

2741 ià(
	`dyÇmic_advªûd_´oûss
(
ssd
, 
chªÃl
, 
ch
è=ğ
NULL
) {

2742 *
chªÃl_busy_æag
 = 0;

2744 *
chªÃl_busy_æag
 = 1;

2753 #ifdeà
DEBUGSUSPEND


2754 
	`´štf
("š‚ew s”viûs_2_wr™chªÃÈ%d, ch %d i busy\n", 
chªÃl
, 
ch
);

2761  
SUCCESS
;

2762 
	}
}

2765 
	$Œy_to_»¡Üe_wr™e_funùiÚ
(
ssd_šfo
 *
ssd
){

2767 
chªÃl
 , 
ch
;

2769 
sub_»que¡
 *
sub_fÜ_»ad
 = 
NULL
;

2770 
sub_»que¡
 *
sub_fÜ_wr™e
 = 
NULL
;

2771 
sub_»que¡
 *
‹mp_sub_fÜ_¡Üe
 = 
NULL
;

2773 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
;

2775 
chªÃl
 = 0; chªÃÈ< 
ssd
->
·¿m‘”
->
chªÃl_numb”
; channel++) {

2777 
ch
 = 0; ch < 
ssd
->
chªÃl_h—d
[
chªÃl
].chip; chip ++) {

2779 if(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
wr™e_´“m±ive_sign
 == 1){

2780 #ifdeà
DEBUGSUSPEND


2781 
	`´štf
("ŒyØ»¡Ü®»ady wr™su¥’ded chªÃÈ[%d], ch [%d] .\n", 
chªÃl
, 
ch
);

2785 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

2786 
sub_fÜ_»ad
 !ğ
NULL
)

2788 if(
sub_fÜ_»ad
->
loÿtiÚ
->
ch
 == chip)

2792 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
 ;

2802 if(
sub_fÜ_»ad
 =ğ
NULL
){

2804 
sub_fÜ_wr™e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

2805 
sub_fÜ_wr™e
 !ğ
NULL
)

2807 if(
sub_fÜ_wr™e
->
loÿtiÚ
->
ch
 == chip)

2811 
sub_fÜ_wr™e
 = sub_fÜ_wr™e->
Ãxt_node
 ;

2816 
	`´štf
("¡Üed sub i %Îd\n", 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
¡Üedsub
);

2817 
‹mp_sub_fÜ_¡Üe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
¡Üedsub
;

2818 
	`´štf
("»ad o³¿tiÚ. ch: %d,†²: %d,…²: %d o³¿tiÚ: %d,size: %d, ////sub_»que¡ stus:: cu¼’t_¡©e: %d, cu¼’t_time: %Îu,‚ext_¡©e: %d,‚ext_¡©e_´ediù_time: %Îu, s‹(Úly fÜ wr™e): %d\n", 
‹mp_sub_fÜ_¡Üe
->
loÿtiÚ
->
ch
,emp_sub_fÜ_¡Üe->
Ín
,emp_sub_fÜ_¡Üe->
µn
,‹mp_sub_fÜ_¡Üe->
İ”©iÚ
,emp_sub_fÜ_¡Üe->
size
,emp_sub_fÜ_¡Üe->
cu¼’t_¡©e
,‹mp_sub_fÜ_¡Üe->
cu¼’t_time
,‹mp_sub_fÜ_¡Üe->
Ãxt_¡©e
,emp_sub_fÜ_¡Üe->
Ãxt_¡©e_´ediù_time
,emp_sub_fÜ_¡Üe->
¡©e
) ;

2819 if(
sub_fÜ_wr™e
 !ğ
‹mp_sub_fÜ_¡Üe
){

2820 
	`´štf
("lxşxşxc,sØ£riou wrÚg!!!, ch %d fœ¡ wr™%Îd\n", 
ch
, 
sub_fÜ_wr™e
);

2822 #ifdeà
DEBUGSUSPEND


2823 
	`´štf
("thi ch ha nØ»ad‚ow, sØbegšØ»¡Üe,buˆhavtØjudgm’ˆchªÃÈi IDLE‡ndhnum_w_cyşi %d.\n",
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
num_w_cyşe
);

2827 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 =ğ
CHANNEL_IDLE
è|| (ssd->chªÃl_h—d[chªÃl].
Ãxt_¡©e
 =ğCHANNEL_IDLE && ssd->chªÃl_h—d[chªÃl].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
)) {

2830 if(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
num_w_cyşe
 == 0){

2831 #ifdeà
DEBUGSUSPEND


2832 
	`´štf
("restore‚um_w_cycle is 0 , wrong happen!!†xclxclxc.\n");

2835 #ifdeà
DEBUGSUSPEND


2836 
	`´štf
("now„eally can„estore .\n");

2841 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
wr™e_´“m±ive_sign
 = 0;

2842 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

2844 ifĞ(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
num_w_cyşe
) % 2 == 1 ){

2846 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG_w_´ogam
 + 5*ssd->·¿m‘”->time_ch¬aù”i¡ics.
tWC
 ;

2848 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG_w_v”ify
 + 5*ssd->·¿m‘”->time_ch¬aù”i¡ics.
tWC
;

2852 #ifdeà
DEBUGSUSPEND


2853 
	`´štf
("only because channel is‚ot IDLE give up„estorehisime.\n");

2861 
	}
}

2871 
Stus
 
	$£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

2872 *
chªge_cu¼’t_time_æag
) {

2873 
j
 = 0, 
ch
 = 0;

2874 
k
 = 0;

2875 
Şd_µn
 = 0, 
Ãw_µn
 = 0;

2876 
ch_tok’
 = 0, 
d›_tok’
 = 0, 
¶ªe_tok’
 = 0, 
add»ss_µn
 = 0;

2877 
d›
 = 0, 
¶ªe
 = 0;

2878 
time
 = 0;

2879 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

2880 
sub_»que¡
 *
sub_twİÏÃ_Úe
 = 
NULL
, *
sub_twİÏÃ_two
 = NULL;

2881 
sub_»que¡
 *
sub_š‹¾—ve_Úe
 = 
NULL
, *
sub_š‹¾—ve_two
 = NULL;

2887 #ifdeà
DEBUG


2888 
	`´štf
("’‹¸£rviûs_2_wr™e, chªÃÈi %d, chªÃl_busy_æag i %d, chªge_cu¼’t_time_æag i %d\n",
chªÃl
, 
chªÃl_busy_æag
, 
chªge_cu¼’t_time_æag
);

2890 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 !ğ
NULL
) || (ssd->subs_w_head != NULL)) {

2891 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 0)

2893 
j
 = 0; j < 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch
; j++) {

2894 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) && (ssd->subs_w_head == NULL)) {

2898 
ch_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
;

2899 #ifdeà
DEBUG


2900 
	`´štf
("chªÃÈ%d' chok’ i %d\n", 
chªÃl
, 
ch_tok’
);

2904 ià(*
chªÃl_busy_æag
 == 0) {

2905 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
cu¼’t_¡©e
 =ğ
CHIP_IDLE
) ||

2906 ((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
Ãxt_¡©e
 =ğ
CHIP_IDLE
) &&

2907 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
Ãxt_¡©e_´ediù_time
 <=

2908 
ssd
->
cu¼’t_time
))) {

2909 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) && (ssd->subs_w_head == NULL)) {

2912 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
;

2913 #ifdeà
DEBUG


2914 
	`´štf
("chªÃÈ%d' chok’ i %d,d›ok’ i %d\n", 
chªÃl
, 
ch_tok’
, 
d›_tok’
);

2918 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

2919 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) !=

2920 
AD_TWOPLANE
))

2922 #ifdeà
DEBUG


2923 
	`´štf
("if you have‚ot set‡dvanced command,then only do‚ormal„ead‡nd write\n");

2926 
sub
 = 
	`fšd_wr™e_sub_»que¡
(
ssd
, 
chªÃl
);

2927 ià(
sub
 =ğ
NULL
) {

2931 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

2932 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
;

2934 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch_tok’
, 
d›_tok’
, 
¶ªe_tok’
, 
sub
);

2936 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
 =

2937 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
d›_h—d
[
d›_tok’
].
tok’
 +

2938 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

2940 *
chªge_cu¼’t_time_æag
 = 0;

2942 ià(
ssd
->
·¿m‘”
->
ad_´iÜ™y2
 == 0) {

2943 
ssd
->
»®_time_sub»q
--;

2945 
	`go_Úe_¡•
(
ssd
, 
sub
, 
NULL
, 
SR_W_TRANSFER
, 
NORMAL
);

2946 
	`d–‘e_w_sub_»que¡
(
ssd
, 
chªÃl
, 
sub
);

2948 *
chªÃl_busy_æag
 = 1;

2954 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2955 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1) %

2956 
ssd
->
·¿m‘”
->
d›_ch
;

2957 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2958 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

2963 ià(
	`dyÇmic_advªûd_´oûss
(
ssd
, 
chªÃl
, 
ch_tok’
è=ğ
NULL
) {

2964 *
chªÃl_busy_æag
 = 0;

2965 #ifdeà
DEBUG


2966 
	`´štf
("chªÃÈ%d' chok’ i %d,h”i nÙ su™ o³¿tiÚ iÀthi chªÃl\n", 
chªÃl
, 
ch_tok’
);

2970 #ifdeà
DEBUG


2971 
	`´štf
("chªÃÈ%d' chok’ i %d, h”g‘‡ dyÇmic_advªû_´oûss\n", 
chªÃl
, 
ch_tok’
);

2974 *
chªÃl_busy_æag
 = 1;

2975 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2976 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1) %

2977 
ssd
->
·¿m‘”
->
d›_ch
;

2978 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2979 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

2980 #ifdeà
DEBUG


2981 
	`´štf
("chªÃl---tok’ upd©(Úly movah—dèchªÃÈ%d' chok’ i %d\n", 
chªÃl
, 
ssd
->
chªÃl_h—d
[chªÃl].
tok’
);

2988 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 =

2989 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch_tok’
].
tok’
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

2990 #ifdeà
DEBUG


2991 
	`´štf
("d›---tok’ upd©(Úly movh—d),h’‚ewok’ i chªÃÈ%d' chok’ i %d, d›_tok’ i %d\n", 
chªÃl
, 
ch_tok’
, 
ssd
->
chªÃl_h—d
[chªÃl].
ch_h—d
[ch_tok’].
tok’
);

2997 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 =

2998 (
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[channel];

3000 } ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 1)

3002 #ifdeà
DEBUG


3003 
	`´štf
("static‡llocation.....now.\n");

3006 
ch
 = 0; ch < 
ssd
->
chªÃl_h—d
[
chªÃl
].chip; chip++) {

3007 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 =ğ
CHIP_IDLE
) ||

3008 ((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 =ğ
CHIP_IDLE
) &&

3009 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
))) {

3010 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) {

3013 ià(*
chªÃl_busy_æag
 == 0) {

3015 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

3016 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) != AD_TWOPLANE))

3018 #ifdeà
DEBUG


3019 
	`´štf
("services_2_writeatic operation. Here should be…rinted for write\n");

3022 
d›
 = 0; d› < 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_num
; die++) {

3023 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
) {

3026 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

3027 
sub
 !ğ
NULL
) {

3028 ià((
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
è&& (sub->
loÿtiÚ
->
chªÃl
 == channel) &&

3029 (
sub
->
loÿtiÚ
->
ch
 == chip) &&

3030 (
sub
->
loÿtiÚ
->
d›
 == die))

3034 
sub
 = sub->
Ãxt_node
;

3036 ià(
sub
 =ğ
NULL
) {

3040 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

3041 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

3042 
sub
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

3043 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

3045 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_COPYBACK
) == AD_COPYBACK) {

3046 
	`cİy_back
(
ssd
, 
chªÃl
, 
ch
, 
d›
,

3047 
sub
);

3048 *
chªge_cu¼’t_time_æag
 = 0;

3050 
	`¡©ic_wr™e
(
ssd
, 
chªÃl
, 
ch
, 
d›
,

3051 
sub
);

3052 *
chªge_cu¼’t_time_æag
 = 0;

3055 
	`d–‘e_w_sub_»que¡
(
ssd
, 
chªÃl
, 
sub
);

3056 *
chªÃl_busy_æag
 = 1;

3062 ià(
	`dyÇmic_advªûd_´oûss
(
ssd
, 
chªÃl
, 
ch
è=ğ
NULL
) {

3063 *
chªÃl_busy_æag
 = 0;

3065 *
chªÃl_busy_æag
 = 1;

3075  
SUCCESS
;

3076 
	}
}

3083 
ssd_šfo
 *
	$´oûss
(
ssd_šfo
 *
ssd
) {

3092 
Şd_µn
 = -1, 
æag_d›
 = -1;

3093 
i
, 
chª
, 
¿ndom_num
;

3094 
æag
 = 0, 
Ãw_wr™e
 = 0, 
chg_cur_time_æag
 = 1, 
æag2
 = 0, 
æag_gc
 = 0;

3095 
št64_t
 
time
, 
chªÃl_time
 = 
MAX_INT64
;

3096 
sub_»que¡
 *
sub
;

3098 
wh‘h”_begš_run_gc
 = 0;

3099 
wh‘h”_¡İ_wr™e
 =0;

3103 if(
ssd
->
debug_sign
 == 1){

3114 #ifdeà
DEBUG_CURR_TIME


3115 
	`´štf
("’‹¸´oûss, cu¼’ˆtime:%Îd\n",
ssd
->
cu¼’t_time
);

3122 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

3123 ià((
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
 =ğ
NULL
è&& (ssd->chªÃl_h—d[i].
subs_w_h—d
 == NULL) &&

3124 (
ssd
->
subs_w_h—d
 =ğ
NULL
)) {

3128 
æag
 = 0;

3132 #ifdeà
DEBUG


3133 
	`´štf
("æag i %d, *** 1 ha nØsubs,‚ow cª dØbackground GC,,0 ha subs\n",
æag
);

3135 ià(
æag
 == 1) {

3136 
ssd
->
æag
 = 1;

3137 ià(
ssd
->
gc_»que¡
 > 0)

3139 
	`gc
(
ssd
, 0, 1);

3141  
ssd
;

3143 
ssd
->
æag
 = 0;

3146 
time
 = 
ssd
->
cu¼’t_time
;

3147 #ifdeà
DEBUG


3148 
	`´štf
("begin go into services_2_r_cmd_trans_and_complete\n");

3149 
	`´štfsub_»que¡_¡©us
(
ssd
);

3150 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3153 
	`£rviûs_2_r_cmd_Œªs_ªd_com¶‘e
(

3154 
ssd
);

3155 #ifdeà
DEBUG


3156 
	`´štf
("finish services_2_r_cmd_trans_and_complete\n");

3157 
	`´štfsub_»que¡_¡©us
(
ssd
);

3159 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3163 #ifdeà
DEBUG


3164 
	`´štf
("begin go into services_2_write_busy_in_chip\n");

3165 
	`´štfsub_»que¡_¡©us
(
ssd
);

3166 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3169 
	`£rviûs_2_wr™e_busy_š_ch
(
ssd
);

3171 #ifdeà
DEBUG


3172 
	`´štf
("finish services_2_write_busy_in_chip\n");

3173 
	`´štfsub_»que¡_¡©us
(
ssd
);

3175 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3180 #ifdeà
DEBUG


3181 
	`´štf
("begin go into services_2_gc_busy_in_chip\n");

3182 
	`´štfsub_»que¡_¡©us
(
ssd
);

3183 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3187 
	`£rviûs_2_gc_busy_š_ch
(
ssd
);

3190 #ifdeà
DEBUG


3191 
	`´štf
("finish services_2_gc_busy_in_chip\n");

3192 
	`´štfsub_»que¡_¡©us
(
ssd
);

3194 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3199 
¿ndom_num
 =

3200 
ssd
->
´og¿m_couÁ
 % ssd->
·¿m‘”
->
chªÃl_numb”
;

3206 
chª
 = 0; chª < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; chan++) {

3207 
i
 = (
¿ndom_num
 + 
chª
è% 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

3208 
æag
 = 0;

3209 
æag_gc
 = 0;

3210 #ifdeà
DEBUG


3211 
	`´štf
("’‹¸th´oûs fÜ chªÃÈ%d cœcuÏtiÚ\n", 
i
);

3213 ià((
ssd
->
chªÃl_h—d
[
i
].
cu¼’t_¡©e
 =ğ
CHANNEL_IDLE
è|| (ssd->chªÃl_h—d[i].
Ãxt_¡©e
 == CHANNEL_IDLE &&

3214 
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e_´ediù_time
 <=

3215 
ssd
->
cu¼’t_time
)) {

3216 #ifdeà
DEBUG


3217 
	`´štf
("Úly d—Èthv®u0!! h”i thv®ue: ssd->chªÃl_h—d[%d].cu¼’t_¡©i %d,Ü ssd->chªÃl_h—d[%d].Ãxt_¡©i %d‡nd‚ext_¡©e_´ediù_time<ssd->cu¼’t_tim\n",
i
,
ssd
->
chªÃl_h—d
[i].
cu¼’t_¡©e
, i, ssd->chªÃl_h—d[i].
Ãxt_¡©e
);

3237 
sub
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

3240 iàĞ(
ssd
->
gc_»que¡
 > 0è&& (ssd->
chªÃl_h—d
[
i
].
gc_commªd
 != 0) ){

3241 
wh‘h”_begš_run_gc
 = 1;}

3243 
wh‘h”_begš_run_gc
 = 
	`judgšg_»ad_š_gc_ch
(
ssd
, 
i
);

3245 #ifdeà
DEBUG


3246 
	`´štf
("begš gØštØ£rviûs_2_r_wa™, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3247 
	`´štfsub_»que¡_¡©us
(
ssd
);

3248 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3250 
	`£rviûs_2_r_wa™
(
ssd
, 
i
, &
æag
, &
chg_cur_time_æag
);

3251 #ifdeà
DEBUG


3252 
	`´štf
("fšish s”viûs_2_r_wa™, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3253 
	`´štfsub_»que¡_¡©us
(
ssd
);

3254 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3260 ià((
æag
 =ğ0è&& (
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
 !=

3261 
NULL
))

3263 #ifdeà
DEBUG


3264 
	`´štf
("begš gØštØ£rviûs_2_r_d©e_Œªs, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3265 
	`´štfsub_»que¡_¡©us
(
ssd
);

3266 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3269 
	`£rviûs_2_r_d©a_Œªs
(
ssd
, 
i
, &
æag
, &
chg_cur_time_æag
);

3270 #ifdeà
DEBUG


3271 
	`´štf
("fšish s”viûs_2_r_d©a_Œªs, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3272 
	`´štfsub_»que¡_¡©us
(
ssd
);

3273 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3285 if(
wh‘h”_begš_run_gc
 == 1 ){

3286 #ifdeà
DEBUG


3287 
	`´štf
("now ha GC, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3288 
	`´štfsub_»que¡_¡©us
(
ssd
);

3289 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3294 
	`gc
(
ssd
, 
i
, 0);

3295 #ifdeà
DEBUG


3296 
	`´štf
("fšish GC, fÏg i %d, fÏg_gøi %d\n",
æag
,
æag_gc
);

3297 
	`´štfsub_»que¡_¡©us
(
ssd
);

3298 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3307 iàĞ(
ssd
->
gc_»que¡
 > 0è&& (ssd->
chªÃl_h—d
[
i
].
gc_commªd
 != 0) ){

3309 
wh‘h”_¡İ_wr™e
 = 1;

3312 
wh‘h”_¡İ_wr™e
 = 0;

3314 #ifdeà
DEBUG


3315 
	`´štf
("wh‘h”_begš_run_gøi %d, wh‘h”_¡İ_wr™i %d\n",
wh‘h”_begš_run_gc
, 
wh‘h”_¡İ_wr™e
 );

3321 if(
wh‘h”_¡İ_wr™e
 == 0 ){

3323 iàĞ(
æag
 =ğ0è&& (
ssd
->
chªÃl_h—d
[
i
].
gc_commªd
 =ğ
NULL
) )

3325 #ifdeà
DEBUG


3326 
	`´štf
("begš gØštØ£rviûs_2_wr™e, fÏg=0,æag_gøi %d\n",
æag_gc
);

3327 
	`´štfsub_»que¡_¡©us
(
ssd
);

3328 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3336 #ifdeà
DEBUG


3337 
	`´štf
("befÜgØštØ£rviûs_2_wr™e,chªÃÈi %d\n",
i
);

3339 
	`Ãw_£rviûs_2_wr™e
(
ssd
, 
i
, &
æag
, &
chg_cur_time_æag
);

3341 #ifdeà
DEBUG


3342 
	`´štf
("fšish s”viûs_2_wr™e, fÏg i %d, fÏg_gøi %d\n",
æag
, 
æag_gc
);

3343 
	`´štfsub_»que¡_¡©us
(
ssd
);

3344 
	`´štf_ev”y_ch_»ad_sub»que¡
(
ssd
);

3352  
ssd
;

3353 
	}
}

3359 
ssd_šfo
 *
	$dyÇmic_advªûd_´oûss
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
) {

3360 
d›
 = 0, 
¶ªe
 = 0;

3361 
subs_couÁ
 = 0;

3362 
æag
;

3363 
g©e
;

3364 
¶ªe_¶aû
;

3365 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL, *
sub0
 = NULL, *
sub1
 = NULL, *
sub2
 = NULL, *
sub3
 = NULL, *
sub0_rw
 = NULL, *
sub1_rw
 = NULL, *
sub2_rw
 = NULL, *
sub3_rw
 = NULL;

3366 
sub_»que¡
 **
subs
 = 
NULL
;

3367 
max_sub_num
 = 0;

3368 
d›_tok’
 = 0, 
¶ªe_tok’
 = 0;

3369 *
¶ªe_b™s
 = 
NULL
;

3370 
š‹¾—v”_couÁ
 = 0;

3372 
mask
 = 0x00000001;

3373 
i
 = 0, 
j
 = 0;

3374 #ifdeà
DEBUG


3375 
	`´štf
("enter dynamic_advanced_process\n");

3378 
max_sub_num
 = (
ssd
->
·¿m‘”
->
d›_ch
è* (ssd->·¿m‘”->
¶ªe_d›
);

3379 
g©e
 = 
max_sub_num
;

3380 
subs
 = (
sub_»que¡
 **è
	`m®loc
(
max_sub_num
 * (sub_request *));

3381 
	`®loc_as£¹
(
subs
, "sub_request");

3383 
i
 = 0; i < 
max_sub_num
; i++) {

3384 
subs
[
i
] = 
NULL
;

3387 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ0è&& (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 == 0) &&

3388 (
ssd
->
·¿m‘”
->
ad_´iÜ™y2
 == 0)) {

3389 
g©e
 = 
ssd
->
»®_time_sub»q
 / ssd->
·¿m‘”
->
chªÃl_numb”
;

3391 ià(
g©e
 == 0) {

3392 
g©e
 = 1;

3394 ià(
ssd
->
»®_time_sub»q
 % ssd->
·¿m‘”
->
chªÃl_numb”
 != 0) {

3395 
g©e
++;

3400 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 ==

3403 ià(
ssd
->
·¿m‘”
->
dyÇmic_®loÿtiÚ
 == 0) {

3404 
sub
 = 
ssd
->
subs_w_h—d
;

3406 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

3409 
subs_couÁ
 = 0;

3411 (
sub
 !ğ
NULL
è&& (
subs_couÁ
 < 
max_sub_num
è&& (subs_couÁ < 
g©e
)) {

3412 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

3413 ià((
sub
->
upd©e
 =ğ
NULL
è|| ((sub->upd©!ğNULLè&& ((sub->upd©e->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
) ||

3414 ((
sub
->
upd©e
->
Ãxt_¡©e
 =ğ
SR_COMPLETE
) &&

3415 (
sub
->
upd©e
->
Ãxt_¡©e_´ediù_time
 <=

3416 
ssd
->
cu¼’t_time
)))))

3418 
subs
[
subs_couÁ
] = 
sub
;

3419 
subs_couÁ
++;

3423 
p
 = 
sub
;

3424 
sub
 = sub->
Ãxt_node
;

3427 ià(
subs_couÁ
 == 0)

3429 
i
 = 0; i < 
max_sub_num
; i++) {

3430 
subs
[
i
] = 
NULL
;

3432 
	`ä“
(
subs
);

3434 
subs
 = 
NULL
;

3435 
	`ä“
(
¶ªe_b™s
);

3436  
NULL
;

3438 ià(
subs_couÁ
 >= 2) {

3443 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE) &&

3444 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE)) {

3445 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
INTERLEAVE_TWO_PLANE
);

3446 } ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE) &&

3447 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE)) {

3448 ià(
subs_couÁ
 > 
ssd
->
·¿m‘”
->
¶ªe_d›
) {

3449 
i
 = 
ssd
->
·¿m‘”
->
¶ªe_d›
; i < 
subs_couÁ
; i++) {

3450 
subs
[
i
] = 
NULL
;

3452 
subs_couÁ
 = 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3454 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
TWO_PLANE
);

3455 } ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) != AD_TWOPLANE) &&

3456 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE)) {

3458 ià(
subs_couÁ
 > 
ssd
->
·¿m‘”
->
d›_ch
) {

3459 
i
 = 
ssd
->
·¿m‘”
->
d›_ch
; i < 
subs_couÁ
; i++) {

3460 
subs
[
i
] = 
NULL
;

3462 
subs_couÁ
 = 
ssd
->
·¿m‘”
->
d›_ch
;

3464 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
INTERLEAVE
);

3466 
i
 = 1; i < 
subs_couÁ
; i++) {

3467 
subs
[
i
] = 
NULL
;

3469 
subs_couÁ
 = 1;

3470 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
subs
[0]);

3474 ià(
subs_couÁ
 == 1)

3476 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
subs
[0]);

3484 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

3485 
¶ªe_b™s
 = (*è
	`m®loc
((
ssd
->
·¿m‘”
->
d›_ch
) * ());

3486 
	`®loc_as£¹
(
¶ªe_b™s
, "plane_bits");

3487 
	`mem£t
(
¶ªe_b™s
, 0, (
ssd
->
·¿m‘”
->
d›_ch
) * ());

3489 
i
 = 0; i < 
ssd
->
·¿m‘”
->
d›_ch
; i++) {

3490 
¶ªe_b™s
[
i
] = 0x00000000;

3492 
subs_couÁ
 = 0;

3494 (
sub
 !ğ
NULL
è&& (
subs_couÁ
 < 
max_sub_num
)) {

3495 ià(
sub
->
cu¼’t_¡©e
 =ğ
SR_WAIT
) {

3496 ià((
sub
->
upd©e
 =ğ
NULL
è|| ((sub->upd©!ğNULLè&& ((sub->upd©e->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
) ||

3497 ((
sub
->
upd©e
->
Ãxt_¡©e
 =ğ
SR_COMPLETE
) &&

3498 (
sub
->
upd©e
->
Ãxt_¡©e_´ediù_time
 <=

3499 
ssd
->
cu¼’t_time
))))) {

3500 ià(
sub
->
loÿtiÚ
->
ch
 == chip) {

3501 
¶ªe_¶aû
 = 0x00000001 << (
sub
->
loÿtiÚ
->
¶ªe
);

3503 ià((
¶ªe_b™s
[
sub
->
loÿtiÚ
->
d›
] & 
¶ªe_¶aû
) !=

3504 
¶ªe_¶aû
)

3506 
subs
[
sub
->
loÿtiÚ
->
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + sub->loÿtiÚ->
¶ªe
] = sub;

3507 
subs_couÁ
++;

3508 
¶ªe_b™s
[
sub
->
loÿtiÚ
->
d›
] = (¶ªe_b™s[sub->loÿtiÚ->d›] | 
¶ªe_¶aû
);

3513 
sub
 = sub->
Ãxt_node
;

3516 ià(
subs_couÁ
 == 0)

3518 
i
 = 0; i < 
max_sub_num
; i++) {

3519 
subs
[
i
] = 
NULL
;

3521 
	`ä“
(
subs
);

3522 
subs
 = 
NULL
;

3523 
	`ä“
(
¶ªe_b™s
);

3524  
NULL
;

3527 
æag
 = 0;

3528 ià(
ssd
->
·¿m‘”
->
advªûd_commªds
 != 0) {

3529 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_COPYBACK
) == AD_COPYBACK)

3531 ià(
subs_couÁ
 > 1)

3533 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
COPY_BACK
);

3535 
i
 = 0; i < 
max_sub_num
; i++) {

3536 ià(
subs
[
i
] !ğ
NULL
) {

3540 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
subs
[
i
]);

3546 ià(
subs_couÁ
 > 1)

3548 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE) &&

3549 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE)) {

3550 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
INTERLEAVE_TWO_PLANE
);

3551 } ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE) &&

3552 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) != AD_TWOPLANE)) {

3553 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

3554 ià(
¶ªe_b™s
[
d›
] != 0x00000000) {

3555 
i
 = 0; i < 
ssd
->
·¿m‘”
->
¶ªe_d›
; i++) {

3556 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3557 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

3558 (
¶ªe_tok’
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3559 
mask
 = 0x00000001 << 
¶ªe_tok’
;

3560 ià((
¶ªe_b™s
[
d›
] & 
mask
) == mask) {

3561 
¶ªe_b™s
[
d›
] = 
mask
;

3565 
i
 = i + 1; i < 
ssd
->
·¿m‘”
->
¶ªe_d›
; i++) {

3566 
¶ªe
 = (
¶ªe_tok’
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3567 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3568 
subs_couÁ
--;

3570 
š‹¾—v”_couÁ
++;

3573 ià(
š‹¾—v”_couÁ
 >= 2) {

3574 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
INTERLEAVE
);

3576 
i
 = 0; i < 
max_sub_num
; i++) {

3577 ià(
subs
[
i
] !ğ
NULL
) {

3581 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
subs
[
i
]);

3584 ià(((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) != AD_INTERLEAVE) &&

3585 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE)) {

3586 
i
 = 0; i < 
ssd
->
·¿m‘”
->
d›_ch
; i++) {

3587 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3588 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 =

3589 (
d›_tok’
 + 1è% 
ssd
->
·¿m‘”
->
d›_ch
;

3590 ià(
	`size
(
¶ªe_b™s
[
d›_tok’
]) > 1) {

3596 ià(
i
 < 
ssd
->
·¿m‘”
->
d›_ch
) {

3597 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

3598 ià(
d›
 !ğ
d›_tok’
) {

3599 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

3600 ià(
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] !ğ
NULL
) {

3601 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3602 
subs_couÁ
--;

3607 
	`g‘_µn_fÜ_advªûd_commªds
(
ssd
, 
chªÃl
, 
ch
, 
subs
, 
subs_couÁ
, 
TWO_PLANE
);

3610 
i
 = 0; i < 
ssd
->
·¿m‘”
->
d›_ch
; i++) {

3611 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3612 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 =

3613 (
d›_tok’
 + 1è% 
ssd
->
·¿m‘”
->
d›_ch
;

3614 ià(
¶ªe_b™s
[
d›_tok’
] != 0x00000000) {

3615 
j
 = 0; j < 
ssd
->
·¿m‘”
->
¶ªe_d›
; j++) {

3616 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›_tok’
].
tok’
;

3617 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›_tok’
].
tok’
 =

3618 (
¶ªe_tok’
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3619 ià(((
¶ªe_b™s
[
d›_tok’
]è& (0x00000001 << 
¶ªe_tok’
)) != 0x00000000) {

3620 
sub
 = 
subs
[
d›_tok’
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe_tok’
];

3626 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
sub
);

3631 
i
 = 0; i < 
ssd
->
·¿m‘”
->
d›_ch
; i++) {

3632 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3633 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›_tok’
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3634 ià(
¶ªe_b™s
[
d›_tok’
] != 0x00000000) {

3635 
j
 = 0; j < 
ssd
->
·¿m‘”
->
¶ªe_d›
; j++) {

3636 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›_tok’
].
tok’
;

3637 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›_tok’
].
tok’
 =

3638 (
¶ªe_tok’
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3639 ià(((
¶ªe_b™s
[
d›_tok’
]è& (0x00000001 << 
¶ªe_tok’
)) != 0x00000000) {

3640 
sub
 = 
subs
[
d›_tok’
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe_tok’
];

3644 ià(
sub
 !ğ
NULL
) {

3649 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
sub
);

3654 
i
 = 0; i < 
ssd
->
·¿m‘”
->
d›_ch
; i++) {

3655 
d›_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3656 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›_tok’
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3657 ià(
¶ªe_b™s
[
d›_tok’
] != 0x00000000) {

3658 
j
 = 0; j < 
ssd
->
·¿m‘”
->
¶ªe_d›
; j++) {

3659 
¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›_tok’
].
tok’
;

3660 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

3661 (
¶ªe_tok’
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3662 ià(((
¶ªe_b™s
[
d›_tok’
]è& (0x00000001 << 
¶ªe_tok’
)) != 0x00000000) {

3663 
sub
 = 
subs
[
d›_tok’
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe_tok’
];

3667 ià(
sub
 !ğ
NULL
) {

3672 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
sub
);

3677 
i
 = 0; i < 
max_sub_num
; i++) {

3678 
subs
[
i
] = 
NULL
;

3680 
	`ä“
(
subs
);

3681 
subs
 = 
NULL
;

3682 
	`ä“
(
¶ªe_b™s
);

3683  
ssd
;

3684 
	}
}

3689 
Stus


3690 
	$g‘_µn_fÜ_nÜm®_commªd
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 *
sub
) {

3691 
d›
 = 0;

3692 
¶ªe
 = 0;

3693 #ifdeà
DEBUG


3694 
	`´štf
("enter into get_ppn_for_normal_command\n");

3697 ià(
sub
 =ğ
NULL
) {

3698  
ERROR
;

3701 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ
DYNAMIC_ALLOCATION
) {

3702 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3703 
¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3704 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
sub
);

3705 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = (
¶ªe
 + 1è% ssd->
·¿m‘”
->
¶ªe_d›
;

3706 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3708 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 
d›
, &
sub
, 1, 
NORMAL
);

3709  
SUCCESS
;

3711 
d›
 = 
sub
->
loÿtiÚ
->die;

3712 
¶ªe
 = 
sub
->
loÿtiÚ
->plane;

3713 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
sub
);

3714 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 
d›
, &
sub
, 1, 
NORMAL
);

3715  
SUCCESS
;

3718 
	}
}

3729 
Stus


3730 
	$g‘_µn_fÜ_advªûd_commªds
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 **
subs
,

3731 
subs_couÁ
, 
commªd
) {

3732 
d›
 = 0, 
¶ªe
 = 0;

3733 
d›_tok’
 = 0, 
¶ªe_tok’
 = 0;

3734 
sub_»que¡
 *
sub
 = 
NULL
;

3735 
i
 = 0, 
j
 = 0, 
k
 = 0;

3736 
unv®id_subs_couÁ
 = 0;

3737 
v®id_subs_couÁ
 = 0;

3738 
š‹¾—ve_æag
 = 
FALSE
;

3739 
muÉi_¶ªe_çlg
 = 
FALSE
;

3740 
max_subs_num
 = 0;

3741 
sub_»que¡
 *
fœ¡_sub_š_ch
 = 
NULL
;

3742 
sub_»que¡
 *
fœ¡_sub_š_d›
 = 
NULL
;

3743 
sub_»que¡
 *
£cÚd_sub_š_d›
 = 
NULL
;

3744 
¡©e
 = 
SUCCESS
;

3745 
muÉi_¶ªe_æag
 = 
FALSE
;

3747 
max_subs_num
 = 
ssd
->
·¿m‘”
->
d›_ch
 * ssd->·¿m‘”->
¶ªe_d›
;

3749 #ifdeà
DEBUG


3750 
	`´štf
("enter get_ppn_for_advanced_commands\n");

3753 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ
DYNAMIC_ALLOCATION
)

3755 ià((
commªd
 =ğ
INTERLEAVE_TWO_PLANE
) ||

3756 (
commªd
 =ğ
COPY_BACK
))

3758 
i
 = 0; i < 
subs_couÁ
; i++) {

3759 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3760 ià(
i
 <

3761 
ssd
->
·¿m‘”
->
d›_ch
)

3763 
¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3764 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
subs
[
i
]);

3765 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

3766 (
¶ªe
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3773 
¡©e
 = 
	`make_Ëv–_·ge
(
ssd
, 
subs
[
i
 % ssd->
·¿m‘”
->
d›_ch
], subs[i]);

3774 ià(
¡©e
 !ğ
SUCCESS
) {

3775 
subs
[
i
] = 
NULL
;

3776 
unv®id_subs_couÁ
++;

3778 
muÉi_¶ªe_æag
 = 
TRUE
;

3781 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3783 
v®id_subs_couÁ
 = 
subs_couÁ
 - 
unv®id_subs_couÁ
;

3784 
ssd
->
š‹¾—ve_couÁ
++;

3785 ià(
muÉi_¶ªe_æag
 =ğ
TRUE
) {

3786 
ssd
->
š‹r_m¶ªe_couÁ
++;

3787 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
,

3788 
INTERLEAVE_TWO_PLANE
);

3790 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
, 
INTERLEAVE
);

3792  
SUCCESS
;

3794 ià(
commªd
 =ğ
INTERLEAVE
) {

3799 
i
 = 0; (˜< 
subs_couÁ
è&& (˜< 
ssd
->
·¿m‘”
->
d›_ch
); i++) {

3800 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3801 
¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3802 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
subs
[
i
]);

3803 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

3804 (
¶ªe
 + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

3805 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3806 
v®id_subs_couÁ
++;

3808 
ssd
->
š‹¾—ve_couÁ
++;

3809 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
, 
INTERLEAVE
);

3810  
SUCCESS
;

3812 ià(
commªd
 =ğ
TWO_PLANE
) {

3813 ià(
subs_couÁ
 < 2) {

3814  
ERROR
;

3816 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

3817 
j
 = 0; j < 
subs_couÁ
; j++) {

3818 ià(
j
 == 1) {

3819 
¡©e
 = 
	`fšd_Ëv–_·ge
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
subs
[0],

3820 
subs
[1]);

3821 ià(
¡©e
 !ğ
SUCCESS
) {

3822 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
subs
[0]);

3823  
FAILURE
;

3825 
v®id_subs_couÁ
 = 2;

3827 } ià(
j
 > 1) {

3828 
¡©e
 = 
	`make_Ëv–_·ge
(
ssd
, 
subs
[0],

3829 
subs
[
j
]);

3830 ià(
¡©e
 !ğ
SUCCESS
) {

3831 
k
 = 
j
; k < 
subs_couÁ
; k++) {

3832 
subs
[
k
] = 
NULL
;

3834 
subs_couÁ
 = 
j
;

3837 
v®id_subs_couÁ
++;

3841 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

3842 
ssd
->
m_¶ªe_´og_couÁ
++;

3843 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
subs
, 
v®id_subs_couÁ
, 
TWO_PLANE
);

3844  
SUCCESS
;

3847  
ERROR
;

3852 ià((
commªd
 =ğ
INTERLEAVE_TWO_PLANE
è|| (commªd =ğ
COPY_BACK
)) {

3853 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

3854 
fœ¡_sub_š_d›
 = 
NULL
;

3855 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

3856 
sub
 = 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
];

3857 ià(
sub
 !ğ
NULL
) {

3858 ià(
fœ¡_sub_š_d›
 =ğ
NULL
) {

3859 
fœ¡_sub_š_d›
 = 
sub
;

3860 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
sub
);

3862 
¡©e
 = 
	`make_Ëv–_·ge
(
ssd
, 
fœ¡_sub_š_d›
, 
sub
);

3863 ià(
¡©e
 !ğ
SUCCESS
) {

3864 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3865 
subs_couÁ
--;

3866 
sub
 = 
NULL
;

3868 
muÉi_¶ªe_æag
 = 
TRUE
;

3874 ià(
muÉi_¶ªe_æag
 =ğ
TRUE
) {

3875 
ssd
->
š‹r_m¶ªe_couÁ
++;

3876 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
, 
INTERLEAVE_TWO_PLANE
);

3877  
SUCCESS
;

3879 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
, 
INTERLEAVE
);

3880  
SUCCESS
;

3883 ià(
commªd
 =ğ
INTERLEAVE
) {

3884 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

3885 
fœ¡_sub_š_d›
 = 
NULL
;

3886 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

3887 
sub
 = 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
];

3888 ià(
sub
 !ğ
NULL
) {

3889 ià(
fœ¡_sub_š_d›
 =ğ
NULL
) {

3890 
fœ¡_sub_š_d›
 = 
sub
;

3891 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
sub
);

3892 
v®id_subs_couÁ
++;

3894 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3895 
subs_couÁ
--;

3896 
sub
 = 
NULL
;

3901 ià(
v®id_subs_couÁ
 > 1) {

3902 
ssd
->
š‹¾—ve_couÁ
++;

3904 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 0, 
subs
, 
v®id_subs_couÁ
, 
INTERLEAVE
);

3906 ià(
commªd
 =ğ
TWO_PLANE
) {

3907 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

3908 
fœ¡_sub_š_d›
 = 
NULL
;

3909 
£cÚd_sub_š_d›
 = 
NULL
;

3910 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

3911 
sub
 = 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
];

3912 ià(
sub
 !ğ
NULL
) {

3913 ià(
fœ¡_sub_š_d›
 =ğ
NULL
) {

3914 
fœ¡_sub_š_d›
 = 
sub
;

3915 } ià(
£cÚd_sub_š_d›
 =ğ
NULL
) {

3916 
£cÚd_sub_š_d›
 = 
sub
;

3917 
¡©e
 = 
	`fšd_Ëv–_·ge
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
fœ¡_sub_š_d›
, 
£cÚd_sub_š_d›
);

3918 ià(
¡©e
 !ğ
SUCCESS
) {

3919 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3920 
subs_couÁ
--;

3921 
£cÚd_sub_š_d›
 = 
NULL
;

3922 
sub
 = 
NULL
;

3924 
v®id_subs_couÁ
 = 2;

3927 
¡©e
 = 
	`make_Ëv–_·ge
(
ssd
, 
fœ¡_sub_š_d›
, 
sub
);

3928 ià(
¡©e
 !ğ
SUCCESS
) {

3929 
subs
[
d›
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
 + 
¶ªe
] = 
NULL
;

3930 
subs_couÁ
--;

3931 
sub
 = 
NULL
;

3933 
v®id_subs_couÁ
++;

3938 ià(
£cÚd_sub_š_d›
 !ğ
NULL
) {

3939 
muÉi_¶ªe_æag
 = 
TRUE
;

3943 ià(
muÉi_¶ªe_æag
 =ğ
TRUE
) {

3944 
ssd
->
m_¶ªe_´og_couÁ
++;

3945 
	`compu‹_£rve_time
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
subs
, 
v®id_subs_couÁ
, 
TWO_PLANE
);

3946  
SUCCESS
;

3949 
i
 = 0;

3950 
sub
 = 
NULL
;

3951 (
sub
 =ğ
NULL
è&& (
i
 < 
max_subs_num
)) {

3952 
sub
 = 
subs
[
i
];

3953 
i
++;

3955 ià(
sub
 !ğ
NULL
) {

3956 
	`g‘_µn_fÜ_nÜm®_commªd
(
ssd
, 
chªÃl
, 
ch
, 
sub
);

3957  
FAILURE
;

3959  
ERROR
;

3964  
ERROR
;

3967 
	}
}

3973 
Stus
 
	$make_Ëv–_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub0
, sub_»que¡ *
sub1
) {

3974 
i
 = 0, 
j
 = 0, 
k
 = 0;

3975 
chªÃl
 = 0, 
ch
 = 0, 
d›
 = 0, 
¶ªe0
 = 0, 
¶ªe1
 = 0, 
block0
 = 0, 
block1
 = 0, 
·ge0
 = 0, 
·ge1
 = 0;

3976 
aùive_block0
 = 0, 
aùive_block1
 = 0;

3977 
Şd_¶ªe_tok’
 = 0;

3979 ià((
sub0
 =ğ
NULL
è|| (
sub1
 =ğNULLè|| (sub0->
loÿtiÚ
 == NULL)) {

3980  
ERROR
;

3982 
chªÃl
 = 
sub0
->
loÿtiÚ
->channel;

3983 
ch
 = 
sub0
->
loÿtiÚ
->chip;

3984 
d›
 = 
sub0
->
loÿtiÚ
->die;

3985 
¶ªe0
 = 
sub0
->
loÿtiÚ
->
¶ªe
;

3986 
block0
 = 
sub0
->
loÿtiÚ
->
block
;

3987 
·ge0
 = 
sub0
->
loÿtiÚ
->
·ge
;

3988 
Şd_¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3995 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ
DYNAMIC_ALLOCATION
) {

3996 
Şd_¶ªe_tok’
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3997 
i
 = 0; i < 
ssd
->
·¿m‘”
->
¶ªe_d›
; i++) {

3998 
¶ªe1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

3999 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
add_»g_µn
 == -1) {

4000 
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
);

4001 
block1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
aùive_block
;

4008 ià(
block1
 =ğ
block0
) {

4009 
·ge1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
blk_h—d
[
block1
].
Ï¡_wr™e_·ge
 +

4011 ià(
·ge1
 =ğ
·ge0
) {

4013 } ià(
·ge1
 < 
·ge0
) {

4014 ià(
ssd
->
·¿m‘”
->
g»ed_MPW_ad
 == 1)

4017 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
, 
block1
, 
·ge0
);

4023 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = (
¶ªe1
 + 1è% ssd->
·¿m‘”
->
¶ªe_d›
;

4025 ià(
i
 < 
ssd
->
·¿m‘”
->
¶ªe_d›
) {

4026 
	`æash_·ge_¡©e_modify
(
ssd
, 
sub1
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
, 
block1
,

4027 
·ge0
);

4029 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = (
¶ªe1
 + 1è% ssd->
·¿m‘”
->
¶ªe_d›
;

4030  
SUCCESS
;

4032 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe_tok’
;

4033  
FAILURE
;

4037 ià((
sub1
->
loÿtiÚ
 =ğ
NULL
è|| (sub1->loÿtiÚ->
chªÃl
 !ğchªÃlè|| (sub1->loÿtiÚ->
ch
 != chip) ||

4038 (
sub1
->
loÿtiÚ
->
d›
 != die)) {

4039  
ERROR
;

4041 
¶ªe1
 = 
sub1
->
loÿtiÚ
->
¶ªe
;

4042 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
add_»g_µn
 == -1) {

4043 
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
);

4044 
block1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
aùive_block
;

4045 ià(
block1
 =ğ
block0
) {

4046 
·ge1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe1
].
blk_h—d
[
block1
].
Ï¡_wr™e_·ge
 +

4048 ià(
·ge1
 > 
·ge0
) {

4049  
FAILURE
;

4050 } ià(
·ge1
 < 
·ge0
) {

4051 ià(
ssd
->
·¿m‘”
->
g»ed_MPW_ad
 == 1) {

4053 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
, 
block1
, 
·ge0
);

4054 
	`æash_·ge_¡©e_modify
(
ssd
, 
sub1
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
, 
block1
, 
·ge0
);

4056  
SUCCESS
;

4058  
FAILURE
;

4061 
	`æash_·ge_¡©e_modify
(
ssd
, 
sub1
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe1
, 
block1
, 
·ge0
);

4063  
SUCCESS
;

4067  
FAILURE
;

4071  
ERROR
;

4075 
	}
}

4082 
Stus
 
	$fšd_Ëv–_·ge
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
,

4083 
sub_»que¡
 *
subA
, sub_»que¡ *
subB
) {

4084 
i
, 
¶ªeA
, 
¶ªeB
, 
aùive_blockA
, 
aùive_blockB
, 
·geA
, 
·geB
, 
aim_·ge
, 
Şd_¶ªe
;

4085 
gc_İ”©iÚ
 *
gc_node
;

4087 
Şd_¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

4094 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 0) {

4095 
¶ªeA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

4096 ià(
¶ªeA
 % 2 == 0) {

4097 
¶ªeB
 = 
¶ªeA
 + 1;

4098 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

4099 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 + 2è% ssd->
·¿m‘”
->
¶ªe_d›
;

4101 
¶ªeA
 = (¶ªeA + 1è% 
ssd
->
·¿m‘”
->
¶ªe_d›
;

4102 
¶ªeB
 = 
¶ªeA
 + 1;

4103 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 =

4104 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 + 3è% ssd->
·¿m‘”
->
¶ªe_d›
;

4108 
¶ªeA
 = 
subA
->
loÿtiÚ
->
¶ªe
;

4109 
¶ªeB
 = 
subB
->
loÿtiÚ
->
¶ªe
;

4111 
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
);

4112 
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
);

4113 
aùive_blockA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
aùive_block
;

4114 
aùive_blockB
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
aùive_block
;

4122 ià(
aùive_blockA
 =ğ
aùive_blockB
) {

4123 
·geA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
aùive_blockA
].
Ï¡_wr™e_·ge
 +

4125 
·geB
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
aùive_blockB
].
Ï¡_wr™e_·ge
 +

4127 ià(
·geA
 =ğ
·geB
)

4129 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockA
, 
·geA
);

4130 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockB
, 
·geB
);

4132 ià(
ssd
->
·¿m‘”
->
g»ed_MPW_ad
 == 1)

4134 ià(
·geA
 < 
·geB
) {

4135 
aim_·ge
 = 
·geB
;

4136 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockA
,

4137 
aim_·ge
);

4139 
aim_·ge
 = 
·geA
;

4140 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockB
, 
aim_·ge
);

4142 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockA
, 
aim_·ge
);

4143 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockB
, 
aim_·ge
);

4146 
subA
 = 
NULL
;

4147 
subB
 = 
NULL
;

4148 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4149  
FAILURE
;

4157 
·geA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
aùive_blockA
].
Ï¡_wr™e_·ge
 +

4159 
·geB
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
aùive_blockB
].
Ï¡_wr™e_·ge
 +

4161 ià(
·geA
 < 
·geB
) {

4162 ià(
ssd
->
·¿m‘”
->
g»ed_MPW_ad
 == 1)

4169 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
aùive_blockB
].
·ge_h—d
[
·geB
].
ä“_¡©e
 ==

4170 
PG_SUB
) {

4171 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockB
, 
·geB
);

4172 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockB
, 
·geB
);

4173 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockB
, 
·geB
);

4180 
i
 = 0; i < 
ssd
->
·¿m‘”
->
block_¶ªe
; i++) {

4181 
·geA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
i
].
Ï¡_wr™e_·ge
 +

4183 
·geB
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
i
].
Ï¡_wr™e_·ge
 +

4185 ià((
·geA
 < 
ssd
->
·¿m‘”
->
·ge_block
è&& (
·geB
 < ssd->parameter->page_block)) {

4186 ià(
·geA
 < 
·geB
) {

4187 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
i
].
·ge_h—d
[
·geB
].
ä“_¡©e
 ==

4188 
PG_SUB
) {

4189 
aim_·ge
 = 
·geB
;

4190 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
i
, 
aim_·ge
);

4194 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
i
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4195 
PG_SUB
) {

4196 
aim_·ge
 = 
·geA
;

4197 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
i
, 
aim_·ge
);

4203 ià(
i
 < 
ssd
->
·¿m‘”
->
block_¶ªe
) {

4204 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
i
, 
aim_·ge
);

4205 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
i
, 
aim_·ge
);

4207 
subA
 = 
NULL
;

4208 
subB
 = 
NULL
;

4209 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4210  
FAILURE
;

4215 
subA
 = 
NULL
;

4216 
subB
 = 
NULL
;

4217 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4218  
FAILURE
;

4222 ià(
ssd
->
·¿m‘”
->
g»ed_MPW_ad
 == 1) {

4223 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
aùive_blockA
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4224 
PG_SUB
) {

4225 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockA
, 
·geA
);

4226 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockA
, 
·geA
);

4227 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockA
, 
·geA
);

4229 
i
 = 0; i < 
ssd
->
·¿m‘”
->
block_¶ªe
; i++) {

4230 
·geA
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
i
].
Ï¡_wr™e_·ge
 +

4232 
·geB
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
i
].
Ï¡_wr™e_·ge
 +

4234 ià((
·geA
 < 
ssd
->
·¿m‘”
->
·ge_block
è&& (
·geB
 < ssd->parameter->page_block)) {

4235 ià(
·geA
 < 
·geB
) {

4236 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
i
].
·ge_h—d
[
·geB
].
ä“_¡©e
 ==

4237 
PG_SUB
) {

4238 
aim_·ge
 = 
·geB
;

4239 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
i
, 
aim_·ge
);

4243 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
i
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4244 
PG_SUB
) {

4245 
aim_·ge
 = 
·geA
;

4246 
	`make_§me_Ëv–
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
i
, 
aim_·ge
);

4252 ià(
i
 < 
ssd
->
·¿m‘”
->
block_¶ªe
) {

4253 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
i
, 
aim_·ge
);

4254 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
i
, 
aim_·ge
);

4256 
subA
 = 
NULL
;

4257 
subB
 = 
NULL
;

4258 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4259  
FAILURE
;

4264 ià((
·geA
 =ğ
·geB
) && (pageA == 0)) {

4270 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
aùive_blockA
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4271 
PG_SUB
)

4273 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
aùive_blockA
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4274 
PG_SUB
)) {

4275 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockA
, 
·geA
);

4276 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockA
, 
·geA
);

4278 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
blk_h—d
[
aùive_blockB
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4279 
PG_SUB
)

4281 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
blk_h—d
[
aùive_blockB
].
·ge_h—d
[
·geA
].
ä“_¡©e
 ==

4282 
PG_SUB
)) {

4283 
	`æash_·ge_¡©e_modify
(
ssd
, 
subA
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeA
, 
aùive_blockB
, 
·geA
);

4284 
	`æash_·ge_¡©e_modify
(
ssd
, 
subB
, 
chªÃl
, 
ch
, 
d›
, 
¶ªeB
, 
aùive_blockB
, 
·geA
);

4286 
subA
 = 
NULL
;

4287 
subB
 = 
NULL
;

4288 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4289  
FAILURE
;

4292 
subA
 = 
NULL
;

4293 
subB
 = 
NULL
;

4294 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = 
Şd_¶ªe
;

4295  
ERROR
;

4301 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeA
].
ä“_·ge
 <

4302 (
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
 * ssd->·¿m‘”->
gc_h¬d_th»shŞd
)) {

4303 
gc_node
 = (
gc_İ”©iÚ
 *è
	`m®loc
((gc_operation));

4304 
	`®loc_as£¹
(
gc_node
, "gc_node");

4305 
	`mem£t
(
gc_node
, 0, (
gc_İ”©iÚ
));

4307 
gc_node
->
Ãxt_node
 = 
NULL
;

4308 
gc_node
->
ch
 = chip;

4309 
gc_node
->
d›
 = die;

4310 
gc_node
->
¶ªe
 = 
¶ªeA
;

4311 
gc_node
->
block
 = 0xffffffff;

4312 
gc_node
->
·ge
 = 0;

4313 
gc_node
->
¡©e
 = 
GC_WAIT
;

4314 
gc_node
->
´iÜ™y
 = 
GC_UNINTERRUPT
;

4315 
gc_node
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

4316 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 = 
gc_node
;

4317 
ssd
->
gc_»que¡
++;

4319 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªeB
].
ä“_·ge
 <

4320 (
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
 * ssd->·¿m‘”->
gc_h¬d_th»shŞd
)) {

4321 
gc_node
 = (
gc_İ”©iÚ
 *è
	`m®loc
((gc_operation));

4322 
	`®loc_as£¹
(
gc_node
, "gc_node");

4323 
	`mem£t
(
gc_node
, 0, (
gc_İ”©iÚ
));

4325 
gc_node
->
Ãxt_node
 = 
NULL
;

4326 
gc_node
->
ch
 = chip;

4327 
gc_node
->
d›
 = die;

4328 
gc_node
->
¶ªe
 = 
¶ªeB
;

4329 
gc_node
->
block
 = 0xffffffff;

4330 
gc_node
->
·ge
 = 0;

4331 
gc_node
->
¡©e
 = 
GC_WAIT
;

4332 
gc_node
->
´iÜ™y
 = 
GC_UNINTERRUPT
;

4333 
gc_node
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

4334 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 = 
gc_node
;

4335 
ssd
->
gc_»que¡
++;

4338  
SUCCESS
;

4339 
	}
}

4344 
ssd_šfo
 *

4345 
	$æash_·ge_¡©e_modify
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub
, 
chªÃl
, 
ch
,

4346 
d›
, 
¶ªe
, 
block
, 
·ge
) {

4347 
µn
, 
fuÎ_·ge
;

4348 
loÿl
 *
loÿtiÚ
;

4349 
dœeù_”a£
 *
Ãw_dœeù_”a£
, *
dœeù_”a£_node
;

4351 
fuÎ_·ge
 = ~(0xfffffffà<< 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

4352 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 = 
·ge
;

4353 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
ä“_·ge_num
--;

4355 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 >

4357 
	`´štf
("error!he†ast write…age†argerhan 64!!\n");

4361 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 ==

4364 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
 = 
	`fšd_µn
(ssd, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
);

4365 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 = sub->state;

4368 
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
;

4369 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
µn
);

4370 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
v®id_¡©e
 = 0;

4371 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
ä“_¡©e
 = 0;

4372 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
 = 0;

4373 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
šv®id_·ge_num
++;

4374 ià(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
šv®id_·ge_num
 ==

4375 
ssd
->
·¿m‘”
->
·ge_block
)

4377 
Ãw_dœeù_”a£
 = (
dœeù_”a£
 *è
	`m®loc
((direct_erase));

4378 
	`®loc_as£¹
(
Ãw_dœeù_”a£
, "new_direct_erase");

4379 
	`mem£t
(
Ãw_dœeù_”a£
, 0, (
dœeù_”a£
));

4381 
Ãw_dœeù_”a£
->
block
 = 
loÿtiÚ
->block;

4382 
Ãw_dœeù_”a£
->
Ãxt_node
 = 
NULL
;

4383 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
;

4384 ià(
dœeù_”a£_node
 =ğ
NULL
) {

4385 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

4387 
Ãw_dœeù_”a£
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
;

4388 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

4391 
	`ä“
(
loÿtiÚ
);

4392 
loÿtiÚ
 = 
NULL
;

4393 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
²
 = 
	`fšd_µn
(ssd, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
);

4394 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 = (ssd->dram->map->map_entry[sub->lpn].state | sub->state);

4397 
sub
->
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub->
Ín
].
²
;

4398 
sub
->
loÿtiÚ
->
chªÃl
 = channel;

4399 
sub
->
loÿtiÚ
->
ch
 = chip;

4400 
sub
->
loÿtiÚ
->
d›
 = die;

4401 
sub
->
loÿtiÚ
->
¶ªe
 =…lane;

4402 
sub
->
loÿtiÚ
->
block
 = block;

4403 
sub
->
loÿtiÚ
->
·ge
 =…age;

4405 
ssd
->
´og¿m_couÁ
++;

4406 
ssd
->
chªÃl_h—d
[
chªÃl
].
´og¿m_couÁ
++;

4407 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
´og¿m_couÁ
++;

4408 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
--;

4409 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
].
Ín
 = 
sub
->lpn;

4410 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
].
v®id_¡©e
 = 
sub
->
¡©e
;

4411 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
].
ä“_¡©e
 = (

4412 (~(
sub
->
¡©e
)è& 
fuÎ_·ge
);

4413 
ssd
->
wr™e_æash_couÁ
++;

4415  
ssd
;

4416 
	}
}

4422 
ssd_šfo
 *

4423 
	$make_§me_Ëv–
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

4424 
block
, 
aim_·ge
) {

4425 
i
 = 0, 
¡•
, 
·ge
;

4426 
dœeù_”a£
 *
Ãw_dœeù_”a£
, *
dœeù_”a£_node
;

4428 
·ge
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 +

4430 
¡•
 = 
aim_·ge
 - 
·ge
;

4431 
i
 < 
¡•
) {

4432 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
 +

4433 
i
].
v®id_¡©e
 = 0;

4434 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
 +

4435 
i
].
ä“_¡©e
 = 0;

4436 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
·ge
 +

4437 
i
].
Ín
 = 0;

4439 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
šv®id_·ge_num
++;

4441 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
ä“_·ge_num
--;

4443 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
--;

4445 
i
++;

4448 
ssd
->
wa¡e_·ge_couÁ
 +ğ
¡•
;

4450 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 =

4451 
aim_·ge
 - 1;

4453 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
šv®id_·ge_num
 ==

4454 
ssd
->
·¿m‘”
->
·ge_block
)

4456 
Ãw_dœeù_”a£
 = (
dœeù_”a£
 *è
	`m®loc
((direct_erase));

4457 
	`®loc_as£¹
(
Ãw_dœeù_”a£
, "new_direct_erase");

4458 
	`mem£t
(
Ãw_dœeù_”a£
, 0, (
dœeù_”a£
));

4460 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

4461 ià(
dœeù_”a£_node
 =ğ
NULL
) {

4462 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

4464 
Ãw_dœeù_”a£
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

4465 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

4469 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 >

4471 
	`´štf
("error!he†ast write…age†argerhan 64!!\n");

4475  
ssd
;

4476 
	}
}

4483 
ssd_šfo
 *
	$compu‹_£rve_time
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
,

4484 
sub_»que¡
 **
subs
, 
subs_couÁ
, 
commªd
) {

4485 
i
 = 0;

4486 
max_subs_num
 = 0;

4487 
sub_»que¡
 *
sub
 = 
NULL
, *
p
 = NULL;

4488 
sub_»que¡
 *
Ï¡_sub
 = 
NULL
;

4489 
max_subs_num
 = 
ssd
->
·¿m‘”
->
d›_ch
 * ssd->·¿m‘”->
¶ªe_d›
;

4491 ià((
commªd
 =ğ
INTERLEAVE_TWO_PLANE
è|| (commªd =ğ
COPY_BACK
)) {

4492 
i
 = 0; i < 
max_subs_num
; i++) {

4493 ià(
subs
[
i
] !ğ
NULL
) {

4494 
Ï¡_sub
 = 
subs
[
i
];

4495 
subs
[
i
]->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4496 
subs
[
i
]->
cu¼’t_time
 = 
ssd
->current_time;

4497 
subs
[
i
]->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4498 
subs
[
i
]->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4499 (
subs
[
i
]->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4500 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4501 
subs
[
i
]->
com¶‘e_time
 = subs[i]->
Ãxt_¡©e_´ediù_time
;

4503 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
subs
[
i
]);

4506 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4507 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4508 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4509 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
Ï¡_sub
->
com¶‘e_time
;

4511 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4512 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4513 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4514 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4515 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4516 } ià(
commªd
 =ğ
TWO_PLANE
) {

4517 
i
 = 0; i < 
max_subs_num
; i++) {

4518 ià(
subs
[
i
] !ğ
NULL
) {

4520 
subs
[
i
]->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4521 ià(
Ï¡_sub
 =ğ
NULL
) {

4522 
subs
[
i
]->
cu¼’t_time
 = 
ssd
->current_time;

4524 
subs
[
i
]->
cu¼’t_time
 = 
Ï¡_sub
->
com¶‘e_time
 + 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tDBSY
;

4527 
subs
[
i
]->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4528 
subs
[
i
]->
Ãxt_¡©e_´ediù_time
 =

4529 
subs
[
i
]->
cu¼’t_time
 + 7 * 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4530 (
subs
[
i
]->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
è* ssd->·¿m‘”->
time_ch¬aù”i¡ics
.
tWC
;

4531 
subs
[
i
]->
com¶‘e_time
 = subs[i]->
Ãxt_¡©e_´ediù_time
;

4532 
Ï¡_sub
 = 
subs
[
i
];

4534 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
subs
[
i
]);

4537 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4538 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4539 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4540 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
Ï¡_sub
->
com¶‘e_time
;

4542 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4543 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4544 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4545 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4546 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4547 } ià(
commªd
 =ğ
INTERLEAVE
) {

4548 
i
 = 0; i < 
max_subs_num
; i++) {

4549 ià(
subs
[
i
] !ğ
NULL
) {

4551 
subs
[
i
]->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4552 ià(
Ï¡_sub
 =ğ
NULL
) {

4553 
subs
[
i
]->
cu¼’t_time
 = 
ssd
->current_time;

4555 
subs
[
i
]->
cu¼’t_time
 = 
Ï¡_sub
->
com¶‘e_time
;

4557 
subs
[
i
]->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4558 
subs
[
i
]->
Ãxt_¡©e_´ediù_time
 =

4559 
subs
[
i
]->
cu¼’t_time
 + 7 * 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4560 (
subs
[
i
]->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
è* ssd->·¿m‘”->
time_ch¬aù”i¡ics
.
tWC
;

4561 
subs
[
i
]->
com¶‘e_time
 = subs[i]->
Ãxt_¡©e_´ediù_time
;

4562 
Ï¡_sub
 = 
subs
[
i
];

4564 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
subs
[
i
]);

4567 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4568 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4569 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4570 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
Ï¡_sub
->
com¶‘e_time
;

4572 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4573 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4574 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4575 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4576 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4577 } ià(
commªd
 =ğ
NORMAL
) {

4578 
subs
[0]->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4579 
subs
[0]->
cu¼’t_time
 = 
ssd
->current_time;

4580 
subs
[0]->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4581 
subs
[0]->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4582 (
subs
[0]->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4583 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4584 
subs
[0]->
com¶‘e_time
 = subs[0]->
Ãxt_¡©e_´ediù_time
;

4586 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
subs
[0]);

4588 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4589 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4590 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4591 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
subs
[0]->
com¶‘e_time
;

4593 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4594 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4595 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4596 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4597 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4599  
NULL
;

4602  
ssd
;

4604 
	}
}

4610 
ssd_šfo
 *
	$d–‘e_äom_chªÃl
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»q
) {

4611 
sub_»que¡
 *
sub
, *
p
;

4617 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ0è&& (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 == 0)) {

4618 
sub
 = 
ssd
->
subs_w_h—d
;

4620 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

4622 
p
 = 
sub
;

4624 
sub
 !ğ
NULL
) {

4625 ià(
sub
 =ğ
sub_»q
) {

4626 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ0è&& (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 == 0)) {

4627 ià(
ssd
->
·¿m‘”
->
ad_´iÜ™y2
 == 0) {

4628 
ssd
->
»®_time_sub»q
--;

4631 ià(
sub
 ==

4632 
ssd
->
subs_w_h—d
)

4634 ià(
ssd
->
subs_w_h—d
 !ğssd->
subs_w_
) {

4635 
ssd
->
subs_w_h—d
 = 
sub
->
Ãxt_node
;

4636 
sub
 = 
ssd
->
subs_w_h—d
;

4639 
ssd
->
subs_w_h—d
 = 
NULL
;

4640 
ssd
->
subs_w_
 = 
NULL
;

4641 
p
 = 
NULL
;

4646 ià(
sub
->
Ãxt_node
 !ğ
NULL
) {

4647 
p
->
Ãxt_node
 = 
sub
->next_node;

4648 
sub
 = 
p
->
Ãxt_node
;

4651 
ssd
->
subs_w_
 = 
p
;

4652 
ssd
->
subs_w_
->
Ãxt_node
 = 
NULL
;

4658 ià(
sub
 =ğ
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
)

4660 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 !ğssd->chªÃl_h—d[chªÃl].
subs_w_
) {

4661 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 = 
sub
->
Ãxt_node
;

4662 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
;

4665 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 = 
NULL
;

4666 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
NULL
;

4667 
p
 = 
NULL
;

4672 ià(
sub
->
Ãxt_node
 !ğ
NULL
) {

4673 
p
->
Ãxt_node
 = 
sub
->next_node;

4674 
sub
 = 
p
->
Ãxt_node
;

4677 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
 = 
p
;

4678 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_
->
Ãxt_node
 = 
NULL
;

4684 
p
 = 
sub
;

4685 
sub
 = sub->
Ãxt_node
;

4688  
ssd
;

4689 
	}
}

4692 
ssd_šfo
 *

4693 
	$un_g»ed_š‹¾—ve_cİyback
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
,

4694 
sub_»que¡
 *
sub1
, sub_»que¡ *
sub2
) {

4695 
Şd_µn1
, 
µn1
, 
Şd_µn2
, 
µn2
, 
g»ed_æag
 = 0;

4697 
Şd_µn1
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub1
->
Ín
].
²
;

4698 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub1
->
loÿtiÚ
->
¶ªe
,

4699 
sub1
);

4700 
µn1
 = 
sub1
->
µn
;

4702 
Şd_µn2
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub2
->
Ín
].
²
;

4703 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub2
->
loÿtiÚ
->
¶ªe
,

4704 
sub2
);

4705 
µn2
 = 
sub2
->
µn
;

4707 ià((
Şd_µn1
 % 2 =ğ
µn1
 % 2è&& (
Şd_µn2
 % 2 =ğ
µn2
 % 2)) {

4708 
ssd
->
cİy_back_couÁ
++;

4709 
ssd
->
cİy_back_couÁ
++;

4711 
sub1
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4712 
sub1
->
cu¼’t_time
 = 
ssd
->current_time;

4713 
sub1
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4714 
sub1
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4715 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4716 (
sub1
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4717 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4718 
sub1
->
com¶‘e_time
 = sub1->
Ãxt_¡©e_´ediù_time
;

4720 
sub2
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4721 
sub2
->
cu¼’t_time
 = 
sub1
->
com¶‘e_time
;

4722 
sub2
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4723 
sub2
->
Ãxt_¡©e_´ediù_time
 = sub2->
cu¼’t_time
 + 14 * 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4724 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4725 (
sub2
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4726 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4727 
sub2
->
com¶‘e_time
 = sub2->
Ãxt_¡©e_´ediù_time
;

4729 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4730 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4731 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4732 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub2
->
com¶‘e_time
;

4734 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4735 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4736 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4737 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4738 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4740 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub1
);

4741 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub2
);

4743 ià((
Şd_µn1
 % 2 =ğ
µn1
 % 2è&& (
Şd_µn2
 % 2 !ğ
µn2
 % 2)) {

4744 
ssd
->
š‹¾—ve_couÁ
--;

4745 
ssd
->
cİy_back_couÁ
++;

4747 
sub1
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4748 
sub1
->
cu¼’t_time
 = 
ssd
->current_time;

4749 
sub1
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4750 
sub1
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4751 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4752 (
sub1
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4753 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4754 
sub1
->
com¶‘e_time
 = sub1->
Ãxt_¡©e_´ediù_time
;

4756 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4757 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4758 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4759 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub1
->
com¶‘e_time
;

4761 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4762 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4763 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4764 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4765 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4767 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub1
);

4769 ià((
Şd_µn1
 % 2 !ğ
µn1
 % 2è&& (
Şd_µn2
 % 2 =ğ
µn2
 % 2)) {

4770 
ssd
->
š‹¾—ve_couÁ
--;

4771 
ssd
->
cİy_back_couÁ
++;

4773 
sub2
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4774 
sub2
->
cu¼’t_time
 = 
ssd
->current_time;

4775 
sub2
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4776 
sub2
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4777 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4778 (
sub2
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4779 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4780 
sub2
->
com¶‘e_time
 = sub2->
Ãxt_¡©e_´ediù_time
;

4782 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4783 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4784 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4785 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub2
->
com¶‘e_time
;

4787 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4788 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4789 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4790 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4791 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4793 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub2
);

4796 
ssd
->
š‹¾—ve_couÁ
--;

4798 
sub1
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4799 
sub1
->
cu¼’t_time
 = 
ssd
->current_time;

4800 
sub1
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4801 
sub1
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4802 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4803 2 * (
ssd
->
·¿m‘”
->
sub·ge_·ge
 * ssd->·¿m‘”->
sub·ge_ÿ·c™y
) *

4804 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4805 
sub1
->
com¶‘e_time
 = sub1->
Ãxt_¡©e_´ediù_time
;

4807 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4808 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4809 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4810 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub1
->
com¶‘e_time
;

4812 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4813 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4814 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4815 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4816 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4818 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub1
);

4821  
ssd
;

4822 
	}
}

4825 
ssd_šfo
 *
	$un_g»ed_cİyback
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
,

4826 
sub_»que¡
 *
sub1
) {

4827 
Şd_µn
, 
µn
;

4829 
Şd_µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub1
->
Ín
].
²
;

4830 
	`g‘_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 0,

4831 
sub1
);

4832 
µn
 = 
sub1
->ppn;

4834 ià(
Şd_µn
 % 2 =ğ
µn
 % 2) {

4835 
ssd
->
cİy_back_couÁ
++;

4836 
sub1
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4837 
sub1
->
cu¼’t_time
 = 
ssd
->current_time;

4838 
sub1
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4839 
sub1
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4840 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4841 (
sub1
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

4842 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4843 
sub1
->
com¶‘e_time
 = sub1->
Ãxt_¡©e_´ediù_time
;

4845 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4846 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4847 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4848 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub1
->
com¶‘e_time
;

4850 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4851 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4852 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4853 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4854 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4857 
sub1
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

4858 
sub1
->
cu¼’t_time
 = 
ssd
->current_time;

4859 
sub1
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

4860 
sub1
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

4861 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

4862 2 * (
ssd
->
·¿m‘”
->
sub·ge_·ge
 * ssd->·¿m‘”->
sub·ge_ÿ·c™y
) *

4863 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

4864 
sub1
->
com¶‘e_time
 = sub1->
Ãxt_¡©e_´ediù_time
;

4866 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

4867 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

4868 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

4869 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub1
->
com¶‘e_time
;

4871 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

4872 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

4873 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

4874 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

4875 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

4878 
	`d–‘e_äom_chªÃl
(
ssd
, 
chªÃl
, 
sub1
);

4880  
ssd
;

4881 
	}
}

4888 
sub_»que¡
 *

4889 
	$fšd_š‹¾—ve_twİÏÃ_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
Úe_·ge
, 
commªd
) {

4890 
sub_»que¡
 *
two_·ge
;

4892 ià(
Úe_·ge
->
cu¼’t_¡©e
 !ğ
SR_WAIT
) {

4893  
NULL
;

4895 ià(((
ssd
->
chªÃl_h—d
[
Úe_·ge
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[Úe_·ge->loÿtiÚ->
ch
].
cu¼’t_¡©e
 ==

4896 
CHIP_IDLE
) ||

4897 ((
ssd
->
chªÃl_h—d
[
Úe_·ge
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[Úe_·ge->loÿtiÚ->
ch
].
Ãxt_¡©e
 ==

4898 
CHIP_IDLE
) &&

4899 (
ssd
->
chªÃl_h—d
[
Úe_·ge
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[Úe_·ge->loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

4900 
ssd
->
cu¼’t_time
)))) {

4901 
two_·ge
 = 
Úe_·ge
->
Ãxt_node
;

4902 ià(
commªd
 =ğ
TWO_PLANE
) {

4903 
two_·ge
 !ğ
NULL
) {

4904 ià(
two_·ge
->
cu¼’t_¡©e
 !ğ
SR_WAIT
) {

4905 
two_·ge
 =wo_·ge->
Ãxt_node
;

4906 } ià((
Úe_·ge
->
loÿtiÚ
->
ch
 =ğ
two_·ge
->location->chip) &&

4907 (
Úe_·ge
->
loÿtiÚ
->
d›
 =ğ
two_·ge
->location->die) &&

4908 (
Úe_·ge
->
loÿtiÚ
->
block
 =ğ
two_·ge
->location->block) &&

4909 (
Úe_·ge
->
loÿtiÚ
->
·ge
 =ğ
two_·ge
->location->page)) {

4910 ià(
Úe_·ge
->
loÿtiÚ
->
¶ªe
 !ğ
two_·ge
->location->plane) {

4911  
two_·ge
;

4913 
two_·ge
 =wo_·ge->
Ãxt_node
;

4916 
two_·ge
 =wo_·ge->
Ãxt_node
;

4919 ià(
two_·ge
 ==

4920 
NULL
)

4922  
NULL
;

4925 ià(
commªd
 =ğ
INTERLEAVE
) {

4926 
two_·ge
 !ğ
NULL
) {

4927 ià(
two_·ge
->
cu¼’t_¡©e
 !ğ
SR_WAIT
) {

4928 
two_·ge
 =wo_·ge->
Ãxt_node
;

4929 } ià((
Úe_·ge
->
loÿtiÚ
->
ch
 =ğ
two_·ge
->location->chip) &&

4930 (
Úe_·ge
->
loÿtiÚ
->
d›
 !ğ
two_·ge
->location->die)) {

4931  
two_·ge
;

4933 
two_·ge
 =wo_·ge->
Ãxt_node
;

4936 ià(
two_·ge
 ==

4937 
NULL
)

4939  
NULL
;

4945  
NULL
;

4947 
	}
}

4954 
	$fšd_š‹¾—ve_twİÏÃ_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»que¡_Úe
,

4955 
sub_»que¡
 *
sub_»que¡_two
, 
commªd
) {

4956 
sub_»que¡_Úe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

4957 
sub_»que¡_Úe
 !ğ
NULL
) {

4958 
sub_»que¡_two
 = 
	`fšd_š‹¾—ve_twİÏÃ_·ge
(
ssd
, 
sub_»que¡_Úe
,

4959 
commªd
);

4960 ià(
sub_»que¡_two
 =ğ
NULL
) {

4961 
sub_»que¡_Úe
 = sub_»que¡_Úe->
Ãxt_node
;

4962 } ià(
sub_»que¡_two
 !=

4963 
NULL
)

4969 ià(
sub_»que¡_two
 !ğ
NULL
) {

4970 ià(
ssd
->
»que¡_queue
 !=

4971 
ssd
->
»que¡_
) {

4972 ià((
ssd
->
»que¡_queue
->
l¢
 - ssd->
·¿m‘”
->
sub·ge_·ge
) <

4973 (
sub_»que¡_Úe
->
Ín
 * 
ssd
->
·¿m‘”
->
sub·ge_·ge
)) {

4974 ià((
ssd
->
»que¡_queue
->
l¢
 + ssd->»que¡_queue->
size
 + ssd->
·¿m‘”
->
sub·ge_·ge
) >

4975 (
sub_»que¡_Úe
->
Ín
 * 
ssd
->
·¿m‘”
->
sub·ge_·ge
)) {

4977 
sub_»que¡_two
 = 
NULL
;

4980 
sub_»que¡_two
 = 
NULL
;

4985 ià(
sub_»que¡_two
 !ğ
NULL
) {

4986  
SUCCESS
;

4988  
FAILURE
;

4991 
	}
}

4998 
Stus
 
	$go_Úe_¡•
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub1
, sub_»que¡ *
sub2
, 
aim_¡©e
,

4999 
commªd
) {

5000 
i
 = 0, 
j
 = 0, 
k
 = 0, 
m
 = 0;

5001 
time
 = 0;

5002 
sub_»que¡
 *
sub
 = 
NULL
;

5003 
sub_»que¡
 *
sub_twİÏÃ_Úe
 = 
NULL
, *
sub_twİÏÃ_two
 = NULL;

5004 
sub_»que¡
 *
sub_š‹¾—ve_Úe
 = 
NULL
, *
sub_š‹¾—ve_two
 = NULL;

5005 
loÿl
 *
loÿtiÚ
 = 
NULL
;

5006 ià(
sub1
 =ğ
NULL
) {

5007  
ERROR
;

5009 #ifdeà
DEBUG


5010 
	`´štf
("’‹¸thgo_Úe_¡• funùiÚ,sub‡dd»s pošˆi %Îd,sub chªÃÈ%d, sub ch %d, sub d› %d, sub…ÏÃ %d, sub block %d, sub…ag%d, sub sub-·g%d,‡im_¡©i %d, commªd i %d\n",
sub1
, sub1->
loÿtiÚ
->
chªÃl
,sub1->loÿtiÚ->
ch
,sub1->loÿtiÚ->
d›
,sub1->loÿtiÚ->
¶ªe
,sub1->loÿtiÚ->
block
,sub1->loÿtiÚ->
·ge
,sub1->loÿtiÚ->
sub_·ge
, 
aim_¡©e
, 
commªd
);

5017 ià(
commªd
 =ğ
NORMAL
) {

5018 #ifdeà
DEBUG


5019 
	`´štf
("enter‚ormal command\n");

5022 
sub
 = 
sub1
;

5023 
loÿtiÚ
 = 
sub1
->location;

5024 
aim_¡©e
) {

5025 
SR_R_READ
: {

5031 #ifdeà
DEBUG


5032 
	`´štf
("’‹¸nÜm® commªd' SR_R_REAS,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5035 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5036 
sub
->
cu¼’t_¡©e
 = 
SR_R_READ
;

5037 
sub
->
Ãxt_¡©e
 = 
SR_R_DATA_TRANSFER
;

5038 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
;

5040 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_READ_BUSY
;

5041 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5042 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_DATA_TRANSFER
;

5043 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 =

5044 
ssd
->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
;

5046 #ifdeà
DEBUGSUSPEND


5047 
	`´štf
("SR_R_READ: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d ,ch %d‚ext_´ediù_tim%Îd\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time,sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,†oÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5053 
SR_R_C_A_TRANSFER
: {

5060 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5061 
sub
->
cu¼’t_¡©e
 = 
SR_R_C_A_TRANSFER
;

5062 
sub
->
Ãxt_¡©e
 = 
SR_R_READ
;

5063 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5064 
sub
->
begš_time
 = 
ssd
->
cu¼’t_time
;

5066 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
add_»g_µn
 = 
sub
->
µn
;

5067 
ssd
->
»ad_couÁ
++;

5069 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_C_A_TRANSFER
;

5070 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5071 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5072 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

5073 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5075 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_C_A_TRANSFER
;

5076 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5077 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_READ_BUSY
;

5078 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 =

5079 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5081 #ifdeà
DEBUGSUSPEND


5082 
	`´štf
("SR_R_C_A_TRANSFER: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d, ch %d‚ext_´ediù_tim%Îd \n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time,sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,loÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5089 
SR_R_DATA_TRANSFER
: {

5097 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5098 
sub
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

5099 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5100 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + (sub->
size
 * ssd->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5101 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
;

5102 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
;

5104 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_DATA_TRANSFER
;

5105 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5106 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5107 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5109 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_DATA_TRANSFER
;

5110 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5111 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

5112 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5114 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
add_»g_µn
 = -1;

5116 #ifdeà
DEBUGSUSPEND


5117 
	`´štf
("SR_R_DATA_TRANSFER: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d, ch %d‚ext_´ediù_tim%Îd ,\n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time, sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,loÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5124 
SR_W_TRANSFER
: {

5132 #ifdeà
DEBUG


5133 
	`´štf
("’‹¸nÜm® commªd' SR_W_TRANSFERS,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5136 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5137 
sub
->
cu¼’t_¡©e
 = 
SR_W_TRANSFER
;

5138 
sub
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5139 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

5140 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5141 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5142 
sub
->
com¶‘e_time
 = sub->
Ãxt_¡©e_´ediù_time
 + 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

5143 
time
 = 
sub
->
com¶‘e_time
;

5145 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

5146 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5147 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5148 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
time
;

5150 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

5151 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5152 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

5153 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 =

5154 
time
 + 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

5159 
SR_W_C_A_DATA_TRANSFER
: {

5165 #ifdeà
DEBUG


5166 
	`´štf
("’‹¸nÜm® commªd' SR_W_C_A_DATA_TRANSFER,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5170 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 !=

5173 ià((
sub
->
¡©e
 & 
ssd
->
d¿m
->
m­
->
m­_’Œy
[sub->
Ín
].state) ==

5174 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
)

5176 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

5177 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5178 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5180 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

5181 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

5182 (
	`size
((
ssd
->
d¿m
->
m­
->
m­_’Œy
[
sub
->
Ín
].
¡©e
 ^ sub->state))) *

5183 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
 +

5184 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5185 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5186 
ssd
->
»ad_couÁ
++;

5187 
ssd
->
upd©e_»ad_couÁ
++;

5190 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

5191 (
sub
->
size
 * 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5192 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5203 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5204 
sub
->
cu¼’t_¡©e
 = 
SR_W_C_A_DATA_TRANSFER
;

5205 
sub
->
Ãxt_¡©e
 = 
SR_W_DATA_TRANSFER
;

5212 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

5213 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5214 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5215 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5217 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_DATA_CMD_BUSY
;

5218 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5219 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_WRITE_BUSY
;

5220 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5226 #ifdeà
DEBUGSUSPEND


5227 
	`´štf
("SR_W_C_A_DATA_TRANSFER: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d, ch %d‚ext_´ediù_tim%Îd \n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time, sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,loÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5233 
SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS
: {

5239 #ifdeà
DEBUG


5240 
	`´štf
("’‹¸nÜm® commªd' SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5244 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5245 
sub
->
cu¼’t_¡©e
 = 
SR_W_DATA_TRANSFER
;

5246 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG_w_´ogam
;

5248 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

5249 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5250 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5251 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_WRITE_BUSY
;

5252 
sub
->
Ãxt_¡©e
 = 
SR_W_DATA_TRANSFER
;

5255 #ifdeà
DEBUGSUSPEND


5256 
	`´štf
("SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d, ch %d‚ext_´ediù_tim%Îd \n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time, sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,loÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5263 
SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS
: {

5269 #ifdeà
DEBUG


5270 
	`´štf
("’‹¸nÜm® commªd' SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5274 
sub
->
cu¼’t_time
 = 
ssd
->current_time;

5275 
sub
->
cu¼’t_¡©e
 = 
SR_W_DATA_TRANSFER
;

5276 
sub
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG_w_v”ify
;

5278 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_WRITE_BUSY
;

5279 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5280 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub
->next_state_predict_time;

5281 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_WRITE_BUSY
;

5282 
sub
->
Ãxt_¡©e
 = 
SR_W_DATA_TRANSFER
;

5285 #ifdeà
DEBUGSUSPEND


5286 
	`´štf
("SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS: sub infÜm©iÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d,…² %d, sub->cu¼’t_tim%Îd, sub->Ãxt_tim%Îd, ssd->cu¼’t_tim%Îd, ssd->cu¼’t_¡©%d, ssd->Ãxt_¡©%d, ch %d‚ext_´ediù_tim%Îd \n",
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
¶ªe
, sub->
µn
, sub->
cu¼’t_time
, sub->
Ãxt_¡©e_´ediù_time
, 
ssd
->cu¼’t_time, sub->
cu¼’t_¡©e
, sub->
Ãxt_¡©e
,loÿtiÚ->ch, ssd->
chªÃl_h—d
[loÿtiÚ->chªÃl].
ch_h—d
[location->chip].next_state_predict_time );

5295  
ERROR
;

5299 ià(
commªd
 =ğ
TWO_PLANE
) {

5300 #ifdeà
DEBUG


5301 
	`´štf
("enter TWO_PLANE\n");

5309 ià((
sub1
 =ğ
NULL
è|| (
sub2
 == NULL)) {

5310  
ERROR
;

5312 
sub_twİÏÃ_Úe
 = 
sub1
;

5313 
sub_twİÏÃ_two
 = 
sub2
;

5314 
loÿtiÚ
 = 
sub1
->location;

5316 
aim_¡©e
) {

5317 
SR_R_C_A_TRANSFER
: {

5318 #ifdeà
DEBUG


5319 
	`´štf
("’‹¸TWO_PLANE,š SRC_R_C_A_TRANSFER,ssdd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5322 
sub_twİÏÃ_Úe
->
cu¼’t_time
 = 
ssd
->current_time;

5323 
sub_twİÏÃ_Úe
->
cu¼’t_¡©e
 = 
SR_R_C_A_TRANSFER
;

5324 
sub_twİÏÃ_Úe
->
Ãxt_¡©e
 = 
SR_R_READ
;

5325 
sub_twİÏÃ_Úe
->
Ãxt_¡©e_´ediù_time
 =

5326 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5327 
sub_twİÏÃ_Úe
->
begš_time
 = 
ssd
->
cu¼’t_time
;

5329 
ssd
->
chªÃl_h—d
[
sub_twİÏÃ_Úe
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub_twİÏÃ_Úe->loÿtiÚ->
ch
].
d›_h—d
[sub_twİÏÃ_Úe->loÿtiÚ->
d›
].
¶ªe_h—d
[sub_twİÏÃ_Úe->loÿtiÚ->
¶ªe
].
add_»g_µn
 = sub_twİÏÃ_Úe->
µn
;

5330 
ssd
->
»ad_couÁ
++;

5332 
sub_twİÏÃ_two
->
cu¼’t_time
 = 
ssd
->current_time;

5333 
sub_twİÏÃ_two
->
cu¼’t_¡©e
 = 
SR_R_C_A_TRANSFER
;

5334 
sub_twİÏÃ_two
->
Ãxt_¡©e
 = 
SR_R_READ
;

5335 
sub_twİÏÃ_two
->
Ãxt_¡©e_´ediù_time
 = 
sub_twİÏÃ_Úe
->next_state_predict_time;

5336 
sub_twİÏÃ_two
->
begš_time
 = 
ssd
->
cu¼’t_time
;

5338 
ssd
->
chªÃl_h—d
[
sub_twİÏÃ_two
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub_twİÏÃ_two->loÿtiÚ->
ch
].
d›_h—d
[sub_twİÏÃ_two->loÿtiÚ->
d›
].
¶ªe_h—d
[sub_twİÏÃ_two->loÿtiÚ->
¶ªe
].
add_»g_µn
 = sub_twİÏÃ_two->
µn
;

5339 
ssd
->
»ad_couÁ
++;

5340 
ssd
->
m_¶ªe_»ad_couÁ
++;

5342 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_C_A_TRANSFER
;

5343 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5344 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5345 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

5346 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5348 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_C_A_TRANSFER
;

5349 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5350 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_READ_BUSY
;

5351 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 =

5352 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5357 
SR_R_DATA_TRANSFER
: {

5358 #ifdeà
DEBUG


5359 
	`´štf
("’‹¸TWO_PLANE,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5362 
sub_twİÏÃ_Úe
->
cu¼’t_time
 = 
ssd
->current_time;

5363 
sub_twİÏÃ_Úe
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

5364 
sub_twİÏÃ_Úe
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5365 
sub_twİÏÃ_Úe
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + (sub_twİÏÃ_Úe->
size
 *

5366 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5367 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
;

5368 
sub_twİÏÃ_Úe
->
com¶‘e_time
 = sub_twİÏÃ_Úe->
Ãxt_¡©e_´ediù_time
;

5370 
sub_twİÏÃ_two
->
cu¼’t_time
 = 
sub_twİÏÃ_Úe
->
Ãxt_¡©e_´ediù_time
;

5371 
sub_twİÏÃ_two
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

5372 
sub_twİÏÃ_two
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5373 
sub_twİÏÃ_two
->
Ãxt_¡©e_´ediù_time
 = sub_twİÏÃ_two->
cu¼’t_time
 + (sub_twİÏÃ_two->
size
 *

5374 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5375 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
;

5376 
sub_twİÏÃ_two
->
com¶‘e_time
 = sub_twİÏÃ_two->
Ãxt_¡©e_´ediù_time
;

5378 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_DATA_TRANSFER
;

5379 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5380 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5381 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub_twİÏÃ_Úe
->next_state_predict_time;

5383 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_DATA_TRANSFER
;

5384 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5385 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

5386 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub_twİÏÃ_Úe
->next_state_predict_time;

5388 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
add_»g_µn
 = -1;

5393  
ERROR
;

5396 ià(
commªd
 =ğ
INTERLEAVE
) {

5397 #ifdeà
DEBUG


5398 
	`´štf
("enter INTERLEAVE\n");

5401 ià((
sub1
 =ğ
NULL
è|| (
sub2
 == NULL)) {

5402  
ERROR
;

5404 
sub_š‹¾—ve_Úe
 = 
sub1
;

5405 
sub_š‹¾—ve_two
 = 
sub2
;

5406 
loÿtiÚ
 = 
sub1
->location;

5408 
aim_¡©e
) {

5409 
SR_R_C_A_TRANSFER
: {

5410 #ifdeà
DEBUG


5411 
	`´štf
("’‹¸INTERLEAVE,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5414 
sub_š‹¾—ve_Úe
->
cu¼’t_time
 = 
ssd
->current_time;

5415 
sub_š‹¾—ve_Úe
->
cu¼’t_¡©e
 = 
SR_R_C_A_TRANSFER
;

5416 
sub_š‹¾—ve_Úe
->
Ãxt_¡©e
 = 
SR_R_READ
;

5417 
sub_š‹¾—ve_Úe
->
Ãxt_¡©e_´ediù_time
 =

5418 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5419 
sub_š‹¾—ve_Úe
->
begš_time
 = 
ssd
->
cu¼’t_time
;

5421 
ssd
->
chªÃl_h—d
[
sub_š‹¾—ve_Úe
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub_š‹¾—ve_Úe->loÿtiÚ->
ch
].
d›_h—d
[sub_š‹¾—ve_Úe->loÿtiÚ->
d›
].
¶ªe_h—d
[sub_š‹¾—ve_Úe->loÿtiÚ->
¶ªe
].
add_»g_µn
 = sub_š‹¾—ve_Úe->
µn
;

5422 
ssd
->
»ad_couÁ
++;

5424 
sub_š‹¾—ve_two
->
cu¼’t_time
 = 
ssd
->current_time;

5425 
sub_š‹¾—ve_two
->
cu¼’t_¡©e
 = 
SR_R_C_A_TRANSFER
;

5426 
sub_š‹¾—ve_two
->
Ãxt_¡©e
 = 
SR_R_READ
;

5427 
sub_š‹¾—ve_two
->
Ãxt_¡©e_´ediù_time
 = 
sub_š‹¾—ve_Úe
->next_state_predict_time;

5428 
sub_š‹¾—ve_two
->
begš_time
 = 
ssd
->
cu¼’t_time
;

5430 
ssd
->
chªÃl_h—d
[
sub_š‹¾—ve_two
->
loÿtiÚ
->
chªÃl
].
ch_h—d
[sub_š‹¾—ve_two->loÿtiÚ->
ch
].
d›_h—d
[sub_š‹¾—ve_two->loÿtiÚ->
d›
].
¶ªe_h—d
[sub_š‹¾—ve_two->loÿtiÚ->
¶ªe
].
add_»g_µn
 = sub_š‹¾—ve_two->
µn
;

5431 
ssd
->
»ad_couÁ
++;

5432 
ssd
->
š‹¾—ve_»ad_couÁ
++;

5434 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_C_A_TRANSFER
;

5435 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5436 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5437 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

5438 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5440 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_C_A_TRANSFER
;

5441 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5442 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_READ_BUSY
;

5443 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 =

5444 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

5449 
SR_R_DATA_TRANSFER
: {

5450 #ifdeà
DEBUG


5451 
	`´štf
("SR_R_DATA_TRANSFER TWO_PLANE,ªd ssd->cu¼’t_timi %Îu \n",
ssd
->
cu¼’t_time
);

5454 
sub_š‹¾—ve_Úe
->
cu¼’t_time
 = 
ssd
->current_time;

5455 
sub_š‹¾—ve_Úe
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

5456 
sub_š‹¾—ve_Úe
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5457 
sub_š‹¾—ve_Úe
->
Ãxt_¡©e_´ediù_time
 = 
ssd
->
cu¼’t_time
 + (sub_š‹¾—ve_Úe->
size
 *

5458 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5459 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
;

5460 
sub_š‹¾—ve_Úe
->
com¶‘e_time
 = sub_š‹¾—ve_Úe->
Ãxt_¡©e_´ediù_time
;

5462 
sub_š‹¾—ve_two
->
cu¼’t_time
 = 
sub_š‹¾—ve_Úe
->
Ãxt_¡©e_´ediù_time
;

5463 
sub_š‹¾—ve_two
->
cu¼’t_¡©e
 = 
SR_R_DATA_TRANSFER
;

5464 
sub_š‹¾—ve_two
->
Ãxt_¡©e
 = 
SR_COMPLETE
;

5465 
sub_š‹¾—ve_two
->
Ãxt_¡©e_´ediù_time
 = sub_š‹¾—ve_two->
cu¼’t_time
 +

5466 (
sub_š‹¾—ve_two
->
size
 *

5467 
ssd
->
·¿m‘”
->
sub·ge_ÿ·c™y
) *

5468 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tRC
;

5469 
sub_š‹¾—ve_two
->
com¶‘e_time
 = sub_š‹¾—ve_two->
Ãxt_¡©e_´ediù_time
;

5471 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_DATA_TRANSFER
;

5472 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
cu¼’t_time
 = ssd->current_time;

5473 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

5474 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
Ãxt_¡©e_´ediù_time
 = 
sub_š‹¾—ve_two
->next_state_predict_time;

5476 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 = 
CHIP_DATA_TRANSFER
;

5477 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_time
 = ssd->current_time;

5478 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

5479 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 = 
sub_š‹¾—ve_two
->next_state_predict_time;

5481 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
add_»g_µn
 = -1;

5486  
ERROR
;

5490 
	`´štf
("\nERROR: Unexpected command !\n");

5491  
ERROR
;

5494  
SUCCESS
;

5495 
	}
}

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/flash.h

19 #iâdeà
FLASH_H


20 
	#FLASH_H
 100000

	)

22 
	~<¡dlib.h
>

23 
	~"·gem­.h
"

25 
ssd_šfo
 *
´oûss
(ssd_info *);

27 
ssd_šfo
 *
š£¹2bufãr
(ssd_šfØ*, , , 
sub_»que¡
 *, 
»que¡
 *);

29 
ssd_šfo
 *

30 
æash_·ge_¡©e_modify
(
ssd_šfo
 *, 
sub_»que¡
 *, , , , ,

33 
ssd_šfo
 *

34 
make_§me_Ëv–
(
ssd_šfo
 *, , , , , , );

36 
fšd_Ëv–_·ge
(
ssd_šfo
 *, , , , 
sub_»que¡
 *,

37 
sub_»que¡
 *);

39 
make_Ëv–_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub0
, sub_»que¡ *
sub1
);

40 
ssd_šfo
 *
compu‹_£rve_time
(ssd_šfØ*
ssd
, 
chªÃl
, 
ch
, 
d›
,

41 
sub_»que¡
 **
subs
, 
subs_couÁ
, 
commªd
);

44 
g‘_µn_fÜ_advªûd_commªds
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 **
subs
,

45 
subs_couÁ
, 
commªd
);

47 
g‘_µn_fÜ_nÜm®_commªd
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 *
sub
);

49 
ssd_šfo
 *
dyÇmic_advªûd_´oûss
(ssd_šfØ*
ssd
, 
chªÃl
, 
ch
);

51 
sub_»que¡
 *
fšd_two_¶ªe_·ge
(
ssd_šfo
 *, sub_request *);

53 
sub_»que¡
 *
fšd_š‹¾—ve_»ad_·ge
(
ssd_šfo
 *, sub_request *);

55 
fšd_twİÏÃ_wr™e_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_twİÏÃ_Úe
,

56 
sub_»que¡
 *
sub_twİÏÃ_two
);

58 
fšd_š‹¾—ve_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_š‹¾—ve_Úe
,

59 
sub_»que¡
 *
sub_š‹¾—ve_two
);

61 
sub_»que¡
 *

62 
fšd_»ad_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
);

64 
sub_»que¡
 *
fšd_wr™e_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
);

66 
sub_»que¡
 *

67 
ü—t_sub_»que¡
(
ssd_šfo
 *
ssd
, 
Ín
, 
size
, 
¡©e
, 
»que¡
 *
»q
,

68 
İ”©iÚ
);

70 
sub_»que¡
 *

71 
fšd_š‹¾—ve_twİÏÃ_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
Ú•age
, 
commªd
);

74 
fšd_š‹¾—ve_twİÏÃ_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»que¡_Úe
,

75 
sub_»que¡
 *
sub_»que¡_two
, 
commªd
);

77 
ssd_šfo
 *
d–‘e_äom_chªÃl
(ssd_šfØ*
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»q
);

79 
ssd_šfo
 *

80 
un_g»ed_š‹¾—ve_cİyback
(
ssd_šfo
 *, , , , 
sub_»que¡
 *,

81 
sub_»que¡
 *);

83 
ssd_šfo
 *
un_g»ed_cİyback
(ssd_šfØ*, , , , 
sub_»que¡
 *);

86 
fšd_aùive_block
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

88 
wr™e_·ge
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

89 
aùive_block
, *
µn
);

91 
®loÿ‹_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub_»q
);

94 
go_Úe_¡•
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub1
, sub_»que¡ *
sub2
, 
aim_¡©e
,

95 
commªd
);

97 
£rviûs_2_r_cmd_Œªs_ªd_com¶‘e
(
ssd_šfo
 *
ssd
);

99 
£rviûs_2_r_wa™
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

100 *
chªge_cu¼’t_time_æag
);

102 
£rviûs_2_r_d©a_Œªs
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

103 *
chªge_cu¼’t_time_æag
);

105 
£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

106 *
chªge_cu¼’t_time_æag
);

109 
£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
, *
chªge_cu¼’t_time_æag
);

110 
£rviûs_2_wr™e_busy_š_ch
(
ssd_šfo
 *
ssd
);

111 
£rviûs_2_gc_busy_š_ch
(
ssd_šfo
 *
ssd
);

112 
gc_Œy_to_su¥’d_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
, 
cu¼’t_¡©e
, 
Ãxt_¡©e
, 
time
);

113 
Œy_to_»¡Üe_gc_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
);

115 
Œy_to_»¡Üe_wr™e_funùiÚ
(
ssd_šfo
 *
ssd
);

117 
Ãw_£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,*
chªge_cu¼’t_time_æag
);

121 
d–‘e_w_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub
);

123 
cİy_back
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
);

126 
¡©ic_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
);

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/initialize.c

19 
	#_CRTDBG_MAP_ALLOC


	)

21 
	~<¡dlib.h
>

22 
	~"š™Ÿlize.h
"

23 
	~"·gem­.h
"

24 
	~"ssd.h
"

25 
	#FALSE
 0

	)

26 
	#TRUE
 1

	)

28 
	#ACTIVE_FIXED
 0

	)

29 
	#ACTIVE_ADJUST
 1

	)

35 
	$keyCom·»Func
(
TREE_NODE
 *
p
, TREE_NODE *
p1
) {

36 
bufãr_group
 *
T1
 = 
NULL
, *
T2
 = NULL;

38 
T1
 = (
bufãr_group
 *è
p
;

39 
T2
 = (
bufãr_group
 *è
p1
;

42 ià(
T1
->
group
 < 
T2
->group)  1;

43 ià(
T1
->
group
 > 
T2
->group)  -1;

46 
	}
}

49 
	$ä“Func
(
TREE_NODE
 *
pNode
) {

51 ià(
pNode
 !ğ
NULL
) {

52 
	`ä“
((*è
pNode
);

56 
pNode
 = 
NULL
;

58 
	}
}

68 
ssd_šfo
 *
	$š™ŸtiÚ
(
ssd_šfo
 *
ssd
) {

69 
x
 = 0, 
y
 = 0, 
i
 = 0, 
j
 = 0, 
k
 = 0, 
l
 = 0, 
m
 = 0, 
n
 = 0;

71 
bufãr
[300];

72 
·¿m‘”_v®ue
 *
·¿m‘”s
;

73 
FILE
 *
å
 = 
NULL
;

93 
	`¡ºıy
(
ssd
->
·¿m‘”f’ame
, "page.parameters", 16);

95 
	`´štf
("\ninputrace file‚ame:");

96 
	`sÿnf
("%s", 
ssd
->
Œaûf’ame
);

97 
	`¡ºıy
(
ssd
->
ouutf’ame
, "ex.out", 7);

98 
	`¡ºıy
(
ssd
->
¡©i¡icf’ame
, "statistic10.dat", 16);

99 
	`¡ºıy
(
ssd
->
¡©i¡icf’ame2
, "statistic2.dat", 15);

102 
·¿m‘”s
 = 
	`lßd_·¿m‘”s
(
ssd
->
·¿m‘”f’ame
);

103 
ssd
->
·¿m‘”
 = 
·¿m‘”s
;

104 
ssd
->
mš_l¢
 = 0x7fffffff;

105 
ssd
->
·ge
 = ssd->
·¿m‘”
->
ch_num
 * ssd->·¿m‘”->
d›_ch
 * ssd->·¿m‘”->
¶ªe_d›
 *

106 
ssd
->
·¿m‘”
->
block_¶ªe
 * ssd->·¿m‘”->
·ge_block
;

109 
ssd
->
d¿m
 = (
d¿m_šfo
 *è
	`m®loc
((dram_info));

110 
	`®loc_as£¹
(
ssd
->
d¿m
, "ssd->dram");

111 
	`mem£t
(
ssd
->
d¿m
, 0, (
d¿m_šfo
));

112 
	`š™Ÿlize_d¿m
(
ssd
);

115 
ssd
->
chªÃl_h—d
 = (
chªÃl_šfo
 *è
	`m®loc
(ssd->
·¿m‘”
->
chªÃl_numb”
 * (channel_info));

116 
	`®loc_as£¹
(
ssd
->
chªÃl_h—d
, "ssd->channel_head");

117 
	`mem£t
(
ssd
->
chªÃl_h—d
, 0, ssd->
·¿m‘”
->
chªÃl_numb”
 * (
chªÃl_šfo
));

118 
	`š™Ÿlize_chªÃls
(
ssd
);

121 
	`´štf
("\n");

122 
ssd
->
ouutfe
 = 
	`fİ’
(ssd->
ouutf’ame
, "w");

123 ià(
ssd
->
ouutfe
 =ğ
NULL
) {

124 
	`´štf
("the output file can't open\n");

125  
NULL
;

128 
	`´štf
("\n");

129 
ssd
->
¡©i¡icfe
 = 
	`fİ’
(ssd->
¡©i¡icf’ame
, "w");

130 ià(
ssd
->
¡©i¡icfe
 =ğ
NULL
) {

131 
	`´štf
("the statistic file can't open\n");

132  
NULL
;

135 
	`´štf
("\n");

138 
	`årštf
(
ssd
->
ouutfe
, "·¿m‘” fe: %s\n", ssd->
·¿m‘”f’ame
);

139 
	`årštf
(
ssd
->
ouutfe
, "Œaû fe: %s\n", ssd->
Œaûf’ame
);

140 
	`årštf
(
ssd
->
¡©i¡icfe
, "·¿m‘” fe: %s\n", ssd->
·¿m‘”f’ame
);

141 
	`årštf
(
ssd
->
¡©i¡icfe
, "Œaû fe: %s\n", ssd->
Œaûf’ame
);

143 
	`fæush
(
ssd
->
ouutfe
);

144 
	`fæush
(
ssd
->
¡©i¡icfe
);

146 
å
 = 
	`fİ’
(
ssd
->
·¿m‘”f’ame
, "r");

147 ià(
å
 =ğ
NULL
) {

148 
	`´štf
("\nthe…arameter file can't open!\n");

149  
NULL
;

154 
	`årštf
(
ssd
->
ouutfe
, "-----------------------parameter file----------------------\n");

155 
	`årštf
(
ssd
->
¡©i¡icfe
, "-----------------------parameter file----------------------\n");

156 
	`fg‘s
(
bufãr
, 300, 
å
)) {

157 
	`årštf
(
ssd
->
ouutfe
, "%s", 
bufãr
);

158 
	`fæush
(
ssd
->
ouutfe
);

159 
	`årštf
(
ssd
->
¡©i¡icfe
, "%s", 
bufãr
);

160 
	`fæush
(
ssd
->
¡©i¡icfe
);

163 
	`årštf
(
ssd
->
ouutfe
, "\n");

164 
	`årštf
(
ssd
->
ouutfe
, "-----------------------simulation output----------------------\n");

165 
	`fæush
(
ssd
->
ouutfe
);

167 
	`årštf
(
ssd
->
¡©i¡icfe
, "\n");

168 
	`årštf
(
ssd
->
¡©i¡icfe
, "-----------------------simulation output----------------------\n");

169 
	`fæush
(
ssd
->
¡©i¡icfe
);

171 
	`fşo£
(
å
);

172 
	`´štf
("initiation is completed!\n");

174  
ssd
;

175 
	}
}

178 
d¿m_šfo
 *
	$š™Ÿlize_d¿m
(
ssd_šfo
 *
ssd
) {

179 
·ge_num
;

181 
d¿m_šfo
 *
d¿m
 = 
ssd
->dram;

182 
d¿m
->
d¿m_ÿ·c™y
 = 
ssd
->
·¿m‘”
->dram_capacity;

183 
d¿m
->
bufãr
 = (
tAVLT»e
 *è
	`avlT»eC»©e
((*è
keyCom·»Func
, (*è
ä“Func
);

184 
d¿m
->
bufãr
->
max_bufãr_£ùÜ
 = 
ssd
->
·¿m‘”
->
d¿m_ÿ·c™y
 / 
SECTOR
;

186 
d¿m
->
m­
 = (
m­_šfo
 *è
	`m®loc
((map_info));

187 
	`®loc_as£¹
(
d¿m
->
m­
, "dram->map");

188 
	`mem£t
(
d¿m
->
m­
, 0, (
m­_šfo
));

190 
·ge_num
 = 
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
 * ssd->·¿m‘”->
¶ªe_d›
 *

191 
ssd
->
·¿m‘”
->
d›_ch
 * ssd->·¿m‘”->
ch_num
;

192 
	`´štf
("·ge_num i %d\n", 
·ge_num
);

193 
d¿m
->
m­
->
m­_’Œy
 = (
’Œy
 *è
	`m®loc
((’Œyè* 
·ge_num
);

194 
	`®loc_as£¹
(
d¿m
->
m­
->
m­_’Œy
, "dram->map->map_entry");

195 
	`mem£t
(
d¿m
->
m­
->
m­_’Œy
, 0, (
’Œy
è* 
·ge_num
);

197  
d¿m
;

198 
	}
}

200 
·ge_šfo
 *
	$š™Ÿlize_·ge
(
·ge_šfo
 *
p_·ge
) {

201 
p_·ge
->
v®id_¡©e
 = 0;

202 
p_·ge
->
ä“_¡©e
 = 
PG_SUB
;

203 
p_·ge
->
Ín
 = -1;

204 
p_·ge
->
wr™‹n_couÁ
 = 0;

205  
p_·ge
;

206 
	}
}

208 
blk_šfo
 *
	$š™Ÿlize_block
(
blk_šfo
 *
p_block
, 
·¿m‘”_v®ue
 *
·¿m‘”
) {

209 
i
;

210 
·ge_šfo
 *
p_·ge
;

212 
p_block
->
ä“_·ge_num
 = 
·¿m‘”
->
·ge_block
;

213 
p_block
->
Ï¡_wr™e_·ge
 = -1;

215 
p_block
->
·ge_h—d
 = (
·ge_šfo
 *è
	`m®loc
(
·¿m‘”
->
·ge_block
 * (page_info));

216 
	`®loc_as£¹
(
p_block
->
·ge_h—d
, "p_block->page_head");

217 
	`mem£t
(
p_block
->
·ge_h—d
, 0, 
·¿m‘”
->
·ge_block
 * (
·ge_šfo
));

219 
i
 = 0; i < 
·¿m‘”
->
·ge_block
; i++) {

220 
p_·ge
 = &(
p_block
->
·ge_h—d
[
i
]);

221 
	`š™Ÿlize_·ge
(
p_·ge
);

223  
p_block
;

225 
	}
}

227 
¶ªe_šfo
 *
	$š™Ÿlize_¶ªe
(
¶ªe_šfo
 *
p_¶ªe
, 
·¿m‘”_v®ue
 *
·¿m‘”
) {

228 
i
;

229 
blk_šfo
 *
p_block
;

230 
p_¶ªe
->
add_»g_µn
 = -1;

242 
p_¶ªe
->
ä“_·ge
 = 
·¿m‘”
->
block_¶ªe
 *…¬am‘”->
·ge_block
;

244 
p_¶ªe
->
blk_h—d
 = (
blk_šfo
 *è
	`m®loc
(
·¿m‘”
->
block_¶ªe
 * (blk_info));

245 
	`®loc_as£¹
(
p_¶ªe
->
blk_h—d
, "p_plane->blk_head");

246 
	`mem£t
(
p_¶ªe
->
blk_h—d
, 0, 
·¿m‘”
->
block_¶ªe
 * (
blk_šfo
));

248 
i
 = 0; i < 
·¿m‘”
->
block_¶ªe
; i++) {

249 
p_block
 = &(
p_¶ªe
->
blk_h—d
[
i
]);

250 
	`š™Ÿlize_block
(
p_block
, 
·¿m‘”
);

252  
p_¶ªe
;

253 
	}
}

255 
d›_šfo
 *
	$š™Ÿlize_d›
(
d›_šfo
 *
p_d›
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
) {

256 
i
;

257 
¶ªe_šfo
 *
p_¶ªe
;

259 
p_d›
->
tok’
 = 0;

261 
p_d›
->
¶ªe_h—d
 = (
¶ªe_šfo
 *è
	`m®loc
(
·¿m‘”
->
¶ªe_d›
 * (plane_info));

262 
	`®loc_as£¹
(
p_d›
->
¶ªe_h—d
, "p_die->plane_head");

263 
	`mem£t
(
p_d›
->
¶ªe_h—d
, 0, 
·¿m‘”
->
¶ªe_d›
 * (
¶ªe_šfo
));

265 
i
 = 0; i < 
·¿m‘”
->
¶ªe_d›
; i++) {

266 
p_¶ªe
 = &(
p_d›
->
¶ªe_h—d
[
i
]);

267 
	`š™Ÿlize_¶ªe
(
p_¶ªe
, 
·¿m‘”
);

270  
p_d›
;

271 
	}
}

273 
ch_šfo
 *
	$š™Ÿlize_ch
(
ch_šfo
 *
p_ch
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
) {

274 
i
;

275 
d›_šfo
 *
p_d›
;

277 
p_ch
->
cu¼’t_¡©e
 = 
CHIP_IDLE
;

278 
p_ch
->
Ãxt_¡©e
 = 
CHIP_IDLE
;

279 
p_ch
->
cu¼’t_time
 = current_time;

280 
p_ch
->
Ãxt_¡©e_´ediù_time
 = 0;

281 
p_ch
->
d›_num
 = 
·¿m‘”
->
d›_ch
;

282 
p_ch
->
¶ªe_num_d›
 = 
·¿m‘”
->
¶ªe_d›
;

283 
p_ch
->
block_num_¶ªe
 = 
·¿m‘”
->
block_¶ªe
;

284 
p_ch
->
·ge_num_block
 = 
·¿m‘”
->
block_¶ªe
;

285 
p_ch
->
sub·ge_num_·ge
 = 
·¿m‘”
->
sub·ge_·ge
;

286 
p_ch
->
”s_lim™
 = 
·¿m‘”
->ers_limit;

287 
p_ch
->
tok’
 = 0;

288 
p_ch
->
ac_timšg
 = 
·¿m‘”
->
time_ch¬aù”i¡ics
;

289 
p_ch
->
»ad_couÁ
 = 0;

290 
p_ch
->
´og¿m_couÁ
 = 0;

291 
p_ch
->
”a£_couÁ
 = 0;

293 
p_ch
->
num_w_cyşe
 = 0;

294 
p_ch
->
wr™e_´“m±ive_sign
 = 0;

295 
p_ch
->
ch_»ad_queue_Ëngth
 = 0;

296 
p_ch
->
ch_wr™e_queue_Ëngth
 = 0;

302 
p_ch
->
d›_h—d
 = (
d›_šfo
 *è
	`m®loc
(
·¿m‘”
->
d›_ch
 * (die_info));

303 
	`®loc_as£¹
(
p_ch
->
d›_h—d
, "p_chip->die_head");

304 
	`mem£t
(
p_ch
->
d›_h—d
, 0, 
·¿m‘”
->
d›_ch
 * (
d›_šfo
));

306 
i
 = 0; i < 
·¿m‘”
->
d›_ch
; i++) {

307 
p_d›
 = &(
p_ch
->
d›_h—d
[
i
]);

308 
	`š™Ÿlize_d›
(
p_d›
, 
·¿m‘”
, 
cu¼’t_time
);

311  
p_ch
;

312 
	}
}

314 
ssd_šfo
 *
	$š™Ÿlize_chªÃls
(
ssd_šfo
 *
ssd
) {

315 
i
, 
j
;

316 
chªÃl_šfo
 *
p_chªÃl
;

317 
ch_šfo
 *
p_ch
;

320 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

321 
p_chªÃl
 = &(
ssd
->
chªÃl_h—d
[
i
]);

322 
p_chªÃl
->
ch
 = 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
];

323 
p_chªÃl
->
cu¼’t_¡©e
 = 
CHANNEL_IDLE
;

324 
p_chªÃl
->
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

331 
p_chªÃl
->
ch_h—d
 = (
ch_šfo
 *è
	`m®loc
(
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
] * (chip_info));

332 
	`®loc_as£¹
(
p_chªÃl
->
ch_h—d
, "p_channel->chip_head");

333 
	`mem£t
(
p_chªÃl
->
ch_h—d
, 0, 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
] * (
ch_šfo
));

335 
j
 = 0; j < 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
]; j++) {

336 
p_ch
 = &(
p_chªÃl
->
ch_h—d
[
j
]);

337 
	`š™Ÿlize_ch
(
p_ch
, 
ssd
->
·¿m‘”
, ssd->
cu¼’t_time
);

338 #ifdeà
DEBUG


339 
	`´štf
("š™ŸlizchªÃl ch %d, ssd cu¼’t_tim%Îd\n",
j
, 
ssd
->
cu¼’t_time
);

344  
ssd
;

345 
	}
}

353 
·¿m‘”_v®ue
 *
	$lßd_·¿m‘”s
(
·¿m‘”_fe
[30]) {

354 
FILE
 *
å
;

355 
FILE
 *
å1
;

356 
FILE
 *
å2
;

358 
·¿m‘”_v®ue
 *
p
;

359 
buf
[
BUFSIZE
];

360 
i
;

361 
´e_eql
, 
Ãxt_eql
;

362 
»s_eql
;

363 *
±r
;

365 
p
 = (
·¿m‘”_v®ue
 *è
	`m®loc
((parameter_value));

366 
	`®loc_as£¹
(
p
, "parameter_value");

367 
	`mem£t
(
p
, 0, (
·¿m‘”_v®ue
));

368 
p
->
queue_Ëngth
 = 1000;

369 
	`mem£t
(
buf
, 0, 
BUFSIZE
);

371 
å
 = 
	`fİ’
(
·¿m‘”_fe
, "r");

372 ià(
å
 =ğ
NULL
) {

373 
	`´štf
("the file…arameter_fileƒrror!\n");

374  
p
;

376 
å1
 = 
	`fİ’
("parameters_name.txt", "w");

377 ià(
å1
 =ğ
NULL
) {

378 
	`´štf
("the file…arameter_nameƒrror!\n");

379  
p
;

381 
å2
 = 
	`fİ’
("parameters_value.txt", "w");

382 ià(
å2
 =ğ
NULL
) {

383 
	`´štf
("the file…arameter_valueƒrror!\n");

384  
p
;

388 
	`fg‘s
(
buf
, 200, 
å
)) {

389 ià(
buf
[0] == '#' || buf[0] == ' ') ;

390 
±r
 = 
	`¡rchr
(
buf
, '=');

391 ià(!
±r
) ;

393 
´e_eql
 = 
±r
 - 
buf
;

394 
Ãxt_eql
 = 
´e_eql
 + 1;

396 
buf
[
´e_eql
 - 1] == ' ')…re_eql--;

397 
buf
[
´e_eql
] = 0;

398 ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "chip‚umber")) == 0) {

399 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ch_num
);

400 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dram capacity")) == 0) {

401 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
d¿m_ÿ·c™y
);

402 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "cpu sdram")) == 0) {

403 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ıu_sd¿m
);

404 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "channel‚umber")) == 0) {

405 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
chªÃl_numb”
);

406 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "die‚umber")) == 0) {

407 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
d›_ch
);

408 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "plane‚umber")) == 0) {

409 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
¶ªe_d›
);

410 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "block‚umber")) == 0) {

411 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
block_¶ªe
);

412 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "page‚umber")) == 0) {

413 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
·ge_block
);

414 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "subpage…age")) == 0) {

415 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
sub·ge_·ge
);

416 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "page capacity")) == 0) {

417 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
·ge_ÿ·c™y
);

418 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "subpage capacity")) == 0) {

419 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
sub·ge_ÿ·c™y
);

420 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_PROG")) == 0) {

421 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG
);

424 ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_r_phy")) == 0) {

425 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_r_phy
) ;

426 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_w_total ")) == 0) {

427 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_w_tÙ®
) ;

428 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_Nw_cycle")) == 0) {

429 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_Nw_cyşe
) ;

430 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_Tw_cycle")) == 0) {

431 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_Tw_cyşe
) ;

432 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_w_progam")) == 0) {

433 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_w_´ogam
) ;

434 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_w_verify")) == 0) {

435 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_w_v”ify
) ;

436 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "tPROG_buffer")) == 0) {

437 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tPROG_bufãr
) ;

440 ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_DBSY")) == 0) {

441 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tDBSY
);

442 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_BERS")) == 0) {

443 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tBERS
);

444 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CLS")) == 0) {

445 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCLS
);

446 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CLH")) == 0) {

447 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCLH
);

448 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CS")) == 0) {

449 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCS
);

450 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CH")) == 0) {

451 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCH
);

452 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_WP")) == 0) {

453 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tWP
);

454 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_ALS")) == 0) {

455 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tALS
);

456 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_ALH")) == 0) {

457 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tALH
);

458 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_DS")) == 0) {

459 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tDS
);

460 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_DH")) == 0) {

461 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tDH
);

462 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_WC")) == 0) {

463 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tWC
);

464 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_WH")) == 0) {

465 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tWH
);

466 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_ADL")) == 0) {

467 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tADL
);

468 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_R")) == 0) {

469 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tR
);

470 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_AR")) == 0) {

471 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tAR
);

472 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CLR")) == 0) {

473 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCLR
);

474 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RR")) == 0) {

475 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRR
);

476 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RP")) == 0) {

477 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRP
);

478 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_WB")) == 0) {

479 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tWB
);

480 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RC")) == 0) {

481 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRC
);

482 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_REA")) == 0) {

483 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tREA
);

484 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CEA")) == 0) {

485 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCEA
);

486 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RHZ")) == 0) {

487 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRHZ
);

488 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_CHZ")) == 0) {

489 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCHZ
);

490 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RHOH")) == 0) {

491 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRHOH
);

492 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RLOH")) == 0) {

493 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRLOH
);

494 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_COH")) == 0) {

495 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tCOH
);

496 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_REH")) == 0) {

497 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tREH
);

498 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_IR")) == 0) {

499 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tIR
);

500 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RHW")) == 0) {

501 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRHW
);

502 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_WHR")) == 0) {

503 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tWHR
);

504 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "t_RST")) == 0) {

505 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_ch¬aù”i¡ics
.
tRST
);

506 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "erase†imit")) == 0) {

507 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
”s_lim™
);

508 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "flash operating current")) == 0) {

509 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
İ”©šg_cu¼’t
);

510 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "flash supply voltage")) == 0) {

511 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
suµly_vŞge
);

512 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dram‡ctive current")) == 0) {

513 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
d¿m_aùive_cu¼’t
);

514 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dram standby current")) == 0) {

515 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
d¿m_¡ªdby_cu¼’t
);

516 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dram„efresh current")) == 0) {

517 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
d¿m_»äesh_cu¼’t
);

518 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dram voltage")) == 0) {

519 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%lf", &
p
->
d¿m_vŞge
);

520 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "address mapping")) == 0) {

521 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
add»ss_m­pšg
);

522 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "wear†eveling")) == 0) {

523 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
w—r_Ëv–šg
);

524 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "gc")) == 0) {

525 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
gc
);

526 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "clean in background")) == 0) {

527 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ş—n_š_background
);

528 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "overprovide")) == 0) {

529 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
ov”´ovide
);

530 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "gchreshold")) == 0) {

531 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
gc_th»shŞd
);

532 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "buffer management")) == 0) {

533 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
bufãr_mªagem’t
);

534 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "scheduling‡lgorithm")) == 0) {

535 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
schedulšg_®gÜ™hm
);

536 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "quickable„adio")) == 0) {

537 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
quick_¿dio
);

538 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "related mapping")) == 0) {

539 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
»Ï‹d_m­pšg
);

540 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "striping")) == 0) {

541 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
¡ršg
);

542 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "interleaving")) == 0) {

543 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
š‹¾—všg
);

544 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "pipelining")) == 0) {

545 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
p–ššg
);

546 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "time_step")) == 0) {

547 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
time_¡•
);

548 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "small†arge write")) == 0) {

549 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
sm®l_Ïrge_wr™e
);

550 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "active writehreshold")) == 0) {

551 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
th»shŞd_fixed_adju¡
);

552 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "threshold value")) == 0) {

553 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
th»shŞd_v®ue
);

554 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "active write")) == 0) {

555 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
aùive_wr™e
);

556 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "gc hardhreshold")) == 0) {

557 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
gc_h¬d_th»shŞd
);

558 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "allocation")) == 0) {

559 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
®loÿtiÚ_scheme
);

560 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "static_allocation")) == 0) {

561 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
¡©ic_®loÿtiÚ
);

562 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "dynamic_allocation")) == 0) {

563 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
dyÇmic_®loÿtiÚ
);

564 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "advanced command")) == 0) {

565 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
advªûd_commªds
);

566 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "advanced command…riority")) == 0) {

567 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ad_´iÜ™y
);

568 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "advanced command…riority2")) == 0) {

569 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ad_´iÜ™y2
);

570 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "greed CB command")) == 0) {

571 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
g»ed_CB_ad
);

572 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "greed MPW command")) == 0) {

573 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
g»ed_MPW_ad
);

574 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "aged")) == 0) {

575 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
aged
);

576 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "aged„atio")) == 0) {

577 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%f", &
p
->
aged_¿tio
);

578 } ià((
»s_eql
 = 
	`¡rcmp
(
buf
, "queue_length")) == 0) {

579 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
queue_Ëngth
);

580 } ià((
»s_eql
 = 
	`¡ºcmp
(
buf
, "chip‚umber", 11)) == 0) {

581 
	`ssÿnf
(
buf
 + 12, "%d", &
i
);

582 
	`ssÿnf
(
buf
 + 
Ãxt_eql
, "%d", &
p
->
ch_chªÃl
[
i
]);

584 
	`´štf
("dÚ'ˆm©ch\ˆ%s\n", 
buf
);

587 
	`mem£t
(
buf
, 0, 
BUFSIZE
);

590 
	`fşo£
(
å
);

591 
	`fşo£
(
å1
);

592 
	`fşo£
(
å2
);

594  
p
;

595 
	}
}

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/initialize.h

18 #iâdeà
INITIALIZE_H


19 
	#INITIALIZE_H
 10000

	)

21 
	~<¡dio.h
>

22 
	~<¡ršg.h
>

23 
	~<¡dlib.h
>

24 
	~<time.h
>

25 
	~<ùy³.h
>

26 
	~<sys/ty³s.h
>

27 
	~"avlT»e.h
"

29 
	#SECTOR
 512

	)

30 
	#BUFSIZE
 200

	)

32 
	#DYNAMIC_ALLOCATION
 0

	)

33 
	#STATIC_ALLOCATION
 1

	)

35 
	#INTERLEAVE
 0

	)

36 
	#TWO_PLANE
 1

	)

38 
	#NORMAL
 2

	)

39 
	#INTERLEAVE_TWO_PLANE
 3

	)

40 
	#COPY_BACK
 4

	)

42 
	#AD_RANDOM
 1

	)

43 
	#AD_COPYBACK
 2

	)

44 
	#AD_TWOPLANE
 4

	)

45 
	#AD_INTERLEAVE
 8

	)

46 
	#AD_TWOPLANE_READ
 16

	)

48 
	#READ
 1

	)

49 
	#WRITE
 0

	)

57 
	#CHANNEL_IDLE
 000

	)

58 
	#CHANNEL_C_A_TRANSFER
 3

	)

59 
	#CHANNEL_GC
 4

	)

61 
	#CHANNEL_GC_ERASE
 5

	)

64 
	#CHANNEL_DATA_TRANSFER
 7

	)

65 
	#CHANNEL_TRANSFER
 8

	)

66 
	#CHANNEL_UNKNOWN
 9

	)

68 
	#CHIP_IDLE
 100

	)

69 
	#CHIP_WRITE_BUSY
 101

	)

70 
	#CHIP_READ_BUSY
 102

	)

71 
	#CHIP_C_A_TRANSFER
 103

	)

73 
	#CHIP_WRITE_DATA_CMD_BUSY
 104

	)

74 
	#CHIP_GC_RW_BUSY
 105

	)

76 
	#CHIP_DATA_TRANSFER
 107

	)

77 
	#CHIP_WAIT
 108

	)

78 
	#CHIP_ERASE_BUSY
 109

79 
	#CHIP_COPYBACK_BUSY
 110

	)

80 
	#UNKNOWN
 111

	)

82 
	#SR_WAIT
 200

	)

83 
	#SR_R_C_A_TRANSFER
 201

	)

84 
	#SR_R_READ
 202

	)

85 
	#SR_R_DATA_TRANSFER
 203

	)

86 
	#SR_W_C_A_DATA_TRANSFER
 204

	)

87 
	#SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS
 205

	)

88 
	#SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS
 207

	)

89 
	#SR_W_TRANSFER
 206

	)

92 
	#SR_W_DATA_TRANSFER
 208

93 

	)

94 
	#SR_COMPLETE
 299

	)

96 
	#REQUEST_IN
 300

97 
	#OUTPUT
 301

98 

	)

99 
	#GC_WAIT
 400

	)

100 
	#GC_ERASE_C_A
 401

	)

101 
	#GC_COPY_BACK
 402

	)

102 
	#GC_COMPLETE
 403

	)

103 
	#GC_INTERRUPT
 0

	)

104 
	#GC_UNINTERRUPT
 1

	)

106 
	#CHANNEL
(
l¢
èÖ¢&0x0000)>>16

	)

107 
	#ch
(
l¢
èÖ¢&0x0000)>>16

	)

108 
	#d›
(
l¢
èÖ¢&0x0000)>>16

	)

109 
	#PLANE
(
l¢
èÖ¢&0x0000)>>16

	)

110 
	#BLOKC
(
l¢
èÖ¢&0x0000)>>16

	)

111 
	#PAGE
(
l¢
èÖ¢&0x0000)>>16

	)

112 
	#SUBPAGE
(
l¢
èÖ¢&0x0000)>>16

	)

114 
	#PG_SUB
 0xffffffff

	)

120 
	#TRUE
 1

	)

121 
	#FALSE
 0

	)

122 
	#SUCCESS
 1

	)

123 
	#FAILURE
 0

	)

124 
	#ERROR
 -1

	)

125 
	#INFEASIBLE
 -2

	)

126 
	#OVERFLOW
 -3

	)

127 
	tStus
;

129 
	sac_time_ch¬aù”i¡ics
 {

130 
	mtPROG
;

132 
	mtPROG_r_phy
;

134 
	mtPROG_w_tÙ®
;

135 
	mtPROG_Nw_cyşe
;

136 
	mtPROG_Tw_cyşe
;

137 
	mtPROG_w_´ogam
;

138 
	mtPROG_w_v”ify
;

139 
	mtPROG_bufãr
;

143 
	mtDBSY
;

144 
	mtBERS
;

145 
	mtCLS
;

146 
	mtCLH
;

147 
	mtCS
;

148 
	mtCH
;

149 
	mtWP
;

150 
	mtALS
;

151 
	mtALH
;

152 
	mtDS
;

153 
	mtDH
;

154 
	mtWC
;

155 
	mtWH
;

156 
	mtADL
;

157 
	mtR
;

158 
	mtAR
;

159 
	mtCLR
;

160 
	mtRR
;

161 
	mtRP
;

162 
	mtWB
;

163 
	mtRC
;

164 
	mtREA
;

165 
	mtCEA
;

166 
	mtRHZ
;

167 
	mtCHZ
;

168 
	mtRHOH
;

169 
	mtRLOH
;

170 
	mtCOH
;

171 
	mtREH
;

172 
	mtIR
;

173 
	mtRHW
;

174 
	mtWHR
;

175 
	mtRST
;

176 } 
	gac_timšg
;

179 
	sssd_šfo
 {

181 
	mdebug_sign
;

182 
	mgc_su¥’d_times
;

183 
	mwr™e_su¥’d_times
;

184 
	mgc_su¥’d_došg
;

185 
	mwr™e_su¥’d_došg
;

186 
	mÜigš®_tÙ®_·ges_numb”
;

187 
	maá”_´e_´oûss_·ges_numb”
;

188 
	maá”_´e_´oûs£_ªd_aged_·ges_numb”
;

189 
	mÏ¡_tÙ®_avaabË_·ges_numb”
;

196 
	mssd_’”gy
;

197 
št64_t
 
	mcu¼’t_time
;

198 
št64_t
 
	mÃxt_»que¡_time
;

199 
	m»®_time_sub»q
;

200 
	mæag
;

201 
	maùive_æag
;

202 
	m·ge
;

204 
	mtok’
;

205 
	mgc_»que¡
;

207 
	mwr™e_»que¡_couÁ
;

208 
	m»ad_»que¡_couÁ
;

209 
št64_t
 
	mwr™e_avg
;

210 
št64_t
 
	m»ad_avg
;

212 
	mmš_l¢
;

213 
	mmax_l¢
;

214 
	m»ad_couÁ
;

215 
	m´og¿m_couÁ
;

216 
	m”a£_couÁ
;

217 
	mdœeù_”a£_couÁ
;

218 
	mcİy_back_couÁ
;

219 
	mm_¶ªe_»ad_couÁ
;

220 
	mm_¶ªe_´og_couÁ
;

221 
	mš‹¾—ve_couÁ
;

222 
	mš‹¾—ve_»ad_couÁ
;

223 
	mš‹r_m¶ªe_couÁ
;

224 
	mš‹r_m¶ªe_´og_couÁ
;

225 
	mš‹¾—ve_”a£_couÁ
;

226 
	mm¶ªe_”a£_cÚut
;

227 
	mš‹¾—ve_m¶ªe_”a£_couÁ
;

228 
	mgc_cİy_back
;

229 
	mwr™e_æash_couÁ
;

230 
	mwa¡e_·ge_couÁ
;

231 
	mave_»ad_size
;

232 
	mave_wr™e_size
;

233 
	m»que¡_queue_Ëngth
;

234 
	mupd©e_»ad_couÁ
;

236 
	m·¿m‘”f’ame
[30];

237 
	mŒaûf’ame
[30];

238 
	mouutf’ame
[30];

239 
	m¡©i¡icf’ame
[30];

240 
	m¡©i¡icf’ame2
[30];

242 
FILE
 *
	mouutfe
;

243 
FILE
 *
	mŒaûfe
;

244 
FILE
 *
	m¡©i¡icfe
;

245 
FILE
 *
	m¡©i¡icfe2
;

247 
·¿m‘”_v®ue
 *
	m·¿m‘”
;

248 
d¿m_šfo
 *
	md¿m
;

249 
»que¡
 *
	m»que¡_queue
;

250 
»que¡
 *
	m»que¡_
;

251 
sub_»que¡
 *
	msubs_w_h—d
;

252 
sub_»que¡
 *
	msubs_w_
;

253 
ev’t_node
 *
	mev’t
;

254 
chªÃl_šfo
 *
	mchªÃl_h—d
;

258 
	schªÃl_šfo
 {

259 
	mch
;

260 
	m»ad_couÁ
;

261 
	m´og¿m_couÁ
;

262 
	m”a£_couÁ
;

263 
	mtok’
;

265 
	mcu¼’t_¡©e
;

266 
	mÃxt_¡©e
;

267 
št64_t
 
	mcu¼’t_time
;

268 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

270 
ev’t_node
 *
	mev’t
;

271 
sub_»que¡
 *
	msubs_r_h—d
;

272 
sub_»que¡
 *
	msubs_r_
;

273 
sub_»que¡
 *
	msubs_w_h—d
;

274 
sub_»que¡
 *
	msubs_w_
;

275 
gc_İ”©iÚ
 *
	mgc_commªd
;

276 
ch_šfo
 *
	mch_h—d
;

284 
	sch_šfo
 {

285 
	md›_num
;

286 
	m¶ªe_num_d›
;

287 
	mblock_num_¶ªe
;

288 
	m·ge_num_block
;

289 
	msub·ge_num_·ge
;

290 
	m”s_lim™
;

291 
	mtok’
;

293 
	mcu¼’t_¡©e
;

294 
	mÃxt_¡©e
;

295 
št64_t
 
	mcu¼’t_time
;

296 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

298 
	m»ad_couÁ
;

299 
	m´og¿m_couÁ
;

300 
	m”a£_couÁ
;

302 
ac_time_ch¬aù”i¡ics
 
	mac_timšg
;

303 
d›_šfo
 *
	md›_h—d
;

305 
	mwr™e_´“m±ive_sign
;

306 
	mnum_w_cyşe
;

310 
	mch_¡©us
;

311 
	mch_¡©us_time
;

312 
	mch_»ad_queue_Ëngth
;

313 
	mch_wr™e_queue_Ëngth
;

315 
sub_»que¡
 *
	m¡Üedsub
;

319 
	sd›_šfo
 {

321 
	mtok’
;

322 
¶ªe_šfo
 *
	m¶ªe_h—d
;

327 
	s¶ªe_šfo
 {

328 
	madd_»g_µn
;

335 
	mä“_·ge
;

336 
	m”s_šv®id
;

337 
	maùive_block
;

338 
	mÿn_”a£_block
;

339 
dœeù_”a£
 *
	m”a£_node
;

340 
blk_šfo
 *
	mblk_h—d
;

344 
	sblk_šfo
 {

345 
	m”a£_couÁ
;

346 
	mä“_·ge_num
;

347 
	mšv®id_·ge_num
;

348 
	mÏ¡_wr™e_·ge
;

349 
·ge_šfo
 *
	m·ge_h—d
;

353 
	s·ge_šfo
 {

354 
	mv®id_¡©e
;

355 
	mä“_¡©e
;

356 
	mÍn
;

357 
	mwr™‹n_couÁ
;

361 
	sd¿m_šfo
 {

362 
	md¿m_ÿ·c™y
;

363 
št64_t
 
	mcu¼’t_time
;

365 
d¿m_·¿m‘”
 *
	md¿m_·¿m‹rs
;

366 
m­_šfo
 *
	mm­
;

367 
bufãr_šfo
 *
	mbufãr
;

381 
	sbufãr_group
 {

382 
TREE_NODE
 
	mnode
;

383 
bufãr_group
 *
	mLRU_lšk_Ãxt
;

384 
bufãr_group
 *
	mLRU_lšk_´e
;

386 
	mgroup
;

387 
	m¡Üed
;

388 
	mdœty_ş—n
;

389 
	mæag
;

390 } 
	tbuf_node
;

393 
	sd¿m_·¿m‘”
 {

394 
	maùive_cu¼’t
;

395 
	m¦“p_cu¼’t
;

396 
	mvŞge
;

397 
	mşock_time
;

401 
	sm­_šfo
 {

402 
’Œy
 *
	mm­_’Œy
;

403 
bufãr_šfo
 *
	m©ch_šfo
;

407 
	scÚŒŞËr_šfo
 {

408 
	mäequ’cy
;

409 
št64_t
 
	mşock_time
;

410 
	mpow”
;

414 
	s»que¡
 {

415 
št64_t
 
	mtime
;

416 
	ml¢
;

417 
	msize
;

418 
	mİ”©iÚ
;

420 *
	mÃed_di¡r_æag
;

421 
	mcom¶‘e_l¢_couÁ
;

423 
	mdi¡ri_æag
;

425 
št64_t
 
	mbegš_time
;

426 
št64_t
 
	m»¥Ú£_time
;

427 
	m’”gy_cÚsum±iÚ
;

429 
sub_»que¡
 *
	msubs
;

430 
»que¡
 *
	mÃxt_node
;

434 
	ssub_»que¡
 {

435 
	mÍn
;

436 
	mµn
;

437 
	mİ”©iÚ
;

438 
	msize
;

441 
	mcu¼’t_¡©e
;

442 
št64_t
 
	mcu¼’t_time
;

443 
	mÃxt_¡©e
;

444 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

445 
	m¡©e
;

448 
št64_t
 
	mbegš_time
;

449 
št64_t
 
	mcom¶‘e_time
;

451 
loÿl
 *
	mloÿtiÚ
;

452 
sub_»que¡
 *
	mÃxt_subs
;

453 
sub_»que¡
 *
	mÃxt_node
;

454 
sub_»que¡
 *
	mupd©e
;

458 
št64_t
 
	m£rviûd_time
;

459 
št64_t
 
	m¦ack_time
;

460 
	mÏ¡_sign
;

468 
	sev’t_node
 {

469 
	mty³
;

470 
št64_t
 
	m´ediù_time
;

471 
ev’t_node
 *
	mÃxt_node
;

472 
ev’t_node
 *
	m´e_node
;

475 
	s·¿m‘”_v®ue
 {

476 
	mch_num
;

477 
	md¿m_ÿ·c™y
;

478 
	mıu_sd¿m
;

480 
	mchªÃl_numb”
;

481 
	mch_chªÃl
[100];

483 
	md›_ch
;

484 
	m¶ªe_d›
;

485 
	mblock_¶ªe
;

486 
	m·ge_block
;

487 
	msub·ge_·ge
;

489 
	m·ge_ÿ·c™y
;

490 
	msub·ge_ÿ·c™y
;

493 
	m”s_lim™
;

494 
	madd»ss_m­pšg
;

495 
	mw—r_Ëv–šg
;

496 
	mgc
;

497 
	mş—n_š_background
;

498 
	m®loc_poŞ
;

499 
	mov”´ovide
;

500 
	mgc_th»shŞd
;

502 
	mİ”©šg_cu¼’t
;

503 
	msuµly_vŞge
;

504 
	md¿m_aùive_cu¼’t
;

505 
	md¿m_¡ªdby_cu¼’t
;

506 
	md¿m_»äesh_cu¼’t
;

507 
	md¿m_vŞge
;

509 
	mbufãr_mªagem’t
;

510 
	mschedulšg_®gÜ™hm
;

511 
	mquick_¿dio
;

512 
	m»Ï‹d_m­pšg
;

514 
	mtime_¡•
;

515 
	msm®l_Ïrge_wr™e
;

517 
	m¡ršg
;

518 
	mš‹¾—všg
;

519 
	mp–ššg
;

520 
	mth»shŞd_fixed_adju¡
;

521 
	mth»shŞd_v®ue
;

522 
	maùive_wr™e
;

523 
	mgc_h¬d_th»shŞd
;

524 
	m®loÿtiÚ_scheme
;

525 
	m¡©ic_®loÿtiÚ
;

526 
	mdyÇmic_®loÿtiÚ
;

527 
	madvªûd_commªds
;

528 
	mad_´iÜ™y
;

529 
	mad_´iÜ™y2
;

530 
	mg»ed_CB_ad
;

531 
	mg»ed_MPW_ad
;

532 
	maged
;

533 
	maged_¿tio
;

534 
	mqueue_Ëngth
;

536 
ac_time_ch¬aù”i¡ics
 
	mtime_ch¬aù”i¡ics
;

542 
	s’Œy
 {

543 
	m²
;

544 
	m¡©e
;

548 
	sloÿl
 {

549 
	mchªÃl
;

550 
	mch
;

551 
	md›
;

552 
	m¶ªe
;

553 
	mblock
;

554 
	m·ge
;

555 
	msub_·ge
;

559 
	sgc_šfo
 {

560 
št64_t
 
	mbegš_time
;

561 
	mcİy_back_couÁ
;

562 
	m”a£_couÁ
;

563 
št64_t
 
	m´oûss_time
;

564 
	m’”gy_cÚsum±iÚ
;

568 
	sdœeù_”a£
 {

569 
	mblock
;

570 
dœeù_”a£
 *
	mÃxt_node
;

577 
	sgc_İ”©iÚ
 {

578 
	mch
;

579 
	md›
;

580 
	m¶ªe
;

581 
	mblock
;

582 
	m·ge
;

583 
	m¡©e
;

584 
	m´iÜ™y
;

585 
gc_İ”©iÚ
 *
	mÃxt_node
;

587 
	mcİy_·ge_numb”
;

588 
	mcİy_v®id_numb”
;

589 
	mpos_š_cİy
;

590 
	m»ad
;

591 
	mwr™e
;

592 
	m”a£
;

593 
	mviùim_block_numb”
;

595 
	mgc_»ad_šÃr
;

596 
	mgc_wr™e_šÃr
;

597 
	m»ad_wr™e_’d
;

598 
	mÏ¡_·ge_š_viùim_d—l
;

600 
	mviùim_block_ä“·ge_¡©i¡ic
;

601 
	mch_¡©us
;

602 
	mch_Ãxt_¡©us
;

603 
	msign_fÜ_´“m±ive
;

604 
	mch_Ãxt_´ediù_time_diff
;

611 
	sD¿m_wr™e_m­
 {

612 
	m¡©e
;

613 } 
	tD¿m_wr™e_m­
;

616 
ssd_šfo
 *
š™ŸtiÚ
(ssd_info *);

618 
·¿m‘”_v®ue
 *
lßd_·¿m‘”s
(
·¿m‘”_fe
[30]);

620 
·ge_šfo
 *
š™Ÿlize_·ge
(·ge_šfØ*
p_·ge
);

622 
blk_šfo
 *
š™Ÿlize_block
(blk_šfØ*
p_block
, 
·¿m‘”_v®ue
 *
·¿m‘”
);

624 
¶ªe_šfo
 *
š™Ÿlize_¶ªe
(¶ªe_šfØ*
p_¶ªe
, 
·¿m‘”_v®ue
 *
·¿m‘”
);

626 
d›_šfo
 *
š™Ÿlize_d›
(d›_šfØ*
p_d›
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
);

628 
ch_šfo
 *
š™Ÿlize_ch
(ch_šfØ*
p_ch
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
);

630 
ssd_šfo
 *
š™Ÿlize_chªÃls
(ssd_šfØ*
ssd
);

632 
d¿m_šfo
 *
š™Ÿlize_d¿m
(
ssd_šfo
 *
ssd
);

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/pagemap.c

19 
	#_CRTDBG_MAP_ALLOC


	)

21 
	~"·gem­.h
"

22 
	~"ssd.h
"

28 
	$fe_as£¹
(
”rÜ
, *
s
) {

29 ià(
”rÜ
 == 0) ;

30 
	`´štf
("İ’ % ”rÜ\n", 
s
);

31 
	`g‘ch¬
();

32 
	`ex™
(-1);

33 
	}
}

38 
	$®loc_as£¹
(*
p
, *
s
)

40 ià(
p
 !ğ
NULL
) ;

41 
	`´štf
("m®loø% ”rÜ\n", 
s
);

42 
	`g‘ch¬
();

43 
	`ex™
(-1);

44 
	}
}

51 
	$Œaû_as£¹
(
št64_t
 
time_t
, 
deviû
, 
l¢
, 
size
, 
İe
)

53 ià(
time_t
 < 0 || 
deviû
 < 0 || 
l¢
 < 0 || 
size
 < 0 || 
İe
 < 0) {

54 
	`´štf
("Œaûƒ¼Ü:%Îd %d %d %d %d\n", 
time_t
, 
deviû
, 
l¢
, 
size
, 
İe
);

55 
	`g‘ch¬
();

56 
	`ex™
(-1);

58 ià(
time_t
 =ğ0 && 
deviû
 =ğ0 && 
l¢
 =ğ0 && 
size
 =ğ0 && 
İe
 == 0) {

59 
	`´štf
("probable„ead‡ blank†ine\n");

60 
	`g‘ch¬
();

62 
	}
}

69 
loÿl
 *
	$fšd_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
µn
) {

70 
loÿl
 *
loÿtiÚ
 = 
NULL
;

71 
i
 = 0;

72 
²
, 
µn_v®ue
 = 
µn
;

73 
·ge_¶ªe
 = 0, 
·ge_d›
 = 0, 
·ge_ch
 = 0, 
·ge_chªÃl
 = 0;

75 
²
 = 
µn
;

77 #ifdeà
DEBUG


78 
	`´štf
("enter find_location\n");

81 
loÿtiÚ
 = (
loÿl
 *è
	`m®loc
((local));

82 
	`®loc_as£¹
(
loÿtiÚ
, "location");

83 
	`mem£t
(
loÿtiÚ
, 0, (
loÿl
));

85 
·ge_¶ªe
 = 
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
;

86 
·ge_d›
 = 
·ge_¶ªe
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
;

87 
·ge_ch
 = 
·ge_d›
 * 
ssd
->
·¿m‘”
->
d›_ch
;

88 
·ge_chªÃl
 = 
·ge_ch
 * 
ssd
->
·¿m‘”
->
ch_chªÃl
[0];

94 
loÿtiÚ
->
chªÃl
 = 
µn
 / 
·ge_chªÃl
;

95 
loÿtiÚ
->
ch
 = (
µn
 % 
·ge_chªÃl
è/ 
·ge_ch
;

96 
loÿtiÚ
->
d›
 = ((
µn
 % 
·ge_chªÃl
è% 
·ge_ch
è/ 
·ge_d›
;

97 
loÿtiÚ
->
¶ªe
 = (((
µn
 % 
·ge_chªÃl
è% 
·ge_ch
è% 
·ge_d›
è/ 
·ge_¶ªe
;

98 
loÿtiÚ
->
block
 = ((((
µn
 % 
·ge_chªÃl
è% 
·ge_ch
è% 
·ge_d›
è% 
·ge_¶ªe
è/ 
ssd
->
·¿m‘”
->
·ge_block
;

99 
loÿtiÚ
->
·ge
 = (((((
µn
 % 
·ge_chªÃl
è% 
·ge_ch
è% 
·ge_d›
è% 
·ge_¶ªe
è% 
ssd
->
·¿m‘”
->
·ge_block
) %

100 
ssd
->
·¿m‘”
->
·ge_block
;

102  
loÿtiÚ
;

103 
	}
}

111 
	$fšd_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

112 
block
, 
·ge
) {

113 
µn
 = 0;

114 
i
 = 0;

115 
·ge_¶ªe
 = 0, 
·ge_d›
 = 0, 
·ge_ch
 = 0;

116 
·ge_chªÃl
[100];

118 #ifdeà
DEBUG


125 
·ge_¶ªe
 = 
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
;

126 
·ge_d›
 = 
·ge_¶ªe
 * 
ssd
->
·¿m‘”
->
¶ªe_d›
;

127 
·ge_ch
 = 
·ge_d›
 * 
ssd
->
·¿m‘”
->
d›_ch
;

128 
i
 < 
ssd
->
·¿m‘”
->
chªÃl_numb”
) {

129 
·ge_chªÃl
[
i
] = 
ssd
->
·¿m‘”
->
ch_chªÃl
[i] * 
·ge_ch
;

130 
i
++;

136 
i
 = 0;

137 
i
 < 
chªÃl
) {

138 
µn
 =…² + 
·ge_chªÃl
[
i
];

139 
i
++;

141 
µn
 =…² + 
·ge_ch
 * 
ch
 + 
·ge_d›
 * 
d›
 + 
·ge_¶ªe
 * 
¶ªe
 + 
block
 * 
ssd
->
·¿m‘”
->
·ge_block
 + 
·ge
;

143  
µn
;

144 
	}
}

149 
	$£t_’Œy_¡©e
(
ssd_šfo
 *
ssd
, 
l¢
, 
size
) {

150 
‹mp
, 
¡©e
, 
move
;

152 
‹mp
 = ~(0xfffffffà<< 
size
);

153 
move
 = 
l¢
 % 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

154 
¡©e
 = 
‹mp
 << 
move
;

156  
¡©e
;

157 
	}
}

163 
ssd_šfo
 *
	$´e_´oûss_·ge
(
ssd_šfo
 *
ssd
) {

164 
æ
 = 0;

165 
deviû
, 
l¢
, 
size
, 
İe
, 
Ín
, 
fuÎ_·ge
;

166 
Ïrge¡_l¢
, 
sub_size
, 
µn
, 
add_size
 = 0;

167 
i
 = 0, 
j
, 
k
;

168 
m­_’Œy_Ãw
, 
m­_’Œy_Şd
, 
modify
;

169 
æag
 = 0;

170 
bufãr_»que¡
[200];

171 
loÿl
 *
loÿtiÚ
;

172 
št64_t
 
time
;

174 
l
, 
‹mp_ch_chªÃl
 ;

175 
‹mp_ch_chªÃl
 = 
ssd
->
·¿m‘”
->
ch_num
 / ssd->·¿m‘”->
chªÃl_numb”
;

177 
	`´štf
("\n");

178 
	`´štf
("begin…re_process_page.................\n");

180 
ssd
->
Œaûfe
 = 
	`fİ’
(ssd->
Œaûf’ame
, "r");

181 ià(
ssd
->
Œaûfe
 =ğ
NULL
)

183 
	`´štf
("therace file can't open\n");

184  
NULL
;

187 
fuÎ_·ge
 = ~(0xfffffffà<< (
ssd
->
·¿m‘”
->
sub·ge_·ge
));

189 
ssd
->
Üigš®_tÙ®_·ges_numb”
 = (ssd->
·¿m‘”
->
ch_num
 * ssd->·¿m‘”->
d›_ch
 * ssd->·¿m‘”->
¶ªe_d›
 *ssd->·¿m‘”->
block_¶ªe
 * ssd->·¿m‘”->
·ge_block
);

190 
ssd
->
aá”_´e_´oûss_·ges_numb”
 = ssd->
Üigš®_tÙ®_·ges_numb”
 * (1 - ssd->
·¿m‘”
->
ov”´ovide
);

192 
Ïrge¡_l¢
 = (è((
ssd
->
·¿m‘”
->
ch_num
 * ssd->·¿m‘”->
d›_ch
 * ssd->·¿m‘”->
¶ªe_d›
 *

193 
ssd
->
·¿m‘”
->
block_¶ªe
 * ssd->·¿m‘”->
·ge_block
 *

194 
ssd
->
·¿m‘”
->
sub·ge_·ge
è* (1 - ssd->·¿m‘”->
ov”´ovide
));

196 
	`fg‘s
(
bufãr_»que¡
, 200, 
ssd
->
Œaûfe
)) {

197 
	`ssÿnf
(
bufãr_»que¡
, "%Îd %d %d %d %d", &
time
, &
deviû
, &
l¢
, &
size
, &
İe
);

198 
æ
++;

199 
	`Œaû_as£¹
(
time
, 
deviû
, 
l¢
, 
size
, 
İe
);

201 
add_size
 = 0;

203 ià(
İe
 == 1)

205 
add_size
 < 
size
) {

206 
l¢
 =†¢ % 
Ïrge¡_l¢
;

207 
sub_size
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - (
l¢
 % ssd->parameter->subpage_page);

208 ià(
add_size
 + 
sub_size
 >=

209 
size
)

211 
sub_size
 = 
size
 - 
add_size
;

212 
add_size
 +ğ
sub_size
;

215 ià((
sub_size
 > 
ssd
->
·¿m‘”
->
sub·ge_·ge
) ||

216 (
add_size
 > 
size
))

218 
	`´štf
("´e_´oûs sub_size:%d\n", 
sub_size
);

227 
Ín
 = 
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

228 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 == 0)

234 
µn
 = 
	`g‘_µn_fÜ_´e_´oûss
(
ssd
, 
l¢
);

235 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
µn
);

236 
ssd
->
´og¿m_couÁ
++;

237 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
´og¿m_couÁ
++;

238 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
´og¿m_couÁ
++;

239 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
 = 
µn
;

240 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 = 
	`£t_’Œy_¡©e
(ssd, 
l¢
, 
sub_size
);

241 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
 =†pn;

242 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
v®id_¡©e
 = ssd->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
;

243 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
ä“_¡©e
 = (

244 (~
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
è& 
fuÎ_·ge
);

246 
	`ä“
(
loÿtiÚ
);

247 
loÿtiÚ
 = 
NULL
;

249 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 > 0)

251 
m­_’Œy_Ãw
 = 
	`£t_’Œy_¡©e
(
ssd
, 
l¢
, 
sub_size
);

252 
m­_’Œy_Şd
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
;

253 
modify
 = 
m­_’Œy_Ãw
 | 
m­_’Œy_Şd
;

254 
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
;

255 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
µn
);

257 
ssd
->
´og¿m_couÁ
++;

258 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
´og¿m_couÁ
++;

259 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
´og¿m_couÁ
++;

260 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
l¢
 / ssd->
·¿m‘”
->
sub·ge_·ge
].
¡©e
 = 
modify
;

261 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
v®id_¡©e
 = 
modify
;

262 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
ä“_¡©e
 = (

263 (~
modify
è& 
fuÎ_·ge
);

265 
	`ä“
(
loÿtiÚ
);

266 
loÿtiÚ
 = 
NULL
;

268 
l¢
 =†¢ + 
sub_size
;

269 
add_size
 +ğ
sub_size
;

274 
	`´štf
("\n");

275 
	`´štf
("pre_process is complete!\n");

277 
	`fşo£
(
ssd
->
Œaûfe
);

279 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++){

280 
l
 = 0;† < 
‹mp_ch_chªÃl
;†++){

281 
j
 = 0; j < 
ssd
->
·¿m‘”
->
d›_ch
; j++){

282 
k
 = 0; k < 
ssd
->
·¿m‘”
->
¶ªe_d›
; k++){

283 
	`årštf
(
ssd
->
ouutfe
, "chªÃÈ%d, ch:%d, d›:%d,…ÏÃ:%d havä“…age: %d\n", 
i
, 
l
, 
j
, 
k
,

284 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
ä“_·ge
);

285 
ssd
->
aá”_´e_´oûs£_ªd_aged_·ges_numb”
 +ğssd->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
ä“_·ge
;

286 
	`fæush
(
ssd
->
ouutfe
);

291  
ssd
;

292 
	}
}

298 
	$g‘_µn_fÜ_´e_´oûss
(
ssd_šfo
 *
ssd
, 
l¢
) {

299 
chªÃl
 = 0, 
ch
 = 0, 
d›
 = 0, 
¶ªe
 = 0;

300 
µn
, 
Ín
;

301 
aùive_block
;

302 
chªÃl_num
 = 0, 
ch_num
 = 0, 
d›_num
 = 0, 
¶ªe_num
 = 0;

304 #ifdeà
DEBUG


305 
	`´štf
("enter get_psn_for_pre_process\n");

308 
chªÃl_num
 = 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

309 
ch_num
 = 
ssd
->
·¿m‘”
->
ch_chªÃl
[0];

310 
d›_num
 = 
ssd
->
·¿m‘”
->
d›_ch
;

311 
¶ªe_num
 = 
ssd
->
·¿m‘”
->
¶ªe_d›
;

312 
Ín
 = 
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

314 ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 0)

316 ià(
ssd
->
·¿m‘”
->
dyÇmic_®loÿtiÚ
 ==

319 
chªÃl
 = 
ssd
->
tok’
;

320 
ssd
->
tok’
 = (ssd->tok’ + 1è% ssd->
·¿m‘”
->
chªÃl_numb”
;

321 
ch
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
;

322 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 = (
ch
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[0];

323 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

324 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

325 
¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

326 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = (
¶ªe
 + 1è% ssd->
·¿m‘”
->
¶ªe_d›
;

327 } ià(
ssd
->
·¿m‘”
->
dyÇmic_®loÿtiÚ
 ==

330 
chªÃl
 = 
Ín
 % 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

331 
ch
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
;

332 
ssd
->
chªÃl_h—d
[
chªÃl
].
tok’
 = (
ch
 + 1è% ssd->
·¿m‘”
->
ch_chªÃl
[0];

333 
d›
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
;

334 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
tok’
 = (
d›
 + 1è% ssd->
·¿m‘”
->
d›_ch
;

335 
¶ªe
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
;

336 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
tok’
 = (
¶ªe
 + 1è% ssd->
·¿m‘”
->
¶ªe_d›
;

338 } ià(
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 1)

340 
ssd
->
·¿m‘”
->
¡©ic_®loÿtiÚ
) {

343 
chªÃl
 = (
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
ch_num
)è% 
chªÃl_num
;

344 
ch
 = 
Ín
 % 
ch_num
;

345 
d›
 = (
Ín
 / 
ch_num
è% 
d›_num
;

346 
¶ªe
 = (
Ín
 / (
d›_num
 * 
ch_num
)è% 
¶ªe_num
;

350 
chªÃl
 = 
Ín
 % 
chªÃl_num
;

351 
ch
 = (
Ín
 / 
chªÃl_num
è% 
ch_num
;

352 
d›
 = (
Ín
 / (
ch_num
 * 
chªÃl_num
)è% 
d›_num
;

353 
¶ªe
 = (
Ín
 / (
d›_num
 * 
ch_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

358 
chªÃl
 = 
Ín
 % 
chªÃl_num
;

359 
ch
 = (
Ín
 / (
¶ªe_num
 * 
chªÃl_num
)è% 
ch_num
;

360 
d›
 = (
Ín
 / (
¶ªe_num
 * 
ch_num
 * 
chªÃl_num
)è% 
d›_num
;

361 
¶ªe
 = (
Ín
 / 
chªÃl_num
è% 
¶ªe_num
;

365 
chªÃl
 = 
Ín
 % 
chªÃl_num
;

366 
ch
 = (
Ín
 / (
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

367 
d›
 = (
Ín
 / 
chªÃl_num
è% 
d›_num
;

368 
¶ªe
 = (
Ín
 / (
d›_num
 * 
ch_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

372 
chªÃl
 = 
Ín
 % 
chªÃl_num
;

373 
ch
 = (
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

374 
d›
 = (
Ín
 / (
¶ªe_num
 * 
chªÃl_num
)è% 
d›_num
;

375 
¶ªe
 = (
Ín
 / 
chªÃl_num
è% 
¶ªe_num
;

380 
chªÃl
 = 
Ín
 % 
chªÃl_num
;

381 
ch
 = (
Ín
 / (
¶ªe_num
 * 
d›_num
 * 
chªÃl_num
)è% 
ch_num
;

382 
d›
 = (
Ín
 / 
chªÃl_num
è% 
d›_num
;

383 
¶ªe
 = (
Ín
 / (
d›_num
 * 
chªÃl_num
)è% 
¶ªe_num
;

396 #ifdeà
DEBUG


397 
	`´štf
("ªd g‘ chªÃÈ%d,ch %d, d› %d,…ÏÃ %d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

400 ià(
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
è=ğ
FAILURE
) {

401 
	`´štf
("the„ead operation isƒxpandhe capacity of SSD\n");

404 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

405 ià(
	`wr™e_·ge
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
aùive_block
, &
µn
è=ğ
ERROR
) {

409  
µn
;

410 
	}
}

417 
ssd_šfo
 *

418 
	$g‘_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

419 
sub_»que¡
 *
sub
) {

420 
Şd_µn
 = -1;

421 
µn
, 
Ín
, 
fuÎ_·ge
;

422 
aùive_block
;

423 
block
;

424 
·ge
, 
æag
 = 0, 
æag1
 = 0;

425 
Şd_¡©e
 = 0, 
¡©e
 = 0, 
cİy_sub·ge
 = 0;

426 
loÿl
 *
loÿtiÚ
;

427 
dœeù_”a£
 *
dœeù_”a£_node
, *
Ãw_dœeù_”a£
;

428 
gc_İ”©iÚ
 *
gc_node
;

430 
th»shŞd_·ge
 = 0;

431 
i
 = 0, 
j
 = 0, 
k
 = 0, 
l
 = 0, 
m
 = 0, 
n
 = 0;

433 #ifdeà
DEBUG


434 
	`´štf
("’‹¸g‘_µn,chªÃl:%d, ch:%d, d›:%d,…ÏÃ:%d\n",
chªÃl
,
ch
,
d›
,
¶ªe
);

437 
fuÎ_·ge
 = ~(0xfffffffà<< (
ssd
->
·¿m‘”
->
sub·ge_·ge
));

438 
Ín
 = 
sub
->lpn;

444 ià(
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
è=ğ
FAILURE
) {

445 
	`´štf
("ERROR :th”i nØä“…agš chªÃl:%d, ch:%d, d›:%d,…ÏÃ:%d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

446  
ssd
;

449 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

450 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
++;

451 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
ä“_·ge_num
--;

453 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
 >

455 
	`´štf
("error!he†ast write…age†argerhan 64!!\n");

459 
block
 = 
aùive_block
;

460 
·ge
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
;

462 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 ==

465 ià(
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
 != 0) {

466 
	`´štf
("new†ogical, Error in get_ppn()\n");

468 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
 = 
	`fšd_µn
(ssd, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
);

469 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 = 
sub
->state;

472 
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
;

473 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
µn
);

474 ià(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
 !=

475 
Ín
) {

476 
	`´štf
("\nchªglogiÿl,E¼Ü iÀg‘_µn(), m­bË.µÀi %d,…ag§ved…² i %d, wrÚg†oÿtiÚ chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d,…ag%d\n", 
µn
,
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
,†ocation->channel,†ocation->chip,†ocation->die,†ocation->plane,†ocation->block,†ocation->page);

479 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
v®id_¡©e
 = 0;

480 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
ä“_¡©e
 = 0;

481 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
 = 0;

482 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
šv®id_·ge_num
++;

487 ià(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
šv®id_·ge_num
 ==

488 
ssd
->
·¿m‘”
->
·ge_block
) {

489 
Ãw_dœeù_”a£
 = (
dœeù_”a£
 *è
	`m®loc
((direct_erase));

490 
	`®loc_as£¹
(
Ãw_dœeù_”a£
, "new_direct_erase");

491 
	`mem£t
(
Ãw_dœeù_”a£
, 0, (
dœeù_”a£
));

493 
Ãw_dœeù_”a£
->
block
 = 
loÿtiÚ
->block;

494 
Ãw_dœeù_”a£
->
Ãxt_node
 = 
NULL
;

495 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
;

496 ià(
dœeù_”a£_node
 =ğ
NULL
) {

497 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

499 
Ãw_dœeù_”a£
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
;

500 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
”a£_node
 = 
Ãw_dœeù_”a£
;

504 
	`ä“
(
loÿtiÚ
);

505 
loÿtiÚ
 = 
NULL
;

506 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
 = 
	`fšd_µn
(ssd, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
);

507 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 = (ssd->d¿m->m­->m­_’Œy[Ín].¡©| 
sub
->state);

511 
sub
->
µn
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
;

512 
sub
->
loÿtiÚ
->
chªÃl
 = channel;

513 
sub
->
loÿtiÚ
->
ch
 = chip;

514 
sub
->
loÿtiÚ
->
d›
 = die;

515 
sub
->
loÿtiÚ
->
¶ªe
 =…lane;

516 
sub
->
loÿtiÚ
->
block
 = 
aùive_block
;

517 
sub
->
loÿtiÚ
->
·ge
 =…age;

519 
ssd
->
´og¿m_couÁ
++;

520 
ssd
->
chªÃl_h—d
[
chªÃl
].
´og¿m_couÁ
++;

521 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
´og¿m_couÁ
++;

522 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
--;

523 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
·ge
].
Ín
 =†pn;

524 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
·ge
].
v®id_¡©e
 = 
sub
->
¡©e
;

525 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
·ge
].
ä“_¡©e
 = (

526 (~(
sub
->
¡©e
)è& 
fuÎ_·ge
);

527 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
·ge
].
wr™‹n_couÁ
++;

528 
ssd
->
wr™e_æash_couÁ
++;

530 ià(
ssd
->
·¿m‘”
->
aùive_wr™e
 ==

534 
th»shŞd_·ge
 = (
ssd
->
·¿m‘”
->
·ge_block
è* (ssd->·¿m‘”->
block_¶ªe
è* (ssd->·¿m‘”->
gc_h¬d_th»shŞd
);

535 #ifdeà
DEBUG


537 
	`´štf
("opps, must be here!! for‚o‡ctive_write.now is in‚o‡ctive_write strategy\n");

541 
	`´štf
("wh’‚Üm® wr™ev”ytimu£ oÃ…ag wÈ»pÜˆ¶ªe' ä“_·ga fŞlow: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d,…ag%d, f»e_·g%d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
, 
ssd
->
chªÃl_h—d
[chªÃl].
ch_h—d
[ch].
d›_h—d
[d›].
¶ªe_h—d
[¶ªe].
ä“_·ge
);

545 if(
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 !ğ
NULL
){

547 
	`´štf
("lxc, here will stopo move‡head,will„eturn. in channel GC\n");

548  
ssd
;

551 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
 <

554 
gc_node
 = (
gc_İ”©iÚ
 *è
	`m®loc
((gc_operation));

555 
	`®loc_as£¹
(
gc_node
, "gc_node");

556 
	`mem£t
(
gc_node
, 0, (
gc_İ”©iÚ
));

558 
gc_node
->
Ãxt_node
 = 
NULL
;

559 
gc_node
->
ch
 = chip;

560 
gc_node
->
d›
 = die;

561 
gc_node
->
¶ªe
 =…lane;

562 
gc_node
->
block
 = 0xffffffff;

563 
gc_node
->
·ge
 = 0;

564 
gc_node
->
¡©e
 = 
GC_WAIT
;

565 
gc_node
->
´iÜ™y
 = 
GC_UNINTERRUPT
;

566 
gc_node
->
Ãxt_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

570 
gc_node
->
cİy_·ge_numb”
 = -1;

571 
gc_node
->
cİy_v®id_numb”
 = -1;

572 
gc_node
->
pos_š_cİy
 = -1;

573 
gc_node
->
»ad
 = 1;

574 
gc_node
->
wr™e
 = 0;

575 
gc_node
->
”a£
 = -1;

576 
gc_node
->
viùim_block_numb”
 = -1;

577 
gc_node
->
gc_»ad_šÃr
 = -1;

578 
gc_node
->
gc_wr™e_šÃr
 = -1;

579 
gc_node
->
»ad_wr™e_’d
 = -1;

580 
gc_node
->
viùim_block_ä“·ge_¡©i¡ic
 = -1;

581 
gc_node
->
Ï¡_·ge_š_viùim_d—l
 = -1;

582 
gc_node
->
ch_Ãxt_´ediù_time_diff
 = 0;

583 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 = 
gc_node
;

584 
ssd
->
gc_»que¡
++;

587 
	`´štf
("GC will happen‡t once!\n");

588 #ifdeà
DEBUGONLYGC


589 
	`´štf
("GC happen‚ow!\n");

590 
	`´štf_gc_node_šfÜm©iÚ
 (
gc_node
);

595 #ifdeà
DEBUG


597 
	`´štf
("nÜm® g‘_µÀ' gc_nodcÚ‹Á,%x\n", 
ssd
->
gc_»que¡
);

598 
	`´štf_ssd_gc_node
(
ssd
);

604  
ssd
;

605 
	}
}

612 
	$g‘_µn_fÜ_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
) {

613 
µn
;

614 
aùive_block
, 
block
, 
·ge
;

616 #ifdeà
DEBUG


617 
	`´štf
("’‹¸g‘_µn_fÜ_gc,chªÃl:%d, ch:%d, d›:%d,…ÏÃ:%d\n",
chªÃl
,
ch
,
d›
,
¶ªe
);

620 ià(
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
è!ğ
SUCCESS
) {

621 
	`´štf
("\n\nlxc Error int get_ppn_for_gc().\n");

625 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

627 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
++;

628 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
ä“_·ge_num
--;

630 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
 >

632 
	`´štf
("error!he†ast write…age†argerhan 64!!\n");

636 
block
 = 
aùive_block
;

637 
·ge
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
Ï¡_wr™e_·ge
;

639 
µn
 = 
	`fšd_µn
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
·ge
);

641 
ssd
->
´og¿m_couÁ
++;

642 
ssd
->
chªÃl_h—d
[
chªÃl
].
´og¿m_couÁ
++;

643 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
´og¿m_couÁ
++;

644 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
--;

645 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
aùive_block
].
·ge_h—d
[
·ge
].
wr™‹n_couÁ
++;

646 
ssd
->
wr™e_æash_couÁ
++;

647 #ifdeà
DEBUGONLYGC


648 
	`´štf
("wh’ gøg‘hÃw…², chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
);

650  
µn
;

652 
	}
}

661 
Stus


662 
	$”a£_İ”©iÚ
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

663 
block
) {

664 
i
 = 0;

665 #ifdeà
DEBUG


666 
	`´štf
("nowƒ¿£ chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d \n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
);

669 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
ä“_·ge_num
 = ssd->
·¿m‘”
->
·ge_block
;

670 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
šv®id_·ge_num
 = 0;

671 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
Ï¡_wr™e_·ge
 = -1;

672 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
”a£_couÁ
++;

673 
i
 = 0; i < 
ssd
->
·¿m‘”
->
·ge_block
; i++) {

674 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
i
].
ä“_¡©e
 = 
PG_SUB
;

675 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
i
].
v®id_¡©e
 = 0;

676 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
block
].
·ge_h—d
[
i
].
Ín
 = -1;

678 
ssd
->
”a£_couÁ
++;

679 
ssd
->
chªÃl_h—d
[
chªÃl
].
”a£_couÁ
++;

680 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
”a£_couÁ
++;

681 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
ä“_·ge
 +ğssd->
·¿m‘”
->
·ge_block
;

683  
SUCCESS
;

685 
	}
}

691 
Stus


692 
	$”a£_¶ªes
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›1
, 
¶ªe1
,

693 
commªd
) {

694 
d›
 = 0;

695 
¶ªe
 = 0;

696 
block
 = 0;

697 
dœeù_”a£
 *
dœeù_”a£_node
 = 
NULL
;

698 
block0
 = 0xffffffff;

699 
block1
 = 0;

701 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe1
].
”a£_node
 =ğ
NULL
) ||

702 ((
commªd
 !ğ
INTERLEAVE_TWO_PLANE
è&& (commªd !ğ
INTERLEAVE
è&& (commªd !ğ
TWO_PLANE
) &&

703 (
commªd
 !ğ
NORMAL
)))

705  
ERROR
;

712 
block1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe1
].
”a£_node
->
block
;

714 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_TRANSFER
;

715 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

716 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

718 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_ERASE_BUSY
;

719 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

720 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

722 ià(
commªd
 =ğ
INTERLEAVE_TWO_PLANE
)

724 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

725 
block0
 = 0xffffffff;

726 ià(
d›
 =ğ
d›1
) {

727 
block0
 = 
block1
;

729 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

730 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

731 ià(
dœeù_”a£_node
 !ğ
NULL
) {

733 
block
 = 
dœeù_”a£_node
->block;

735 ià(
block0
 == 0xffffffff) {

736 
block0
 = 
block
;

738 ià(
block
 !ğ
block0
) {

743 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 = 
dœeù_”a£_node
->
Ãxt_node
;

744 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
);

745 
	`ä“
(
dœeù_”a£_node
);

746 
dœeù_”a£_node
 = 
NULL
;

747 
ssd
->
dœeù_”a£_couÁ
++;

753 
ssd
->
š‹¾—ve_m¶ªe_”a£_couÁ
++;

754 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

755 
ssd
->
cu¼’t_time
 + 18 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

756 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWB
;

757 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

758 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 - 9 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

759 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
;

761 } ià(
commªd
 =ğ
INTERLEAVE
)

763 
d›
 = 0; d› < 
ssd
->
·¿m‘”
->
d›_ch
; die++) {

764 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

765 ià(
d›
 =ğ
d›1
) {

766 
¶ªe
 = 
¶ªe1
;

768 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

769 ià(
dœeù_”a£_node
 !ğ
NULL
) {

770 
block
 = 
dœeù_”a£_node
->block;

771 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 = 
dœeù_”a£_node
->
Ãxt_node
;

772 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
);

773 
	`ä“
(
dœeù_”a£_node
);

774 
dœeù_”a£_node
 = 
NULL
;

775 
ssd
->
dœeù_”a£_couÁ
++;

780 
ssd
->
š‹¾—ve_”a£_couÁ
++;

781 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

782 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

783 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

784 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
;

785 } ià(
commªd
 =ğ
TWO_PLANE
)

788 
¶ªe
 = 0;…ÏÃ < 
ssd
->
·¿m‘”
->
¶ªe_d›
;…lane++) {

789 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

790 ià((
dœeù_”a£_node
 !ğ
NULL
)) {

791 
block
 = 
dœeù_”a£_node
->block;

792 ià(
block
 =ğ
block1
) {

793 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 = 
dœeù_”a£_node
->
Ãxt_node
;

794 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›1
, 
¶ªe
, 
block
);

795 
	`ä“
(
dœeù_”a£_node
);

796 
dœeù_”a£_node
 = 
NULL
;

797 
ssd
->
dœeù_”a£_couÁ
++;

802 
ssd
->
m¶ªe_”a£_cÚut
++;

803 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

804 
ssd
->
cu¼’t_time
 + 14 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

805 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

806 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
;

807 } ià(
commªd
 =ğ
NORMAL
)

809 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe1
].
”a£_node
;

810 
block
 = 
dœeù_”a£_node
->block;

811 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe1
].
”a£_node
 = 
dœeù_”a£_node
->
Ãxt_node
;

812 
	`ä“
(
dœeù_”a£_node
);

813 
dœeù_”a£_node
 = 
NULL
;

814 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›1
, 
¶ªe1
, 
block
);

816 
ssd
->
dœeù_”a£_couÁ
++;

817 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

818 
ssd
->
cu¼’t_time
 + 5 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

819 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

820 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWB
 +

821 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
;

823  
ERROR
;

826 
dœeù_”a£_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›1
].
¶ªe_h—d
[
¶ªe1
].
”a£_node
;

828 ià(((
dœeù_”a£_node
è!ğ
NULL
è&& (dœeù_”a£_node->
block
 =ğ
block1
)) {

829  
FAILURE
;

831  
SUCCESS
;

833 
	}
}

848 
	$gc_dœeù_”a£
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
) {

849 
lv_d›
 = 0, 
lv_¶ªe
 = 0;

850 
š‹¾—v”_æag
 = 
FALSE
, 
mut_¶ªe_æag
 = FALSE;

851 
nÜm®_”a£_æag
 = 
TRUE
;

853 
dœeù_”a£
 *
dœeù_”a£_node1
 = 
NULL
;

854 
dœeù_”a£
 *
dœeù_”a£_node2
 = 
NULL
;

856 
dœeù_”a£_node1
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

857 ià(
dœeù_”a£_node1
 =ğ
NULL
) {

858  
FAILURE
;

865 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE) {

866 
lv_¶ªe
 = 0;†v_¶ª< 
ssd
->
·¿m‘”
->
¶ªe_d›
;†v_plane++) {

867 
dœeù_”a£_node2
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
;

868 ià((
lv_¶ªe
 !ğ
¶ªe
è&& (
dœeù_”a£_node2
 !ğ
NULL
)) {

869 ià((
dœeù_”a£_node1
->
block
è=ğ(
dœeù_”a£_node2
->block)) {

870 
mut_¶ªe_æag
 = 
TRUE
;

881 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE) {

882 
lv_d›
 = 0;†v_d› < 
ssd
->
·¿m‘”
->
d›_ch
;†v_die++) {

883 ià(
lv_d›
 !ğ
d›
) {

884 
lv_¶ªe
 = 0;†v_¶ª< 
ssd
->
·¿m‘”
->
¶ªe_d›
;†v_plane++) {

885 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
”a£_node
 !ğ
NULL
) {

886 
š‹¾—v”_æag
 = 
TRUE
;

891 ià(
š‹¾—v”_æag
 =ğ
TRUE
) {

903 ià((
mut_¶ªe_æag
 =ğ
TRUE
è&& (
š‹¾—v”_æag
 == TRUE) &&

904 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE) &&

905 ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE)) {

906 ià(
	`”a£_¶ªes
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
INTERLEAVE_TWO_PLANE
è=ğ
SUCCESS
) {

907  
SUCCESS
;

909 } ià((
š‹¾—v”_æag
 =ğ
TRUE
è&& ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_INTERLEAVE
) == AD_INTERLEAVE)) {

910 ià(
	`”a£_¶ªes
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
INTERLEAVE
è=ğ
SUCCESS
) {

911  
SUCCESS
;

913 } ià((
mut_¶ªe_æag
 =ğ
TRUE
è&& ((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_TWOPLANE
) == AD_TWOPLANE)) {

914 ià(
	`”a£_¶ªes
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
TWO_PLANE
è=ğ
SUCCESS
) {

915  
SUCCESS
;

919 ià((
nÜm®_”a£_æag
 ==

920 
TRUE
))

922 ià(
	`”a£_¶ªes
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
NORMAL
è=ğ
SUCCESS
) {

923  
SUCCESS
;

925  
FAILURE
;

928  
SUCCESS
;

929 
	}
}

932 
Stus
 
	$move_·ge
(
ssd_šfo
 *
ssd
, 
loÿl
 *
loÿtiÚ
, *
Œªsãr_size
) {

933 
loÿl
 *
Ãw_loÿtiÚ
 = 
NULL
;

934 
ä“_¡©e
 = 0, 
v®id_¡©e
 = 0;

935 
Ín
 = 0, 
Şd_µn
 = 0, 
µn
 = 0;

937 
Ín
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].lpn;

938 
v®id_¡©e
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].valid_state;

939 
ä“_¡©e
 = 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].free_state;

940 
Şd_µn
 = 
	`fšd_µn
(
ssd
, 
loÿtiÚ
->
chªÃl
,†oÿtiÚ->
ch
,†oÿtiÚ->
d›
,†oÿtiÚ->
¶ªe
,†oÿtiÚ->
block
,

941 
loÿtiÚ
->
·ge
);

942 
µn
 = 
	`g‘_µn_fÜ_gc
(
ssd
, 
loÿtiÚ
->
chªÃl
,†oÿtiÚ->
ch
,†oÿtiÚ->
d›
,

943 
loÿtiÚ
->
¶ªe
);

945 
Ãw_loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
,

946 
µn
);

948 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_COPYBACK
) == AD_COPYBACK) {

949 ià(
ssd
->
·¿m‘”
->
g»ed_CB_ad
 ==

952 
ssd
->
cİy_back_couÁ
++;

953 
ssd
->
gc_cİy_back
++;

954 
Şd_µn
 % 2 !ğ
µn
 % 2) {

955 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
ä“_¡©e
 = 0;

956 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
Ín
 = 0;

957 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
v®id_¡©e
 = 0;

958 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
šv®id_·ge_num
++;

960 
	`ä“
(
Ãw_loÿtiÚ
);

961 
Ãw_loÿtiÚ
 = 
NULL
;

963 
µn
 = 
	`g‘_µn_fÜ_gc
(
ssd
, 
loÿtiÚ
->
chªÃl
,†oÿtiÚ->
ch
,†oÿtiÚ->
d›
,

964 
loÿtiÚ
->
¶ªe
);

965 
ssd
->
´og¿m_couÁ
--;

966 
ssd
->
wr™e_æash_couÁ
--;

967 
ssd
->
wa¡e_·ge_couÁ
++;

969 ià(
Ãw_loÿtiÚ
 =ğ
NULL
) {

970 
Ãw_loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
µn
);

973 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
ä“_¡©e
 = free_state;

974 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
Ín
 =†pn;

975 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
v®id_¡©e
 = valid_state;

977 ià(
Şd_µn
 % 2 !ğ
µn
 % 2) {

978 (*
Œªsãr_size
è+ğ
	`size
(
v®id_¡©e
);

981 
ssd
->
cİy_back_couÁ
++;

982 
ssd
->
gc_cİy_back
++;

986 #ifdeà
DEBUGONLYGC


987 
	`´štf
("move_page has‚o copyback operation\n");

989 (*
Œªsãr_size
è+ğ
	`size
(
v®id_¡©e
);

991 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
ä“_¡©e
 = free_state;

992 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
Ín
 =†pn;

993 
ssd
->
chªÃl_h—d
[
Ãw_loÿtiÚ
->
chªÃl
].
ch_h—d
[Ãw_loÿtiÚ->
ch
].
d›_h—d
[Ãw_loÿtiÚ->
d›
].
¶ªe_h—d
[Ãw_loÿtiÚ->
¶ªe
].
blk_h—d
[Ãw_loÿtiÚ->
block
].
·ge_h—d
[Ãw_loÿtiÚ->
·ge
].
v®id_¡©e
 = valid_state;

996 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
ä“_¡©e
 = 0;

997 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
Ín
 = 0;

998 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
·ge_h—d
[loÿtiÚ->
·ge
].
v®id_¡©e
 = 0;

999 
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
d›_h—d
[loÿtiÚ->
d›
].
¶ªe_h—d
[loÿtiÚ->
¶ªe
].
blk_h—d
[loÿtiÚ->
block
].
šv®id_·ge_num
++;

1001 ià(
Şd_µn
 =ğ
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
)

1003 
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
²
 = 
µn
;

1006 #ifdeà
DEBUGONLYGC


1007 
	`´štf
("š GC, old†oÿtiÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d,…ag%d chªgtØÃw†oÿtiÚ: chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d,…ag%d \n", 
loÿtiÚ
->
chªÃl
,†oÿtiÚ->
ch
,†oÿtiÚ->
d›
,†oÿtiÚ->
¶ªe
,†oÿtiÚ->
block
,†oÿtiÚ->
·ge
, 
Ãw_loÿtiÚ
->channel,‚ew_location->chip,‚ew_location->die,‚ew_location->plane,‚ew_location->block,‚ew_location->page );

1009 
	`ä“
(
Ãw_loÿtiÚ
);

1010 
Ãw_loÿtiÚ
 = 
NULL
;

1012  
SUCCESS
;

1013 
	}
}

1118 
	$unš‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
) {

1119 
i
 = 0, 
šv®id_·ge
 = 0;

1120 
block
, 
aùive_block
, 
Œªsãr_size
, 
ä“_·ge
, 
·ge_move_couÁ
 = 0;

1121 
loÿl
 *
loÿtiÚ
 = 
NULL
;

1122 
tÙ®_šv®id_·ge_num
 = 0;

1124 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
;

1125 
gc_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

1126 
cu¼’t_¡©e
 = 0, 
Ãxt_¡©e
 = 0;

1127 
Ãxt_¡©e_´ediù_time
 = 0;

1130 if(
ssd
->
debug_sign
 == 1){

1141 #ifdeà
DEBUG


1142 
	`´štf
("begin go into uninterrupt_gc\n");

1147 ià(
gc_node
 !ğ
NULL
) {

1148 #ifdeà
DEBUG


1149 
	`´štf
("gc must be unNULL sincehis ishe channel gc.\n");

1152 
cu¼’t_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].current_state;

1153 
Ãxt_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].next_state;

1154 
Ãxt_¡©e_´ediù_time
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].next_state_predict_time;

1165 if(
gc_node
->
viùim_block_numb”
 == -1){

1166 ià(
	`fšd_aùive_block
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
) !=

1167 
SUCCESS
)

1169 
	`´štf
("\n\n Error in uninterrupt_gc().\n");

1170  
ERROR
;

1172 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

1174 
šv®id_·ge
 = 0;

1175 
Œªsãr_size
 = 0;

1176 
block
 = -1;

1177 
i
 = 0; i <

1178 
ssd
->
·¿m‘”
->
block_¶ªe
; 
i
++)

1180 
tÙ®_šv®id_·ge_num
 +ğ
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
i
].
šv®id_·ge_num
;

1181 ià((
aùive_block
 !ğ
i
) &&

1182 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
i
].
šv®id_·ge_num
 >

1183 
šv®id_·ge
)) {

1184 
šv®id_·ge
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
i
].
šv®id_·ge_num
;

1185 
block
 = 
i
;

1189 #ifdeà
DEBUGONLYGC


1190 
	`´štf
("ev”yGC oÆy choo£ onû block fÜ viùim.thi block iÀ chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d, ha  inv®id_·ge_num %d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
i
, 
šv®id_·ge
);

1196 ià(
block
 == -1) {

1199 
gc_node
->
viùim_block_numb”
 = 
block
;

1200 
gc_node
->
block
 = block;

1203 #ifdeà
DEBUGONLYGC


1204 
	`´štf_gc_node_šfÜm©iÚ
 (
gc_node
);

1210 ià((
gc_node
->
»ad_wr™e_’d
 !ğ0è&& ((
cu¼’t_¡©e
 =ğ
CHIP_IDLE
è|| ((
Ãxt_¡©e
 =ğCHIP_IDLEè&& (
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
)))){

1213 ifĞ(
gc_node
->
»ad
 =ğ1è&& (gc_node->
wr™e
 =ğ0è&& (gc_node->
gc_»ad_šÃr
 == -1)) {

1215 
gc_node
->
cİy_·ge_numb”
 ++;

1216 #ifdeà
DEBUG


1217 
	`´štf
("h”»ad wÈbegš‡‚ew…age, sØ·gnumb” ++ ,thÃw…agi %d\n",
gc_node
->
cİy_·ge_numb”
);

1219 
i
 = 
gc_node
->
cİy_·ge_numb”
; i <

1220 
ssd
->
·¿m‘”
->
·ge_block
; 
i
++ )

1224 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
viùim_block_numb”
].
·ge_h—d
[
i
].
ä“_¡©e
 &

1225 
PG_SUB
) == 0xffffffff) {

1226 
gc_node
->
viùim_block_ä“·ge_¡©i¡ic
 ++;

1228 ià(
gc_node
->
viùim_block_ä“·ge_¡©i¡ic
 != -1) {

1229 
	`´štf
("\ÁoØmuch f»·ge. \ˆ%d\ˆ.%d\t%d\t%d\t%d\t\n", 
gc_node
->
viùim_block_ä“·ge_¡©i¡ic
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

1231 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
viùim_block_numb”
].
·ge_h—d
[
i
].
v®id_¡©e
 >

1249 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_GC
;

1250 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

1251 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

1252 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_GC_RW_BUSY
;

1253 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1254 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_GC_RW_BUSY
;

1255 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + (7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
);

1256 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->channel_head[channel].next_state_predict_time ;

1259 
gc_node
->
cİy_v®id_numb”
 = 
i
;

1260 
gc_node
->
cİy_·ge_numb”
 = gc_node->
cİy_v®id_numb”
 ;

1261 
gc_node
->
gc_»ad_šÃr
 = 0;

1262 #ifdeà
DEBUG


1263 
	`´štf
("ev”ytimthviùim chªÃÈ%d,ch %d, d› %d,…ÏÃ %d, block %d…ag%d, , v®id_¡©%d\n",
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
block
, 
i
, 
ssd
->
chªÃl_h—d
[chªÃl].
ch_h—d
[ch].
d›_h—d
[d›].
¶ªe_h—d
[¶ªe].
blk_h—d
[
gc_node
->
viùim_block_numb”
].
·ge_h—d
[i].
v®id_¡©e
);

1266 if(
i
 =ğ((
ssd
->
·¿m‘”
->
·ge_block
) - 1)){

1267 
gc_node
->
Ï¡_·ge_š_viùim_d—l
 = 0;

1278 if(
i
 =ğ((
ssd
->
·¿m‘”
->
·ge_block
) - 1)){

1281 
gc_node
->
»ad_wr™e_’d
 = 0;

1282 #ifdeà
DEBUG


1283 
	`´štf
("˜i %d, m—n thÏ¡ f»•age,dÚ'ˆdØcİyback,‚ow gØtØthbegššg oà”a£\n", 
i
);

1295 ifĞ(
gc_node
->
»ad
 =ğ0è&& (gc_node->
wr™e
 =ğ1è&& (gc_node->
gc_wr™e_šÃr
 == -1)) {

1296 #ifdeà
DEBUG


1297 
	`´štf
("gøwr™pha£, wr™™”©iÚ i %d,\n", 
gc_node
->
wr™e
);

1299 
i
 = 
gc_node
->
cİy_·ge_numb”
;

1302 #ifdeà
DEBUG


1303 
	`´štf
("GCwr™chªÃÈ%d, ch %d, d› %d,…ÏÃ %d, block %d,…ag%d, v®id_¡©i %d\n", 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
gc_node
->
viùim_block_numb”
, gc_node->
cİy_v®id_numb”
,
ssd
->
chªÃl_h—d
[chªÃl].
ch_h—d
[ch].
d›_h—d
[d›].
¶ªe_h—d
[¶ªe].
blk_h—d
[gc_node->viùim_block_numb”].
·ge_h—d
[gc_node->cİy_v®id_numb”].
v®id_¡©e
 );

1307 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
viùim_block_numb”
].
·ge_h—d
[gc_node->
cİy_v®id_numb”
].
v®id_¡©e
 >

1324 #ifdeà
DEBUG


1325 
	`´štf
("gc_node->cİy_·ge_numb” i %d, i i %d,they‡»h§me\n",
gc_node
->
cİy_·ge_numb”
, 
i
);

1330 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_GC
;

1331 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

1332 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

1333 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_GC_RW_BUSY
;

1334 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1335 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_GC_RW_BUSY
;

1336 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + (7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
);

1337 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->channel_head[channel].next_state_predict_time ;

1339 
gc_node
->
gc_wr™e_šÃr
 = 0;

1356 iàĞ(
cu¼’t_¡©e
 =ğ
CHIP_IDLE
è|| ((
Ãxt_¡©e
 =ğCHIP_IDLEè&& (
Ãxt_¡©e_´ediù_time
 <ğ
ssd
->
cu¼’t_time
))){

1357 ià(
gc_node
->
»ad_wr™e_’d
 == 0) {

1359 if(
gc_node
->
”a£
 == -1) {

1360 #ifdeà
DEBUG


1361 
	`´štf
("gø”a£…ha£,ƒ¿£ i‹¿tiÚ i %d,\n", 
gc_node
->
”a£
);

1377 #ifdeà
DEBUG


1378 
	`´štf
("gc_node->cİy_·ge_numb” i %d, iˆi th’d oà»ad_Œªsãr_wr™ªdhbegš oàth”a£‚ow\n",
gc_node
->
cİy_·ge_numb”
);

1381 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_GC
;

1382 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

1383 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

1384 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_ERASE_BUSY
;

1385 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1386 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_ERASE_BUSY
;

1387 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 + (5 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
);

1388 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 = ssd->channel_head[channel].next_state_predict_time ;

1392 
gc_node
->
”a£
 = 0;

1405 
	}
}

1512 
	$š‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

1513 
gc_İ”©iÚ
 *
gc_node
) {

1514 
i
, 
block
, 
aùive_block
, 
Œªsãr_size
, 
šv®id_·ge
 = 0;

1515 
loÿl
 *
loÿtiÚ
;

1517 
aùive_block
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].active_block;

1518 
Œªsãr_size
 = 0;

1519 ià(
gc_node
->
block
 >ğ
ssd
->
·¿m‘”
->
block_¶ªe
) {

1520 
i
 = 0; i < 
ssd
->
·¿m‘”
->
block_¶ªe
; i++) {

1521 ià((
aùive_block
 !ğ
i
) &&

1522 (
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
i
].
šv®id_·ge_num
 >

1523 
šv®id_·ge
)) {

1524 
šv®id_·ge
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
i
].
šv®id_·ge_num
;

1525 
block
 = 
i
;

1528 
gc_node
->
block
 = block;

1531 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
block
].
šv®id_·ge_num
 !=

1532 
ssd
->
·¿m‘”
->
·ge_block
)

1534 
i
 = 
gc_node
->
·ge
; i < 
ssd
->
·¿m‘”
->
·ge_block
; i++) {

1535 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
block
].
·ge_h—d
[
i
].
v®id_¡©e
 >

1537 
loÿtiÚ
 = (
loÿl
 *è
	`m®loc
((local));

1538 
	`®loc_as£¹
(
loÿtiÚ
, "location");

1539 
	`mem£t
(
loÿtiÚ
, 0, (
loÿl
));

1541 
loÿtiÚ
->
chªÃl
 = channel;

1542 
loÿtiÚ
->
ch
 = chip;

1543 
loÿtiÚ
->
d›
 = die;

1544 
loÿtiÚ
->
¶ªe
 =…lane;

1545 
loÿtiÚ
->
block
 = block;

1546 
loÿtiÚ
->
·ge
 = 
i
;

1547 
Œªsãr_size
 = 0;

1549 
	`move_·ge
(
ssd
, 
loÿtiÚ
, &
Œªsãr_size
);

1551 
	`ä“
(
loÿtiÚ
);

1552 
loÿtiÚ
 = 
NULL
;

1554 
gc_node
->
·ge
 = 
i
 + 1;

1555 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
d›_h—d
[
d›
].
¶ªe_h—d
[
¶ªe
].
blk_h—d
[
gc_node
->
block
].
šv®id_·ge_num
++;

1556 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_C_A_TRANSFER
;

1557 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

1558 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

1559 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_COPYBACK_BUSY
;

1560 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1561 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1563 ià((
ssd
->
·¿m‘”
->
advªûd_commªds
 & 
AD_COPYBACK
) == AD_COPYBACK) {

1564 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

1565 
ssd
->
cu¼’t_time
 + 7 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

1566 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 + 7 * ssd->·¿m‘”->time_ch¬aù”i¡ics.
tWC
;

1567 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

1568 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 +

1569 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

1571 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 = ssd->
cu¼’t_time
 +

1572 (7 + 
Œªsãr_size
 * 
SECTOR
) *

1573 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
 +

1574 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tR
 +

1575 (7 + 
Œªsãr_size
 * 
SECTOR
) *

1576 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

1577 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

1578 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 +

1579 
ssd
->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tPROG
;

1585 
	`”a£_İ”©iÚ
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
, 
gc_node
->
block
);

1587 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_¡©e
 = 
CHANNEL_C_A_TRANSFER
;

1588 
ssd
->
chªÃl_h—d
[
chªÃl
].
cu¼’t_time
 = ssd->current_time;

1589 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e
 = 
CHANNEL_IDLE
;

1590 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 =

1591 
ssd
->
cu¼’t_time
 + 5 * ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tWC
;

1593 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_¡©e
 = 
CHIP_ERASE_BUSY
;

1594 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
cu¼’t_time
 = ssd->current_time;

1595 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e
 = 
CHIP_IDLE
;

1596 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
ch
].
Ãxt_¡©e_´ediù_time
 =

1597 
ssd
->
chªÃl_h—d
[
chªÃl
].
Ãxt_¡©e_´ediù_time
 + ssd->
·¿m‘”
->
time_ch¬aù”i¡ics
.
tBERS
;

1602 
	`´štf
("there is‡…roblem in interrupt_gc\n");

1604 
	}
}

1609 
	$d–‘e_gc_node
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
gc_İ”©iÚ
 *
gc_node
) {

1610 
gc_İ”©iÚ
 *
gc_´e
 = 
NULL
;

1611 ià(
gc_node
 =ğ
NULL
) {

1612  
ERROR
;

1615 ià(
gc_node
 =ğ
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
) {

1616 #ifdeà
DEBUGONLYGC


1617 
	`´štf
("channel gc only one,so here\n");

1619 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 = 
gc_node
->
Ãxt_node
;

1621 
gc_´e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

1622 
gc_´e
->
Ãxt_node
 !ğ
NULL
) {

1623 ià(
gc_´e
->
Ãxt_node
 =ğ
gc_node
) {

1624 
gc_´e
->
Ãxt_node
 = 
gc_node
->next_node;

1627 
gc_´e
 = gc_´e->
Ãxt_node
;

1632 #ifdeà
DEBUG


1633 
	`´štf
("chªÃÈ%d, d–‘gc_nodadd»s %d\n", 
chªÃl
, 
gc_node
);

1637 
	`ä“
(
gc_node
);

1638 
gc_node
 = 
NULL
;

1639 
ssd
->
gc_»que¡
--;

1640  
SUCCESS
;

1641 
	}
}

1646 
Stus
 
	$gc_fÜ_chªÃl
(
ssd_šfo
 *
ssd
, 
chªÃl
) {

1647 
æag_dœeù_”a£
 = 1, 
æag_gc
 = 1, 
æag_švoke_gc
 = 1;

1648 
ch
, 
d›
, 
¶ªe
, 
æag_´iÜ™y
 = 0;

1649 
cu¼’t_¡©e
 = 0, 
Ãxt_¡©e
 = 0;

1650 
Ãxt_¡©e_´ediù_time
 = 0;

1651 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
, *
gc_p
 = NULL;

1658 
gc_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

1674 ià(
gc_node
->
´iÜ™y
 =ğ
GC_UNINTERRUPT
)

1676 
æag_´iÜ™y
 = 1;

1678 #ifdeà
DEBUG


1679 
	`´štf
("gc_nodi %x,‡nd fÏg_´iÜ™y(mu¡ b1èi %d.gc_nodmu¡n'ˆbNULL\n", *
gc_node
, 
æag_´iÜ™y
);

1682 ià(
æag_´iÜ™y
 != 1)

1684 #ifdeà
DEBUG


1685 
	`´štf
("errors happend in gc1 !!!\n");

1688 
gc_node
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
;

1689 
gc_node
 !ğ
NULL
) {

1690 
cu¼’t_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].current_state;

1691 
Ãxt_¡©e
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].next_state;

1692 
Ãxt_¡©e_´ediù_time
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
ch_h—d
[
gc_node
->
ch
].next_state_predict_time;

1700 
gc_node
 = gc_node->
Ãxt_node
;

1705 ià(
gc_node
 =ğ
NULL
) {

1706  
FAILURE
;

1709 
ch
 = 
gc_node
->chip;

1710 
d›
 = 
gc_node
->die;

1711 
¶ªe
 = 
gc_node
->plane;

1713 ià(
gc_node
->
´iÜ™y
 =ğ
GC_UNINTERRUPT
) {

1715 #ifdeà
DEBUG


1716 
	`´štf
("everyime gc only happen here\n");

1719 
	`unš‹¼u±_gc
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

1721  
SUCCESS
;

1747 
æag_švoke_gc
 = 
	`decide_gc_švoke
(
ssd
,

1748 
chªÃl
);

1750 ià(
æag_švoke_gc
 == 1) {

1751 
æag_dœeù_”a£
 = 
	`gc_dœeù_”a£
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

1752 ià(
æag_dœeù_”a£
 == -1) {

1753 
æag_gc
 = 
	`š‹¼u±_gc
(
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

1754 
gc_node
);

1755 ià(
æag_gc
 == 1) {

1756 
	`d–‘e_gc_node
(
ssd
, 
chªÃl
, 
gc_node
);

1758 } ià(
æag_dœeù_”a£
 == 1) {

1759 
	`d–‘e_gc_node
(
ssd
, 
chªÃl
, 
gc_node
);

1761  
SUCCESS
;

1763  
FAILURE
;

1766 
	}
}

1778 
	$gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
æag
) {

1779 
i
;

1780 
æag_dœeù_”a£
 = 1, 
æag_gc
 = 1, 
æag_švoke_gc
 = 1;

1781 
æag_´iÜ™y
 = 0;

1782 
gc_İ”©iÚ
 *
gc_node
 = 
NULL
, *
gc_p
 = NULL;

1784 ià(
æag
 == 1)

1786 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1787 
æag_´iÜ™y
 = 0;

1788 
æag_dœeù_”a£
 = 1;

1789 
æag_gc
 = 1;

1790 
æag_švoke_gc
 = 1;

1791 
gc_node
 = 
NULL
;

1792 
gc_p
 = 
NULL
;

1793 ià((
ssd
->
chªÃl_h—d
[
i
].
cu¼’t_¡©e
 =ğ
CHANNEL_IDLE
) ||

1794 (
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e
 =ğ
CHANNEL_IDLE
 &&

1795 
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e_´ediù_time
 <ğssd->
cu¼’t_time
)) {

1796 
chªÃl
 = 
i
;

1797 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 !ğ
NULL
) {

1798 
	`gc_fÜ_chªÃl
(
ssd
, 
chªÃl
);

1802  
SUCCESS
;

1815 ià((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 == 1) ||

1816 ((
ssd
->
·¿m‘”
->
®loÿtiÚ_scheme
 =ğ0è&& (ssd->·¿m‘”->
dyÇmic_®loÿtiÚ
 == 1))) {

1823 
	`gc_fÜ_chªÃl
(
ssd
, 
chªÃl
);

1824  
SUCCESS
;

1826 
	}
}

1833 
	$decide_gc_švoke
(
ssd_šfo
 *
ssd
, 
chªÃl
) {

1834 
sub_»que¡
 *
sub
;

1835 
loÿl
 *
loÿtiÚ
;

1837 ià((
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
 =ğ
NULL
) &&

1838 (
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 =ğ
NULL
))

1842 ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_w_h—d
 !ğ
NULL
) {

1844 } ià(
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
 !ğ
NULL
) {

1845 
sub
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

1846 
sub
 !ğ
NULL
) {

1847 ià(
sub
->
cu¼’t_¡©e
 ==

1848 
SR_WAIT
)

1850 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
sub
->
µn
);

1851 ià((
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
cu¼’t_¡©e
 =ğ
CHIP_IDLE
) ||

1852 ((
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e
 =ğ
CHIP_IDLE
) &&

1853 (
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

1854 
ssd
->
cu¼’t_time
))) {

1855 
	`ä“
(
loÿtiÚ
);

1856 
loÿtiÚ
 = 
NULL
;

1859 
	`ä“
(
loÿtiÚ
);

1860 
loÿtiÚ
 = 
NULL
;

1861 } ià(
sub
->
Ãxt_¡©e
 =ğ
SR_R_DATA_TRANSFER
) {

1862 
loÿtiÚ
 = 
	`fšd_loÿtiÚ
(
ssd
, 
sub
->
µn
);

1863 ià(
ssd
->
chªÃl_h—d
[
loÿtiÚ
->
chªÃl
].
ch_h—d
[loÿtiÚ->
ch
].
Ãxt_¡©e_´ediù_time
 <=

1864 
ssd
->
cu¼’t_time
) {

1865 
	`ä“
(
loÿtiÚ
);

1866 
loÿtiÚ
 = 
NULL
;

1869 
	`ä“
(
loÿtiÚ
);

1870 
loÿtiÚ
 = 
NULL
;

1872 
sub
 = sub->
Ãxt_node
;

1877 
	}
}

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/pagemap.h

18 #iâdeà
PAGEMAP_H


19 
	#PAGEMAP_H
 10000

	)

21 
	~<sys/ty³s.h
>

22 
	~"š™Ÿlize.h
"

24 
	#MAX_INT64
 0x7ffffffffffffffæl

	)

26 
fe_as£¹
(
”rÜ
, *
s
);

28 
®loc_as£¹
(*
p
, *
s
);

30 
Œaû_as£¹
(
št64_t
 
time_t
, 
deviû
, 
l¢
, 
size
, 
İe
);

32 
loÿl
 *
fšd_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
µn
);

35 
fšd_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

36 
block
, 
·ge
);

38 
ssd_šfo
 *
´e_´oûss_·ge
(ssd_šfØ*
ssd
);

40 
g‘_µn_fÜ_´e_´oûss
(
ssd_šfo
 *
ssd
, 
l¢
);

42 
ssd_šfo
 *

43 
g‘_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

44 
sub_»que¡
 *
sub
);

46 
gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
æag
);

49 
gc_dœeù_”a£
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

51 
unš‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

53 
š‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

54 
gc_İ”©iÚ
 *
gc_node
);

56 
decide_gc_švoke
(
ssd_šfo
 *
ssd
, 
chªÃl
);

58 
£t_’Œy_¡©e
(
ssd_šfo
 *
ssd
, 
l¢
, 
size
);

61 
g‘_µn_fÜ_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

63 
”a£_İ”©iÚ
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

64 
block
);

66 
”a£_¶ªes
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›1
, 
¶ªe1
,

67 
commªd
);

69 
move_·ge
(
ssd_šfo
 *
ssd
, 
loÿl
 *
loÿtiÚ
, *
Œªsãr_size
);

71 
gc_fÜ_chªÃl
(
ssd_šfo
 *
ssd
, 
chªÃl
);

73 
d–‘e_gc_node
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
gc_İ”©iÚ
 *
gc_node
);

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/ssd.c

18 
	~"ssd.h
"

20 
	$´štf_gc_node_šfÜm©iÚ
(
gc_İ”©iÚ
* 
gc_node
)

25 
	}
}

30 
	$´štf_ev”y_ch_¡©ic_sub»que¡
(
ssd_šfo
 *
ssd
)

32 
tmp_chªÃl
,
tmp_ch
, 
i
, 
j
;

33 
‹mp_ch_»ad_queue_Ëngth
[100][100];

34 
‹mp_ch_wr™e_queue_Ëngth
[100][100];

35 
sub_»que¡
 *
sub_fÜ_queue
 = 
NULL
;

36 
sub_»que¡
 *
sub_fÜ_»ad
 = 
NULL
;

37 
sub_»que¡
 *
sub_fÜ_wr™e
 = 
NULL
;

38 #ifdeà
DEBUG


42 
i
 = 0; i < 100; i++ ){

43 
j
 = 0; j < 100; j++ ){

44 
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
] = 0;

45 
‹mp_ch_wr™e_queue_Ëngth
[
i
][
j
] = 0;

49 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++ ){

51 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

52 
sub_fÜ_»ad
 !ğ
NULL
){

53 
tmp_chªÃl
 = 
sub_fÜ_»ad
->
loÿtiÚ
->
chªÃl
;

54 
tmp_ch
 = 
sub_fÜ_»ad
->
loÿtiÚ
->
ch
;

55 
‹mp_ch_»ad_queue_Ëngth
[
tmp_chªÃl
][
tmp_ch
] ++;

58 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
;

63 
sub_fÜ_wr™e
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

64 
sub_fÜ_wr™e
 !ğ
NULL
){

65 #ifdeà
DEBUG


70 
tmp_chªÃl
 = 
sub_fÜ_wr™e
->
loÿtiÚ
->
chªÃl
;

71 
tmp_ch
 = 
sub_fÜ_wr™e
->
loÿtiÚ
->
ch
;

72 
‹mp_ch_wr™e_queue_Ëngth
[
tmp_chªÃl
][
tmp_ch
] ++;

75 
sub_fÜ_wr™e
 = sub_fÜ_wr™e->
Ãxt_node
;

80 
tmp_chªÃl
 = 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

81 
tmp_ch
 = 
ssd
->
·¿m‘”
->
ch_num
 / ssd->·¿m‘”->
chªÃl_numb”
;

83 
i
 = 0; i < 
tmp_chªÃl
; i++ ){

84 #ifdeà
DEBUG


85 
	`´štf
("chªÃÈ%d ' sub_r_‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_r_
);

86 
	`´štf
("chªÃÈ%d ' sub_r_h—d‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_r_h—d
);

87 
	`´štf
("chªÃÈ%d ' sub_w_h—d‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_w_h—d
);

88 
	`´štf
("chªÃÈ%d ' sub_w_‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_w_
);

90 
j
 = 0; j < 
tmp_ch
; j++ ){

94 
	`´štf
("0, %d, %d, %d\n", 
i
, 
j
, 
‹mp_ch_wr™e_queue_Ëngth
[i][j]);

95 
	`´štf
("1, %d, %d, %d\n", 
i
, 
j
, 
‹mp_ch_»ad_queue_Ëngth
[i][j]);

98 #ifdeà
DEBUGQUEUE


108 
sub_fÜ_queue
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

110 
sub_fÜ_queue
 !ğ
NULL
){

111 if(
sub_fÜ_queue
->
loÿtiÚ
->
ch
 =ğ
j
){

114 
sub_fÜ_queue
 = sub_fÜ_queue->
Ãxt_node
;

116 if(
sub_fÜ_queue
 !ğ
NULL
){

117 
	`´štf
("cŞËùiÚ2 chªÃÈ%d, ch %d, fœ¡ h—d sub_»ad_»que¡ s‹ %d\n", 
i
, 
j
, 
sub_fÜ_queue
->
cu¼’t_¡©e
);

119 
	`´štf
("cŞËùiÚ2 chªÃÈ%d, ch %d, ha nØsub_»ad_»que¡‚ow\n", 
i
, 
j
);

123 
sub_fÜ_queue
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

125 
sub_fÜ_queue
 !ğ
NULL
){

126 if(
sub_fÜ_queue
->
loÿtiÚ
->
ch
 =ğ
j
){

129 
sub_fÜ_queue
 = sub_fÜ_queue->
Ãxt_node
;

131 if(
sub_fÜ_queue
 !ğ
NULL
){

132 
	`´štf
("cŞËùiÚ2 chªÃÈ%d, ch %d, fœ¡ h—d sub_wr™e_»que¡ s‹ %d\n", 
i
, 
j
, 
sub_fÜ_queue
->
cu¼’t_¡©e
);

134 
	`´štf
("cŞËùiÚ2 chªÃÈ%d, ch %d, ha nØsub_wr™e_»que¡‚ow\n", 
i
, 
j
);

139 if(
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
] !ğ
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_»ad_queue_Ëngth
) {

140 
	`´štf
("lxc,read†ength is wrong here\n");

142 if(
‹mp_ch_wr™e_queue_Ëngth
[
i
][
j
] !ğ
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_wr™e_queue_Ëngth
) {

143 
	`´štf
("lxc,write†ength is wrong here\n");

147 
	}
}

150 
	$´štf_ev”y_ch_»ad_sub»que¡
(
ssd_šfo
 *
ssd
)

152 
tmp_chªÃl
,
tmp_ch
, 
i
, 
j
;

153 
‹mp_ch_»ad_queue_Ëngth
[100][100];

154 
‹mp_ch_wr™e_queue_Ëngth
[100][100];

155 
sub_»que¡
 *
sub_fÜ_queue
 = 
NULL
;

156 
sub_»que¡
 *
sub_fÜ_»ad
 = 
NULL
;

157 
sub_»que¡
 *
sub_fÜ_wr™e
 = 
NULL
;

158 #ifdeà
DEBUG


162 
i
 = 0; i < 100; i++ ){

163 
j
 = 0; j < 100; j++ ){

164 
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
] = 0;

165 
‹mp_ch_wr™e_queue_Ëngth
[
i
][
j
] = 0;

169 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++ ){

171 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_r_h—d
;

172 
sub_fÜ_»ad
 !ğ
NULL
){

173 
tmp_chªÃl
 = 
sub_fÜ_»ad
->
loÿtiÚ
->
chªÃl
;

174 
tmp_ch
 = 
sub_fÜ_»ad
->
loÿtiÚ
->
ch
;

175 
‹mp_ch_»ad_queue_Ëngth
[
tmp_chªÃl
][
tmp_ch
] ++;

178 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
;

183 
sub_fÜ_wr™e
 = 
ssd
->
chªÃl_h—d
[
i
].
subs_w_h—d
;

184 
sub_fÜ_wr™e
 !ğ
NULL
){

190 
tmp_chªÃl
 = 
sub_fÜ_wr™e
->
loÿtiÚ
->
chªÃl
;

191 
tmp_ch
 = 
sub_fÜ_wr™e
->
loÿtiÚ
->
ch
;

192 
‹mp_ch_wr™e_queue_Ëngth
[
tmp_chªÃl
][
tmp_ch
] ++;

195 
sub_fÜ_wr™e
 = sub_fÜ_wr™e->
Ãxt_node
;

200 
tmp_chªÃl
 = 
ssd
->
·¿m‘”
->
chªÃl_numb”
;

201 
tmp_ch
 = 
ssd
->
·¿m‘”
->
ch_num
 / ssd->·¿m‘”->
chªÃl_numb”
;

203 
i
 = 0; i < 
tmp_chªÃl
; i++ ){

204 #ifdeà
DEBUG


205 
	`´štf
("chªÃÈ%d ' sub_r_‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_r_
);

206 
	`´štf
("chªÃÈ%d ' sub_r_h—d‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_r_h—d
);

207 
	`´štf
("chªÃÈ%d ' sub_w_h—d‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_w_h—d
);

208 
	`´štf
("chªÃÈ%d ' sub_w_‡dd»s i %Îd\n", 
i
, 
ssd
->
chªÃl_h—d
[i].
subs_w_
);

210 
j
 = 0; j < 
tmp_ch
; j++ ){

212 if(
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
] > 0){

251 if(
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
] !ğ
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_»ad_queue_Ëngth
) {

252 
	`´štf
("lxc,»ad†’gth i wrÚg h”e,‚ewem°Ëngth i %d. wr™š old ch i %d \n",
‹mp_ch_»ad_queue_Ëngth
[
i
][
j
], 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_»ad_queue_Ëngth
);

254 if(
‹mp_ch_wr™e_queue_Ëngth
[
i
][
j
] !ğ
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_wr™e_queue_Ëngth
) {

257 
	`´štf
("lxc,wr™Ëngth i wrÚg h”e,‚ewem°Ëngth i %d. wr™š old ch i %d \n",
‹mp_ch_wr™e_queue_Ëngth
[
i
][
j
], 
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
ch_wr™e_queue_Ëngth
);

261 
	}
}

266 
	$judgšg_»ad_š_gc_ch
(
ssd_šfo
 *
ssd
, 
chªÃl
)

267 { 
tmp_ch
;

268 
gc_İ”©iÚ
 *
gc_node
;

269 
sub_»que¡
 *
sub_fÜ_»ad
 = 
NULL
;

270 if(
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
 !ğ
NULL
){

272 
tmp_ch
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
gc_commªd
->
ch
;

273 
sub_fÜ_»ad
 = 
ssd
->
chªÃl_h—d
[
chªÃl
].
subs_r_h—d
;

275 
sub_fÜ_»ad
 !ğ
NULL
){

276 ià(
sub_fÜ_»ad
->
loÿtiÚ
->
ch
 =ğ
tmp_ch
){

282 
sub_fÜ_»ad
 = sub_fÜ_»ad->
Ãxt_node
;

285 if(
sub_fÜ_»ad
 =ğ
NULL
){

291 
	}
}

295 
	$´štf_ssd_gc_node
(
ssd_šfo
 *
ssd
)

315 
	}
}

320 
	$´štf_ssd_»que¡_queue
(
ssd_šfo
 *
ssd
)

322 
»que¡
* 
‹mp_»que¡
;

323 
‹mp_num_»que¡
 = 
ssd
->
»que¡_queue_Ëngth
;

324 if(
‹mp_num_»que¡
 == 0){

325 
	`´štf
("ssd„equest_queue has‚one\n");

327 
‹mp_»que¡
 = 
ssd
->
»que¡_queue
;

328 
	`´štf
("ssd„eque¡_queu¡©us:„eque¡_Ëngth i %d,\n", 
ssd
->
»que¡_queue_Ëngth
);

329 
‹mp_»que¡
 !ğ
NULL
){

330 
	`´štf
("ssd„eque¡_queu,†¢ : %d, siz: %d, o³¿tiÚ :%d ***1»ad,0wr™e,com¶‘e_l¢_couÁ :%d, di¡ri_æag :%d, begš_tim:%Îu\n",
‹mp_»que¡
->
l¢
,‹mp_»que¡->
size
,‹mp_»que¡->
İ”©iÚ
,‹mp_»que¡->
com¶‘e_l¢_couÁ
,‹mp_»que¡->
di¡ri_æag
,‹mp_»que¡->
begš_time
);

331 if(
‹mp_»que¡
 =ğ
ssd
->
»que¡_
){

334 
‹mp_»que¡
 =emp_»que¡->
Ãxt_node
;

339 
	}
}

343 
	$´štfsub_»que¡_¡©us
(
ssd_šfo
 *
ssd
)

404 
	}
}

420 
	$maš
() {

421 
i
, 
j
, 
k
;

422 
ssd_šfo
 *
ssd
;

425 #ifdeà
DEBUG


426 
	`´štf
("enter main\n");

427 
	`´štf
("forest\n");

429 
ssd
 = (
ssd_šfo
 *è
	`m®loc
((ssd_info));

430 
	`®loc_as£¹
(
ssd
, "ssd");

431 
	`mem£t
(
ssd
, 0, (
ssd_šfo
));

432 
ssd
 = 
	`š™ŸtiÚ
(ssd);

433 #ifdeà
DEBUG


434 
	`´štf
("this is in main()");

435 
	`´štfsub_»que¡_¡©us
(
ssd
);

437 
	`make_aged
(
ssd
);

438 
	`´e_´oûss_·ge
(
ssd
);

440 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

441 
j
 = 0; j < 
ssd
->
·¿m‘”
->
d›_ch
; j++) {

442 
k
 = 0; k < 
ssd
->
·¿m‘”
->
¶ªe_d›
; k++) {

443 
	`´štf
("%d,0,%d,%d: %5d\n", 
i
, 
j
, 
k
,

444 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[0].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
ä“_·ge
);

448 
	`årštf
(
ssd
->
ouutfe
, "\t\t\t\t\t\t\t\t\tOUTPUT\n");

449 
	`årštf
(
ssd
->
ouutfe
, "****************** TRACE INFO ******************\n");

451 
ssd
 = 
	`simuÏ‹
(ssd);

454 
	`¡©i¡ic_ouut
(
ssd
);

457 
	`´štf
("\n");

458 
	`´štf
("the simulation is completed!\n");

462 
	}
}

472 
ssd_šfo
 *
	$simuÏ‹
(
ssd_šfo
 *
ssd
) {

473 
æag
 = 1, 
æag1
 = 0;

474 
ouut_¡•
 = 0;

475 
a
 = 0, 
b
 = 0;

478 
	`´štf
("\n");

479 
	`´štf
("begin simulating.......................\n");

480 
	`´štf
("\n");

481 
	`´štf
("\n");

482 
	`´štf
(" ^o^ OK,…lease wait‡ moment,‡ndƒnjoy music‡nd coffee ^o^ \n");

484 
ssd
->
Œaûfe
 = 
	`fİ’
(ssd->
Œaûf’ame
, "r");

485 ià(
ssd
->
Œaûfe
 =ğ
NULL
) {

486 
	`´štf
("therace file can't open\n");

487  
NULL
;

490 
	`årštf
(
ssd
->
ouutfe
,

492 
	`fæush
(
ssd
->
ouutfe
);

493 
i
 = 0;

494 
æag
 != 100) {

498 if(
ssd
->
debug_sign
 == 1){

509 
æag
 = 
	`g‘_»que¡s
(
ssd
);

513 #ifdeà
DEBUG


514 
	`´štf
Ğ"æag i %d\n" ,
æag
);

517 ià(
æag
 == 1) {

521 ià(
ssd
->
·¿m‘”
->
d¿m_ÿ·c™y
 != 0) {

522 
	`bufãr_mªagem’t
(
ssd
);

523 
	`di¡ribu‹
(
ssd
);

525 
	`no_bufãr_di¡ribu‹
(
ssd
);

531 
	`´oûss
(
ssd
);

532 
	`Œaû_ouut
(
ssd
);

534 ià(
æag
 == 0 )

535 
æag
 = 100;

538 
	`fşo£
(
ssd
->
Œaûfe
);

539  
ssd
;

540 
	}
}

554 
	$g‘_»que¡s
(
ssd_šfo
 *
ssd
) {

555 
bufãr
[200];

556 
l¢
 = 0;

557 
deviû
, 
size
, 
İe
, 
Ïrge_l¢
, 
i
 = 0, 
j
 = 0;

558 
»que¡
 *
»que¡1
;

559 
sub_»que¡
 *
‹mp_sub
;

560 
æag
 = 1;

561 
f•ošt
;

562 
št64_t
 
time_t
 = 0;

563 
št64_t
 
Ã¬e¡_ev’t_time
;

564 #ifdeà
DEBUG_CURR_TIME


565 
	`´štf
("DEBUG_CURR_TIME i %Îd iÀg‘_»que¡ funùiÚ\n",
ssd
->
cu¼’t_time
);

569 ià(
	`ãof
(
ssd
->
Œaûfe
)){

570 if(
ssd
->
»que¡_queue_Ëngth
 > 0){

571 
	`´štf
("here is dealingƒnd ofrace\n");

572 
Ã¬e¡_ev’t_time
 = 
	`fšd_Ã¬e¡_ev’t
(
ssd
);

574 ià(
Ã¬e¡_ev’t_time
 =ğ
MAX_INT64
) {

577 ià(
Ã¬e¡_ev’t_time
 < 
MAX_INT64
){

579 
ssd
->
cu¼’t_time
 = 
Ã¬e¡_ev’t_time
;

586 
f•ošt
 = 
	`á–l
(
ssd
->
Œaûfe
);

587 
	`fg‘s
(
bufãr
, 200, 
ssd
->
Œaûfe
);

588 
	`ssÿnf
(
bufãr
, "%Îd %d %d %d %d", &
time_t
, &
deviû
, &
l¢
, &
size
, &
İe
);

590 ià((
deviû
 < 0è&& (
l¢
 < 0è&& (
size
 < 0è&& (
İe
 < 0)) {

594 #ifdeà
DEBUG


595 
	`´štf
("’‹¸g‘_»que¡s, ssd->mš_l¢ %d, ssd->max_l¢ %d\n",
ssd
->
mš_l¢
,ssd->
max_l¢
);

597 
	`´štf
Ğ"time_ˆ%Îd, deviû %d,†¢ %d,siz%d ,İ%d\n" , 
time_t
, 
deviû
, 
l¢
, 
size
, 
İe
);

601 ià(
l¢
 < 
ssd
->
mš_l¢
)

602 
ssd
->
mš_l¢
 = 
l¢
;

603 ià(
l¢
 > 
ssd
->
max_l¢
)

604 
ssd
->
max_l¢
 = 
l¢
;

611 
Ïrge_l¢
 = (è((
ssd
->
·¿m‘”
->
sub·ge_·ge
 * ssd->·¿m‘”->
·ge_block
 * ssd->·¿m‘”->
block_¶ªe
 *

612 
ssd
->
·¿m‘”
->
¶ªe_d›
 * ssd->·¿m‘”->
d›_ch
 * ssd->·¿m‘”->
ch_num
) *

613 (1 - 
ssd
->
·¿m‘”
->
ov”´ovide
));

614 
l¢
 =†¢ % 
Ïrge_l¢
;

616 
Ã¬e¡_ev’t_time
 = 
	`fšd_Ã¬e¡_ev’t
(
ssd
);

617 #ifdeà
DEBUG


618 
	`´štf
("Ã¬e¡_ev’t_timi %Îd\n",
Ã¬e¡_ev’t_time
 );

621 ià(
Ã¬e¡_ev’t_time
 =ğ
MAX_INT64
) {

624 if(
ssd
->
»que¡_queue_Ëngth
 >0){

625 
	`´štf
("only gc…rocessing can happen\n");

627 if(
ssd
->
»que¡_queue_Ëngth
 =ğssd->
·¿m‘”
->
queue_Ëngth
){

630 
	`f£ek
(
ssd
->
Œaûfe
, 
f•ošt
, 0);

631 
	`´štf
("d—ÈšÃ¸sub»que¡, cu¼’t_tim%Îd\n", 
ssd
->
cu¼’t_time
);

665 
ssd
->
cu¼’t_time
 = 
time_t
;

670 
	`´štf
("ssdcu¼’t_tim‚‹¸Ã¬e¡_ev’t_timi MAX_INIT64‡nd ssd->cu¼’t_timi %Îd\n", 
ssd
->
cu¼’t_time
 );

671 #ifdeà
DEBUG


672 
	`´štf
("ssdcu¼’t_tim‚‹¸Ã¬e¡_ev’t_timi MAX_INIT64‡nd ssd->cu¼’t_timi %Îd\n", 
ssd
->
cu¼’t_time
 );

680 ià(
Ã¬e¡_ev’t_time
 < 
time_t
) {

689 #ifdeà
DEBUG


690 
	`´štf
("enter‚earest_event_time <time_t\n" );

693 
	`f£ek
(
ssd
->
Œaûfe
, 
f•ošt
, 0);

694 ià(
ssd
->
cu¼’t_time
 <ğ
Ã¬e¡_ev’t_time
){

696 
	`´štf
("Œaû†ši Ï‹r, dÚˆhavtØadd. ssd->CURR_TIME i %Îd,‚—»¡_ev’t_timi %Îd iÀg‘_»que¡ funùiÚ\n",
ssd
->
cu¼’t_time
, 
Ã¬e¡_ev’t_time
);

697 
ssd
->
cu¼’t_time
 = 
Ã¬e¡_ev’t_time
;

699 #ifdeà
DEBUG_CURR_TIME


700 
	`´štf
("ssdcu¼’‰imDEBUG_CURR_TIME i %Îd iÀg‘_»que¡ funùiÚ\n",
ssd
->
cu¼’t_time
);

706 #ifdeà
DEBUG


707 
	`´štf
("enter‚earest_event_time >ime_t\n" );

710 ià(
ssd
->
»que¡_queue_Ëngth
 >ğssd->
·¿m‘”
->
queue_Ëngth
) {

711 
	`´štf
("h”»que¡†Úgƒnough!!!,†’gth i %d\n", 
ssd
->
»que¡_queue_Ëngth
);

713 
	`f£ek
(
ssd
->
Œaûfe
, 
f•ošt
, 0);

714 
ssd
->
cu¼’t_time
 = 
Ã¬e¡_ev’t_time
;

715 #ifdeà
DEBUG_CURR_TIME


716 
	`´štf
("ssdcu¼’‰im DEBUG_CURR_TIME i %Îd iÀg‘_»que¡ funùiÚ‡nd„eque¡_queue>õ¬am‘” queue_Ëngth\n",
ssd
->
cu¼’t_time
);

721 
ssd
->
cu¼’t_time
 = 
time_t
;

722 #ifdeà
DEBUG_CURR_TIME


723 
	`´štf
("ssdcu¼’‰im DEBUG_CURR_TIME i %Îd iÀg‘_»que¡ funùiÚ„eque¡_queue<õ¬am‘” queue_Ëngth \n",
ssd
->
cu¼’t_time
);

730 ià(
time_t
 < 0) {

731 
	`´štf
("error!\n");

735 ià(
	`ãof
(
ssd
->
Œaûfe
)) {

736 
»que¡1
 = 
NULL
;

740 
»que¡1
 = (
»que¡
 *è
	`m®loc
((request));

741 
	`®loc_as£¹
(
»que¡1
, "request");

742 
	`mem£t
(
»que¡1
, 0, (
»que¡
));

744 
»que¡1
->
time
 = 
time_t
;

745 
»que¡1
->
l¢
 =†sn;

746 
»que¡1
->
size
 = size;

747 
»que¡1
->
İ”©iÚ
 = 
İe
;

748 
»que¡1
->
begš_time
 = 
time_t
;

749 
»que¡1
->
»¥Ú£_time
 = 0;

750 
»que¡1
->
’”gy_cÚsum±iÚ
 = 0;

751 
»que¡1
->
Ãxt_node
 = 
NULL
;

752 
»que¡1
->
di¡ri_æag
 = 0;

753 
»que¡1
->
subs
 = 
NULL
;

754 
»que¡1
->
Ãed_di¡r_æag
 = 
NULL
;

755 
»que¡1
->
com¶‘e_l¢_couÁ
 = 0;

756 
f•ošt
 = 
	`á–l
(
ssd
->
Œaûfe
);

757 #ifdeà
DEBUG


758 
	`´štf
("before insert into ssd-request queue\n");

759 
	`´štf_ssd_»que¡_queue
(
ssd
);

764 #ifdeà
DEBUGSUSPEND


765 
	`´štf
("ssd„eque¡_queu,†¢ : %d, siz: %d, o³¿tiÚ :%d ***1»ad,0wr™e,com¶‘e_l¢_couÁ :%d, di¡ri_æag :%d, begš_tim:%Îu\n",
»que¡1
->
l¢
,»que¡1->
size
,»que¡1->
İ”©iÚ
,»que¡1->
com¶‘e_l¢_couÁ
,»que¡1->
di¡ri_æag
,»que¡1->
begš_time
);

768 ià(
ssd
->
»que¡_queue
 =ğ
NULL
)

770 
ssd
->
»que¡_queue
 = 
»que¡1
;

771 
ssd
->
»que¡_
 = 
»que¡1
;

772 
ssd
->
»que¡_queue_Ëngth
++;

774 (
ssd
->
»que¡_
)->
Ãxt_node
 = 
»que¡1
;

775 
ssd
->
»que¡_
 = 
»que¡1
;

776 
ssd
->
»que¡_queue_Ëngth
++;

778 #ifdeà
DEBUG


779 
	`´štf
("after inserted into ssd-request queue\n");

780 
	`´štf_ssd_»que¡_queue
(
ssd
);

782 ià(
»que¡1
->
İ”©iÚ
 == 1)

784 
ssd
->
ave_»ad_size
 =

785 (
ssd
->
ave_»ad_size
 * ssd->
»ad_»que¡_couÁ
 + 
»que¡1
->
size
) / (ssd->read_request_count + 1);

787 
ssd
->
ave_wr™e_size
 =

788 (
ssd
->
ave_wr™e_size
 * ssd->
wr™e_»que¡_couÁ
 + 
»que¡1
->
size
) / (ssd->write_request_count + 1);

792 
f•ošt
 = 
	`á–l
(
ssd
->
Œaûfe
);

793 
	`fg‘s
(
bufãr
, 200, 
ssd
->
Œaûfe
);

794 
	`ssÿnf
(
bufãr
, "%Îd %d %d %d %d", &
time_t
, &
deviû
, &
l¢
, &
size
, &
İe
);

795 
ssd
->
Ãxt_»que¡_time
 = 
time_t
;

796 
	`f£ek
(
ssd
->
Œaûfe
, 
f•ošt
, 0);

799 
	}
}

812 
ssd_šfo
 *
	$bufãr_mªagem’t
(
ssd_šfo
 *
ssd
) {

813 
j
, 
l¢
, 
Ín
, 
Ï¡_Ín
, 
fœ¡_Ín
, 
šdex
, 
com¶‘e_æag
 = 0, 
¡©e
, 
fuÎ_·ge
;

814 
æag
 = 0, 
Ãed_di¡b_æag
, 
l¢_æag
, 
æag1
 = 1, 
aùive_»giÚ_æag
 = 0;

815 
»que¡
 *
Ãw_»que¡
;

816 
bufãr_group
 *
bufãr_node
, 
key
;

817 
mask
 = 0, 
off£t1
 = 0, 
off£t2
 = 0;

818 #ifdeà
DEBUG_CURR_TIME


819 
	`´štf
("DEBUG_CURR_TIME i %Îd iÀbufãr_mªagem’ˆfunùiÚ \n",
ssd
->
cu¼’t_time
);

822 
ssd
->
d¿m
->
cu¼’t_time
 = ssd->current_time;

823 
fuÎ_·ge
 = ~(0xfffffffà<< 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

825 
Ãw_»que¡
 = 
ssd
->
»que¡_
;

826 
l¢
 = 
Ãw_»que¡
->lsn;

827 
Ín
 = 
Ãw_»que¡
->
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

828 
Ï¡_Ín
 = (
Ãw_»que¡
->
l¢
 +‚ew_»que¡->
size
 - 1è/ 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

829 
fœ¡_Ín
 = 
Ãw_»que¡
->
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

831 
Ãw_»que¡
->
Ãed_di¡r_æag
 = (*è
	`m®loc
(

832 (è* ((
Ï¡_Ín
 - 
fœ¡_Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
 / 32 + 1));

834 
	`®loc_as£¹
(
Ãw_»que¡
->
Ãed_di¡r_æag
, "new_request->need_distr_flag");

835 
	`mem£t
(
Ãw_»que¡
->
Ãed_di¡r_æag
, 0,

836 (è* ((
Ï¡_Ín
 - 
fœ¡_Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
 / 32 + 1));

837 #ifdeà
DEBUG


838 
	`´štf
("yes, h”i th»que¡_ fÜ‚ew_»que¡ ,™ l¢ i %d, sizi %d, o³¿tiÚ i %d\n",
Ãw_»que¡
->
l¢
,‚ew_»que¡->
size
,‚ew_»que¡->
İ”©iÚ
);

841 ià(
Ãw_»que¡
->
İ”©iÚ
 =ğ
READ
) {

842 
Ín
 <ğ
Ï¡_Ín
) {

847 
Ãed_di¡b_æag
 = 
fuÎ_·ge
;

848 
key
.
group
 = 
Ín
;

849 
bufãr_node
 = (
bufãr_group
 *è
	`avlT»eFšd
(
ssd
->
d¿m
->
bufãr
,

850 (
TREE_NODE
 *è&
key
);

854 (
bufãr_node
 !ğ
NULL
è&& (
l¢
 < (
Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
) &&

855 (
l¢
 <ğ(
Ãw_»que¡
->l¢ +‚ew_»que¡->
size
 - 1))) {

856 #ifdeà
DEBUG


857 
	`´štf
("buffer_node is‚ot‚ull, find in Treehe buffer_node information is :\n");

859 
	`´štf
("bufãr_node. grou°%d, stÜed %d, dœty_ş—À%d, fÏg %d\n", 
bufãr_node
->
group
, bufãr_node->
¡Üed
, bufãr_node->
dœty_ş—n
, bufãr_node->
æag
);

863 
l¢_æag
 = 
fuÎ_·ge
;

864 
mask
 = 1 << (
l¢
 % 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

865 ià(
mask
 > 31) {

866 
	`´štf
("the subpage‚umber is†argerhan 32!add some cases");

867 
	`g‘ch¬
();

868 } ià((
bufãr_node
->
¡Üed
 & 
mask
) == mask) {

869 
æag
 = 1;

870 
l¢_æag
 =†¢_æag & (~
mask
);

871 #ifdeà
DEBUG


872 
	`´štf
("l¢_æag i 0x%x, bufãr_node->¡Üedï¼Ÿï¼Ÿï¼Ÿwh”i hŞi 0x%x, mask i 0x%x\n",
l¢_æag
, 
bufãr_node
->
¡Üed
,
mask
);

878 ià(
æag
 == 1) {

879 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 !ğ
bufãr_node
) {

880 ià(
ssd
->
d¿m
->
bufãr
->
bufãr_
 =ğ
bufãr_node
) {

881 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = 
NULL
;

882 
ssd
->
d¿m
->
bufãr
->
bufãr_
 = 
bufãr_node
->
LRU_lšk_´e
;

884 
bufãr_node
->
LRU_lšk_´e
->
LRU_lšk_Ãxt
 = buffer_node->LRU_link_next;

885 
bufãr_node
->
LRU_lšk_Ãxt
->
LRU_lšk_´e
 = buffer_node->LRU_link_pre;

887 
bufãr_node
->
LRU_lšk_Ãxt
 = 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
;

888 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
->
LRU_lšk_´e
 = 
bufãr_node
;

889 
bufãr_node
->
LRU_lšk_´e
 = 
NULL
;

890 
ssd
->
d¿m
->
bufãr
->
bufãr_h—d
 = 
bufãr_node
;

892 
ssd
->
d¿m
->
bufãr
->
»ad_h™
++;

893 
Ãw_»que¡
->
com¶‘e_l¢_couÁ
++;

894 } ià(
æag
 == 0) {

895 
ssd
->
d¿m
->
bufãr
->
»ad_miss_h™
++;

896 #ifdeà
DEBUG


898 
	`´štf
("bufãr->»ad_miss_h™++ i %d\n",
ssd
->
d¿m
->
bufãr
->
»ad_miss_h™
);

902 
Ãed_di¡b_æag
 =‚“d_di¡b_æag & 
l¢_æag
;

904 
æag
 = 0;

905 
l¢
++;

908 
šdex
 = (
Ín
 - 
fœ¡_Ín
è/ (32 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

909 
Ãw_»que¡
->
Ãed_di¡r_æag
[
šdex
] =‚ew_»que¡->Ãed_di¡r_æag[šdex] | (
Ãed_di¡b_æag


910 << (((
Ín
 - 
fœ¡_Ín
è% (32 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
)) * ssd->parameter->subpage_page));

911 
Ín
++;

914 } ià(
Ãw_»que¡
->
İ”©iÚ
 =ğ
WRITE
) {

915 
Ín
 <ğ
Ï¡_Ín
) {

916 
Ãed_di¡b_æag
 = 
fuÎ_·ge
;

917 
mask
 = ~(0xfffffffà<< (
ssd
->
·¿m‘”
->
sub·ge_·ge
));

918 
¡©e
 = 
mask
;

920 ià(
Ín
 =ğ
fœ¡_Ín
) {

921 
off£t1
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - ((
Ín
 + 1è* ssd->·¿m‘”->sub·ge_·g- 
Ãw_»que¡
->
l¢
);

922 
¡©e
 = s‹ & (0xfffffffà<< 
off£t1
);

924 ià(
Ín
 =ğ
Ï¡_Ín
) {

925 
off£t2
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 -

926 ((
Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - (
Ãw_»que¡
->
l¢
 +‚ew_»que¡->
size
));

927 
¡©e
 = s‹ & (~(0xfffffffà<< 
off£t2
));

929 #ifdeà 
DEBUG


930 
	`´štf
("wr™ÍÀ¡©i 0x%x, off£t1 i 0x%x, off£t2 i 0x%x\n",
¡©e
,
off£t1
, 
off£t2
 );

932 
ssd
 = 
	`š£¹2bufãr
(ssd, 
Ín
, 
¡©e
, 
NULL
, 
Ãw_»que¡
);

933 
Ín
++;

936 
com¶‘e_æag
 = 1;

937 
j
 = 0; j <ğ(
Ï¡_Ín
 - 
fœ¡_Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
 / 32; j++) {

938 ià(
Ãw_»que¡
->
Ãed_di¡r_æag
[
j
] != 0) {

939 
com¶‘e_æag
 = 0;

942 #ifdeà
DEBUG


943 
	`´štf
("com¶‘e_æag i %d, (0 indiÿ‹ th©‚Ù btÙ®ly seviûd by bufã¸dœeù–y)\n", 
com¶‘e_æag
);

949 ià((
com¶‘e_æag
 =ğ1è&& (
Ãw_»que¡
->
subs
 =ğ
NULL
)) {

950 
Ãw_»que¡
->
begš_time
 = 
ssd
->
cu¼’t_time
;

951 
Ãw_»que¡
->
»¥Ú£_time
 = 
ssd
->
cu¼’t_time
 + 1000;

954  
ssd
;

955 
	}
}

960 
	$Ín2µn
(
ssd_šfo
 *
ssd
, 
l¢
) {

961 
Ín
, 
µn
;

962 
’Œy
 *
p_m­
 = 
ssd
->
d¿m
->
m­
->
m­_’Œy
;

963 #ifdeà
DEBUG_CURR_TIME


964 
	`´štf
("’‹¸Ín2µn, cu¼’ˆtime:%Îd\n",
ssd
->
cu¼’t_time
);

967 
Ín
 = 
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

968 
µn
 = (
p_m­
[
Ín
]).
²
;

969  
µn
;

970 
	}
}

978 
ssd_šfo
 *
	$di¡ribu‹
(
ssd_šfo
 *
ssd
) {

979 
¡¬t
, 
’d
, 
fœ¡_l¢
, 
Ï¡_l¢
, 
Ín
, 
æag
 = 0, 
æag_©ched
 = 0, 
fuÎ_·ge
;

980 
j
, 
k
, 
sub_size
;

981 
i
 = 0;

982 
»que¡
 *
»q
;

983 
sub_»que¡
 *
sub
;

984 *
com¶t
;

986 #ifdeà
DEBUG_CURR_TIME


987 
	`´štf
("’‹¸di¡ribu‹, cu¼’ˆtime:%Îd\n",
ssd
->
cu¼’t_time
);

988 
	`´štf_ssd_»que¡_queue
(
ssd
);

990 
fuÎ_·ge
 = ~(0xfffffffà<< 
ssd
->
·¿m‘”
->
sub·ge_·ge
);

992 
»q
 = 
ssd
->
»que¡_
;

993 ià(
»q
->
»¥Ú£_time
 != 0) {

994 #ifdeà
DEBUG


995 
	`´štf
("req->response_time !=0\n");

997  
ssd
;

999 ià(
»q
->
İ”©iÚ
 =ğ
WRITE
) {

1000 #ifdeà
DEBUG


1001 
	`´štf
("ssd->req_tail's operation is write\n");

1003  
ssd
;

1006 ià(
»q
 !ğ
NULL
) {

1007 ià(
»q
->
di¡ri_æag
 == 0) {

1009 ià(
»q
->
com¶‘e_l¢_couÁ
 !ğ
ssd
->
»que¡_
->
size
) {

1010 
fœ¡_l¢
 = 
»q
->
l¢
;

1011 
Ï¡_l¢
 = 
fœ¡_l¢
 + 
»q
->
size
;

1012 
com¶t
 = 
»q
->
Ãed_di¡r_æag
;

1013 
¡¬t
 = 
fœ¡_l¢
 - fœ¡_l¢ % 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1014 
’d
 = (
Ï¡_l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
 + 1) * ssd->parameter->subpage_page;

1015 
i
 = (
’d
 - 
¡¬t
) / 32;

1017 
i
 >= 0) {

1024 
j
 = 0; j < 32 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
; j++) {

1025 
k
 = (
com¶t
[((
’d
 - 
¡¬t
è/ 32 - 
i
)] >> (
ssd
->
·¿m‘”
->
sub·ge_·ge
 * 
j
)è& 
fuÎ_·ge
;

1026 ià(
k
 != 0) {

1027 
Ín
 = 
¡¬t
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
 +

1028 ((
’d
 - 
¡¬t
è/ 32 - 
i
è* 32 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
 + 
j
;

1029 
sub_size
 = 
	`Œªsãr_size
(
ssd
, 
k
, 
Ín
, 
»q
);

1030 ià(
sub_size
 == 0) {

1033 
sub
 = 
	`ü—t_sub_»que¡
(
ssd
, 
Ín
, 
sub_size
, 0, 
»q
,„eq->
İ”©iÚ
);

1039 
i
 = i - 1;

1049 
»q
->
begš_time
 = 
ssd
->
cu¼’t_time
;

1050 
»q
->
»¥Ú£_time
 = 
ssd
->
cu¼’t_time
 + 1000;

1055  
ssd
;

1056 
	}
}

1060 
	$ÿlc_»q_¦ack_time
(
»que¡
 * 
»q
)

1062 
chªÃl_max
, 
ch_max
;

1063 
sub_»que¡
 *
sub
;

1064 
sub_»que¡
 *
‹mp_sub
;

1065 
št64_t
 
‹mp_time
;

1066 
sub
 = 
»q
->
subs
;

1067 
‹mp_time
 = 0;

1069 
sub
 !ğ
NULL
){

1070 if(
‹mp_time
 < 
sub
->
£rviûd_time
){

1072 
‹mp_time
 = 
sub
->
£rviûd_time
;

1073 
chªÃl_max
 = 
sub
->
loÿtiÚ
->
chªÃl
;

1074 
ch_max
 = 
sub
->
loÿtiÚ
->
ch
 ;

1075 
‹mp_sub
 = 
sub
;

1077 
sub
 = sub->
Ãxt_subs
;

1082 
‹mp_sub
->
Ï¡_sign
 = 1;

1084 
sub
 = 
»q
->
subs
;

1085 
sub
 !ğ
NULL
){

1087 
sub
->
¦ack_time
 = 
‹mp_time
 - sub->
£rviûd_time
;

1088 #ifdeà
DEBUG


1089 
	`´štf
("»q %u, sub sÏck_timi %d\n", 
»q
, 
sub
->
¦ack_time
);

1092 
sub
 = sub->
Ãxt_subs
;

1093 #ifdeà
DEBUG


1094 if(
sub
->
¦ack_time
 == 0) {

1096 
	`´štf
("chªÃl_max %d, ch_max %d, sub->loÿtiÚ->chªÃÈ%d, sub->loÿtiÚ->ch %d,hey‡» should bth§me\n", 
chªÃl_max
, 
ch_max
, 
sub
->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
);

1102 
	}
}

1107 
	$»Üd”šg_»q
(
»que¡
 * 
»q
 )

1141 
	}
}

1159 
	$Œaû_ouut
(
ssd_šfo
 *
ssd
) {

1160 
æag
 = 1;

1161 
št64_t
 
¡¬t_time
, 
’d_time
;

1162 
»que¡
 *
»q
, *
´e_node
;

1163 
sub_»que¡
 *
sub
, *
tmp
;

1165 #ifdeà
DEBUG_CURR_TIME


1166 
	`´štf
("’‹¸Œaû_ouut, cu¼’ˆtime:%Îd\n",
ssd
->
cu¼’t_time
);

1169 
»q
 = 
ssd
->
»que¡_queue
;

1170 
´e_node
 = 
»q
;

1171 
¡¬t_time
 = 0;

1172 
’d_time
 = 0;

1174 ià(
»q
 =ğ
NULL
){

1175 #ifdeà
DEBUG


1176 
	`´štf
("ssd->request_queue is NULL\n");

1180 
»q
 !ğ
NULL
) {

1181 #ifdeà
DEBUGTRACE_OUT


1182 
	`´štf
("Ú’tœ»que¡ begš judgšg wh‘h” fšishm’ˆh”,»q‡dd»s i %Îd\n",
»q
);

1188 
æag
 = 1;

1189 
¡¬t_time
 = 0;

1190 
’d_time
 = 0;

1193 ià(
»q
->
»¥Ú£_time
 != 0) {

1196 #ifdeà
DEBUGTRACE_OUT


1197 
	`´štf
("only hasƒntire„eq->response_time oneime,dont care„eq's subrequest. \n");

1202 #ifdeà
DEBUGSUSPEND


1203 
	`´štf
("%16Îd %10d %6d %2d %16Îd %16Îd %10Îd\n", 
»q
->
time
,„eq->
l¢
,„eq->
size
,

1204 
»q
->
İ”©iÚ
,„eq->
begš_time
,„eq->
»¥Ú£_time
,„eq->»¥Ú£_tim-„eq->
time
);

1207 
	`årštf
(
ssd
->
ouutfe
, "%16Îd %10d %6d %2d %16Îd %16Îd %10Îd\n", 
»q
->
time
,„eq->
l¢
,„eq->
size
,

1208 
»q
->
İ”©iÚ
,„eq->
begš_time
,„eq->
»¥Ú£_time
,„eq->»¥Ú£_tim-„eq->
time
);

1209 
	`fæush
(
ssd
->
ouutfe
);

1211 ià(
»q
->
»¥Ú£_time
 -„eq->
begš_time
 == 0) {

1212 
	`´štf
("the„esponseime is 0?? \n");

1213 
	`g‘ch¬
();

1216 ià(
»q
->
İ”©iÚ
 =ğ
READ
) {

1217 
ssd
->
»ad_»que¡_couÁ
++;

1218 
ssd
->
»ad_avg
 = ssd->»ad_avg + (
»q
->
»¥Ú£_time
 -„eq->
time
);

1220 
ssd
->
wr™e_»que¡_couÁ
++;

1221 
ssd
->
wr™e_avg
 = ssd->wr™e_avg + (
»q
->
»¥Ú£_time
 -„eq->
time
);

1224 if(
»q
 =ğ
ssd
->
»que¡_queue
){

1227 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1228 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1229 
	`ä“
(
»q
);

1230 
ssd
->
»que¡_queue_Ëngth
--;

1232 
ssd
->
»que¡_queue
 = 
´e_node
->
Ãxt_node
;

1233 
´e_node
 =´e_node->
Ãxt_node
;

1235 
»q
 = 
´e_node
;

1243 ià(
»q
 =ğ
ssd
->
»que¡_
){

1245 
´e_node
->
Ãxt_node
 = 
»q
->next_node;

1246 
ssd
->
»que¡_
 = 
´e_node
;

1248 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1249 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1250 
	`ä“
(
»q
);

1251 
»q
 = 
NULL
;

1252 
ssd
->
»que¡_queue_Ëngth
--;

1258 
´e_node
->
Ãxt_node
 = 
»q
->next_node;

1259 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1260 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1261 
	`ä“
(
»q
);

1262 
»q
 = 
´e_node
->
Ãxt_node
;

1263 
ssd
->
»que¡_queue_Ëngth
--;

1277 
æag
 = 1;

1278 
sub
 = 
»q
->
subs
;

1281 #ifdeà
DEBUGSUSPEND


1282 
	`´štf
("respondingime has‚o valueƒnterƒlse,haveo considerhe sub„equest here.\n");

1283 
	`´štf
("sub begš_timi %Îd, com¶‘e_timi %Îd,sub->Ãxˆ¡©%d, sub_Ãxt_tim%Îd,hi »que¡' sub, oÆy†™Úsub, o³¿tiÚ[%d] 0 i wr™e,ÍÀ[%d],chªÃl[%d], ch[%d], d›[%d], block[%d],…age[%d]\n", 
sub
->
begš_time
, sub->
com¶‘e_time
, sub->
Ãxt_¡©e
, sub->
Ãxt_¡©e_´ediù_time
, sub->
İ”©iÚ
, sub->
Ín
, sub->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1287 
sub
 !ğ
NULL
) {

1288 ià(
¡¬t_time
 == 0)

1289 
¡¬t_time
 = 
sub
->
begš_time
;

1290 ià(
¡¬t_time
 > 
sub
->
begš_time
)

1291 
¡¬t_time
 = 
sub
->
begš_time
;

1292 ià(
’d_time
 < 
sub
->
com¶‘e_time
)

1293 
’d_time
 = 
sub
->
com¶‘e_time
;

1294 ià((
sub
->
cu¼’t_¡©e
 =ğ
SR_COMPLETE
è|| ((sub->
Ãxt_¡©e
 == SR_COMPLETE) &&

1295 (
sub
->
Ãxt_¡©e_´ediù_time
 <=

1296 
ssd
->
cu¼’t_time
)))

1298 #ifdeà
DEBUGSUSPEND


1299 
	`´štf
("sub begš_timi %Îd, com¶‘e_timi %Îd,sub->Ãxˆ¡©%d, sub_Ãxt_tim%Îd,hi »que¡' sub, oÆy†™Úsub, o³¿tiÚ[%d] 0 i wr™e,ÍÀ[%d],chªÃl[%d], ch[%d], d›[%d], block[%d],…age[%d],h”ha b“Àfšished\n",
sub
->
begš_time
, sub->
com¶‘e_time
, sub->
Ãxt_¡©e
, sub->
Ãxt_¡©e_´ediù_time
, sub->
İ”©iÚ
, sub->
Ín
, sub->
loÿtiÚ
->
chªÃl
, sub->loÿtiÚ->
ch
, sub->loÿtiÚ->
d›
, sub->loÿtiÚ->
block
, sub->loÿtiÚ->
·ge
);

1302 
sub
 = sub->
Ãxt_subs
;

1304 
æag
 = 0;

1309 #ifdeà
DEBUGSUSPEND


1310 
	`´štf
("æag h”i %d, *** 1 m—n fšished.0‚o\n",
æag
);

1312 ià(
æag
 == 1) {

1315 #ifdeà
DEBUGSUSPEND


1316 
	`´štf
("now begšØş—¸thssd->»q. %16Îd %10d %6d %2d %16Îd %16Îd %10Îd\n", 
»q
->
time
,„eq->
l¢
,„eq->
size
,

1317 
»q
->
İ”©iÚ
, 
¡¬t_time
, 
’d_time
,ƒnd_tim-„eq->
time
);

1320 
	`årštf
(
ssd
->
ouutfe
, "%16Îd %10d %6d %2d %16Îd %16Îd %10Îd\n", 
»q
->
time
,„eq->
l¢
,„eq->
size
,

1321 
»q
->
İ”©iÚ
, 
¡¬t_time
, 
’d_time
,ƒnd_tim-„eq->
time
);

1322 
	`fæush
(
ssd
->
ouutfe
);

1324 ià(
’d_time
 - 
¡¬t_time
 == 0) {

1325 
	`´štf
("the„esponseime is 0?? \n");

1326 
	`g‘ch¬
();

1329 ià(
»q
->
İ”©iÚ
 =ğ
READ
) {

1330 
ssd
->
»ad_»que¡_couÁ
++;

1331 
ssd
->
»ad_avg
 = ssd->»ad_avg + (
’d_time
 - 
»q
->
time
);

1333 
ssd
->
wr™e_»que¡_couÁ
++;

1334 
ssd
->
wr™e_avg
 = ssd->wr™e_avg + (
’d_time
 - 
»q
->
time
);

1338 if(
»q
 =ğ
ssd
->
»que¡_queue
){

1340 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1341 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1342 
	`ä“
(
»q
);

1343 
ssd
->
»que¡_queue_Ëngth
--;

1345 
ssd
->
»que¡_queue
 = 
´e_node
->
Ãxt_node
;

1346 
´e_node
 =´e_node->
Ãxt_node
;

1348 
»q
 = 
´e_node
;

1356 ià(
»q
 =ğ
ssd
->
»que¡_
){

1358 
´e_node
->
Ãxt_node
 = 
»q
->next_node;

1359 
ssd
->
»que¡_
 = 
´e_node
;

1361 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1362 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1363 
	`ä“
(
»q
);

1364 
»q
 = 
NULL
;

1365 
ssd
->
»que¡_queue_Ëngth
--;

1371 
´e_node
->
Ãxt_node
 = 
»q
->next_node;

1372 
	`ä“
(
»q
->
Ãed_di¡r_æag
);

1373 
»q
->
Ãed_di¡r_æag
 = 
NULL
;

1374 
	`ä“
(
»q
);

1375 
»q
 = 
´e_node
->
Ãxt_node
;

1376 
ssd
->
»que¡_queue_Ëngth
--;

1387 
´e_node
 = 
»q
;

1388 
»q
 =„eq->
Ãxt_node
;

1395 
	}
}

1404 
	$¡©i¡ic_ouut
(
ssd_šfo
 *
ssd
) {

1405 
Ín_couÁ
 = 0, 
i
, 
j
, 
k
, 
l
, 
m
, 
”a£
 = 0, 
¶ªe_”a£
 = 0, 
‹mp_ch_chªÃl
 = 0;

1406 
gc_’”gy
 = 0.0;

1407 #ifdeà
DEBUG_CURR_TIME


1408 
	`´štf
("’‹¸¡©i¡ic_ouut, cu¼’ˆtime:%Îd\n",
ssd
->
cu¼’t_time
);

1410 
‹mp_ch_chªÃl
 = 
ssd
->
·¿m‘”
->
ch_num
 / ssd->·¿m‘”->
chªÃl_numb”
;

1412 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1413 
l
 = 0;† < 
‹mp_ch_chªÃl
;†++) {

1414 
j
 = 0; j < 
ssd
->
·¿m‘”
->
d›_ch
; j++) {

1415 
k
 = 0; k < 
ssd
->
·¿m‘”
->
¶ªe_d›
; k++) {

1416 
¶ªe_”a£
 = 0;

1417 
m
 = 0; m < 
ssd
->
·¿m‘”
->
block_¶ªe
; m++) {

1418 ià(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
blk_h—d
[
m
].
”a£_couÁ
 > 0) {

1419 
”a£
 =ƒrase +

1420 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
blk_h—d
[
m
].
”a£_couÁ
;

1421 
¶ªe_”a£
 +ğ
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
blk_h—d
[
m
].
”a£_couÁ
;

1424 
	`årštf
(
ssd
->
ouutfe
, "th%d chªÃl, %d ch, %d d›, %d…ÏÃ ha : %13dƒ¿£ o³¿tiÚs\n", 
i
, 
l
, 
j
, 
k
, 
¶ªe_”a£
);

1425 
	`årštf
(
ssd
->
¡©i¡icfe
, "the %d channel, %d chip, %d die, %d…lane has : %13dƒrase operations\n",

1426 
i
, 
l
, 
j
, 
k
, 
¶ªe_”a£
);

1431 
	`årštf
(
ssd
->
ouutfe
, "\n");

1432 
	`årštf
(
ssd
->
ouutfe
, "\n");

1433 
	`årštf
(
ssd
->
ouutfe
, "---------------------------statistic data---------------------------\n");

1434 
	`årštf
(
ssd
->
ouutfe
, "gøsu¥’dimes: %13d\n", ssd->
gc_su¥’d_times
);

1435 
	`årštf
(
ssd
->
ouutfe
, "wr™su¥’dimes: %13d\n", ssd->
wr™e_su¥’d_times
);

1438 
	`årštf
(
ssd
->
ouutfe
, "mš†¢: %13d\n", ssd->
mš_l¢
);

1439 
	`årštf
(
ssd
->
ouutfe
, "max†¢: %13d\n", ssd->
max_l¢
);

1440 
	`årštf
(
ssd
->
ouutfe
, "»ad couÁ: %13d\n", ssd->
»ad_couÁ
);

1441 
	`årštf
(
ssd
->
ouutfe
, "´og¿m couÁ: %13d", ssd->
´og¿m_couÁ
);

1442 
	`årštf
(
ssd
->
ouutfe
, " includehe flash write count†eaded by„ead„equests\n");

1443 
	`årštf
(
ssd
->
ouutfe
, "th»ad o³¿tiÚ†—ded by un-cov”ed upd©couÁ: %13d\n", ssd->
upd©e_»ad_couÁ
);

1444 
	`årštf
(
ssd
->
ouutfe
, "”a£ couÁ: %13d\n", ssd->
”a£_couÁ
);

1445 
	`årštf
(
ssd
->
ouutfe
, "dœeùƒ¿£ couÁ: %13d\n", ssd->
dœeù_”a£_couÁ
);

1446 
	`årštf
(
ssd
->
ouutfe
, "cİy back couÁ: %13d\n", ssd->
cİy_back_couÁ
);

1447 
	`årštf
(
ssd
->
ouutfe
, "muÉi-¶ª´og¿m couÁ: %13d\n", ssd->
m_¶ªe_´og_couÁ
);

1448 
	`årštf
(
ssd
->
ouutfe
, "muÉi-¶ª»ad couÁ: %13d\n", ssd->
m_¶ªe_»ad_couÁ
);

1449 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—vwr™couÁ: %13d\n", ssd->
š‹¾—ve_couÁ
);

1450 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—v»ad couÁ: %13d\n", ssd->
š‹¾—ve_»ad_couÁ
);

1451 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—vtwØ¶ªªd oÃ…rog¿m couÁ: %13d\n", ssd->
š‹r_m¶ªe_´og_couÁ
);

1452 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—vtwØ¶ªcouÁ: %13d\n", ssd->
š‹r_m¶ªe_couÁ
);

1453 
	`årštf
(
ssd
->
ouutfe
, "gøcİy back couÁ: %13d\n", ssd->
gc_cİy_back
);

1454 
	`årštf
(
ssd
->
ouutfe
, "wr™æash couÁ: %13d\n", ssd->
wr™e_æash_couÁ
);

1455 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—v”a£ couÁ: %13d\n", ssd->
š‹¾—ve_”a£_couÁ
);

1456 
	`årštf
(
ssd
->
ouutfe
, "muÉË…ÏÃƒ¿£ couÁ: %13d\n", ssd->
m¶ªe_”a£_cÚut
);

1457 
	`årštf
(
ssd
->
ouutfe
, "š‹¾—vmuÉË…ÏÃƒ¿£ couÁ: %13d\n", ssd->
š‹¾—ve_m¶ªe_”a£_couÁ
);

1458 
	`årštf
(
ssd
->
ouutfe
, "»ad„eque¡ couÁ: %13d\n", ssd->
»ad_»que¡_couÁ
);

1459 
	`årštf
(
ssd
->
ouutfe
, "wr™»que¡ couÁ: %13d\n", ssd->
wr™e_»que¡_couÁ
);

1460 
	`årštf
(
ssd
->
ouutfe
, "»ad„eque¡‡v”agsize: %13f\n", ssd->
ave_»ad_size
);

1461 
	`årštf
(
ssd
->
ouutfe
, "wr™»que¡‡v”agsize: %13f\n", ssd->
ave_wr™e_size
);

1462 
	`årštf
(
ssd
->
ouutfe
, "»ad„eque¡‡v”ag»¥Ú£ime: %Îd\n", ssd->
»ad_avg
 / ssd->
»ad_»que¡_couÁ
);

1463 
	`årštf
(
ssd
->
ouutfe
, "wr™»que¡‡v”ag»¥Ú£ime: %Îd\n", ssd->
wr™e_avg
 / ssd->
wr™e_»que¡_couÁ
);

1464 
	`årštf
(
ssd
->
ouutfe
, "bufã¸»ad h™s: %13d\n", ssd->
d¿m
->
bufãr
->
»ad_h™
);

1465 
	`årštf
(
ssd
->
ouutfe
, "bufã¸»ad miss: %13d\n", ssd->
d¿m
->
bufãr
->
»ad_miss_h™
);

1466 
	`årštf
(
ssd
->
ouutfe
, "bufã¸wr™h™s: %13d\n", ssd->
d¿m
->
bufãr
->
wr™e_h™
);

1467 
	`årštf
(
ssd
->
ouutfe
, "bufã¸wr™miss: %13d\n", ssd->
d¿m
->
bufãr
->
wr™e_miss_h™
);

1468 
	`årštf
(
ssd
->
ouutfe
, "”a£: %13d\n", 
”a£
);

1470 
	`årštf
(
ssd
->
ouutfe
, "Üigš®Ù®…age i %13d\n", ssd->
Üigš®_tÙ®_·ges_numb”
);

1471 
	`årštf
(
ssd
->
ouutfe
, "Úly…»_´oûs£d…age numb” i %13d\n", ssd->
aá”_´e_´oûss_·ges_numb”
);

1472 
	`årštf
(
ssd
->
ouutfe
, "aá”…»°roûs£d„—d…¬ˆªd‡ged…age ,h’†eáhavaabË‚umb” i %13d\n", ssd->
aá”_´e_´oûs£_ªd_aged_·ges_numb”
);

1474 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++){

1475 
l
 = 0;† < 
‹mp_ch_chªÃl
;†++) {

1476 
j
 = 0; j < 
ssd
->
·¿m‘”
->
d›_ch
; j++){

1477 
k
 = 0; k < 
ssd
->
·¿m‘”
->
¶ªe_d›
; k++) {

1478 
	`årštf
(
ssd
->
ouutfe
, "chªÃÈ%d, ch:%d, d›:%d,…ÏÃ:%d havä“…age: %d\n", 
i
, 
l
, 
j
, 
k
,

1479 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
ä“_·ge
);

1480 
ssd
->
Ï¡_tÙ®_avaabË_·ges_numb”
 +ğssd->
chªÃl_h—d
[
i
].
ch_h—d
[
l
].
d›_h—d
[
j
].
¶ªe_h—d
[
k
].
ä“_·ge
;

1487 
	`årštf
(
ssd
->
ouutfe
, "Ï¡_tÙ®_avaabË_·ge numb” i %13d\n", ssd->
Ï¡_tÙ®_avaabË_·ges_numb”
);

1494 
	`fæush
(
ssd
->
ouutfe
);

1496 
	`fşo£
(
ssd
->
ouutfe
);

1499 
	`årštf
(
ssd
->
¡©i¡icfe
, "\n");

1500 
	`årštf
(
ssd
->
¡©i¡icfe
, "\n");

1501 
	`årštf
(
ssd
->
¡©i¡icfe
, "---------------------------statistic data---------------------------\n");

1502 
	`årštf
(
ssd
->
¡©i¡icfe
, "mš†¢: %13d\n", ssd->
mš_l¢
);

1503 
	`årštf
(
ssd
->
¡©i¡icfe
, "max†¢: %13d\n", ssd->
max_l¢
);

1504 
	`årštf
(
ssd
->
¡©i¡icfe
, "»ad couÁ: %13d\n", ssd->
»ad_couÁ
);

1505 
	`årštf
(
ssd
->
¡©i¡icfe
, "´og¿m couÁ: %13d", ssd->
´og¿m_couÁ
);

1506 
	`årštf
(
ssd
->
¡©i¡icfe
, " includehe flash write count†eaded by„ead„equests\n");

1507 
	`årštf
(
ssd
->
¡©i¡icfe
, "th»ad o³¿tiÚ†—ded by un-cov”ed upd©couÁ: %13d\n", ssd->
upd©e_»ad_couÁ
);

1508 
	`årštf
(
ssd
->
¡©i¡icfe
, "”a£ couÁ: %13d\n", ssd->
”a£_couÁ
);

1509 
	`årštf
(
ssd
->
¡©i¡icfe
, "dœeùƒ¿£ couÁ: %13d\n", ssd->
dœeù_”a£_couÁ
);

1510 
	`årštf
(
ssd
->
¡©i¡icfe
, "cİy back couÁ: %13d\n", ssd->
cİy_back_couÁ
);

1511 
	`årštf
(
ssd
->
¡©i¡icfe
, "muÉi-¶ª´og¿m couÁ: %13d\n", ssd->
m_¶ªe_´og_couÁ
);

1512 
	`årštf
(
ssd
->
¡©i¡icfe
, "muÉi-¶ª»ad couÁ: %13d\n", ssd->
m_¶ªe_»ad_couÁ
);

1513 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—vcouÁ: %13d\n", ssd->
š‹¾—ve_couÁ
);

1514 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—v»ad couÁ: %13d\n", ssd->
š‹¾—ve_»ad_couÁ
);

1515 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—vtwØ¶ªªd oÃ…rog¿m couÁ: %13d\n", ssd->
š‹r_m¶ªe_´og_couÁ
);

1516 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—vtwØ¶ªcouÁ: %13d\n", ssd->
š‹r_m¶ªe_couÁ
);

1517 
	`årštf
(
ssd
->
¡©i¡icfe
, "gøcİy back couÁ: %13d\n", ssd->
gc_cİy_back
);

1518 
	`årštf
(
ssd
->
¡©i¡icfe
, "wr™æash couÁ: %13d\n", ssd->
wr™e_æash_couÁ
);

1519 
	`årštf
(
ssd
->
¡©i¡icfe
, "wa¡·gcouÁ: %13d\n", ssd->
wa¡e_·ge_couÁ
);

1520 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—v”a£ couÁ: %13d\n", ssd->
š‹¾—ve_”a£_couÁ
);

1521 
	`årštf
(
ssd
->
¡©i¡icfe
, "muÉË…ÏÃƒ¿£ couÁ: %13d\n", ssd->
m¶ªe_”a£_cÚut
);

1522 
	`årštf
(
ssd
->
¡©i¡icfe
, "š‹¾—vmuÉË…ÏÃƒ¿£ couÁ: %13d\n", ssd->
š‹¾—ve_m¶ªe_”a£_couÁ
);

1523 
	`årštf
(
ssd
->
¡©i¡icfe
, "»ad„eque¡ couÁ: %13d\n", ssd->
»ad_»que¡_couÁ
);

1524 
	`årštf
(
ssd
->
¡©i¡icfe
, "wr™»que¡ couÁ: %13d\n", ssd->
wr™e_»que¡_couÁ
);

1525 
	`årštf
(
ssd
->
¡©i¡icfe
, "»ad„eque¡‡v”agsize: %13f\n", ssd->
ave_»ad_size
);

1526 
	`årštf
(
ssd
->
¡©i¡icfe
, "wr™»que¡‡v”agsize: %13f\n", ssd->
ave_wr™e_size
);

1527 
	`årštf
(
ssd
->
¡©i¡icfe
, "»ad„eque¡‡v”ag»¥Ú£ime: %Îd\n", ssd->
»ad_avg
 / ssd->
»ad_»que¡_couÁ
);

1528 
	`årštf
(
ssd
->
¡©i¡icfe
, "write„equest‡verage„esponseime: %lld\n",

1529 
ssd
->
wr™e_avg
 / ssd->
wr™e_»que¡_couÁ
);

1530 
	`årštf
(
ssd
->
¡©i¡icfe
, "bufã¸»ad h™s: %13d\n", ssd->
d¿m
->
bufãr
->
»ad_h™
);

1531 
	`årštf
(
ssd
->
¡©i¡icfe
, "bufã¸»ad miss: %13d\n", ssd->
d¿m
->
bufãr
->
»ad_miss_h™
);

1532 
	`årštf
(
ssd
->
¡©i¡icfe
, "bufã¸wr™h™s: %13d\n", ssd->
d¿m
->
bufãr
->
wr™e_h™
);

1533 
	`årštf
(
ssd
->
¡©i¡icfe
, "bufã¸wr™miss: %13d\n", ssd->
d¿m
->
bufãr
->
wr™e_miss_h™
);

1534 
	`årštf
(
ssd
->
¡©i¡icfe
, "”a£: %13d\n", 
”a£
);

1537 
	`fæush
(
ssd
->
¡©i¡icfe
);

1539 
	`fşo£
(
ssd
->
¡©i¡icfe
);

1540 
	}
}

1546 
	$size
(
¡Üed
) {

1547 
i
, 
tÙ®
 = 0, 
mask
 = 0x80000000;

1549 #ifdeà
DEBUG


1550 
	`´štf
("enter size\n");

1552 
i
 = 1; i <= 32; i++) {

1553 ià(
¡Üed
 & 
mask
è
tÙ®
++;

1554 
¡Üed
 <<= 1;

1556 #ifdeà
DEBUG


1557 
	`´štf
("ËavsiztÙ®†¢‚umb” iÀ»que¡ : %d\n",
tÙ®
);

1559  
tÙ®
;

1560 
	}
}

1569 
	$Œªsãr_size
(
ssd_šfo
 *
ssd
, 
Ãed_di¡ribu‹
, 
Ín
, 
»que¡
 *
»q
) {

1570 
fœ¡_Ín
, 
Ï¡_Ín
, 
¡©e
, 
Œªs_size
;

1571 
mask
 = 0, 
off£t1
 = 0, 
off£t2
 = 0;

1573 
fœ¡_Ín
 = 
»q
->
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1574 
Ï¡_Ín
 = (
»q
->
l¢
 +„eq->
size
 - 1è/ 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1576 
mask
 = ~(0xfffffffà<< (
ssd
->
·¿m‘”
->
sub·ge_·ge
));

1577 
¡©e
 = 
mask
;

1578 ià(
Ín
 =ğ
fœ¡_Ín
) {

1579 
off£t1
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - ((
Ín
 + 1è* ssd->·¿m‘”->sub·ge_·g- 
»q
->
l¢
);

1580 
¡©e
 = s‹ & (0xfffffffà<< 
off£t1
);

1582 ià(
Ín
 =ğ
Ï¡_Ín
) {

1583 
off£t2
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - ((
Ín
 + 1è* ssd->·¿m‘”->sub·ge_·g- (
»q
->
l¢
 +„eq->
size
));

1584 
¡©e
 = s‹ & (~(0xfffffffà<< 
off£t2
));

1587 
Œªs_size
 = 
	`size
(
¡©e
 & 
Ãed_di¡ribu‹
);

1589  
Œªs_size
;

1590 
	}
}

1601 
št64_t
 
	$fšd_Ã¬e¡_ev’t
(
ssd_šfo
 *
ssd
) {

1602 
i
, 
j
;

1603 
št64_t
 
time
 = 
MAX_INT64
;

1604 
št64_t
 
time1
 = 
MAX_INT64
;

1605 
št64_t
 
time2
 = 
MAX_INT64
;

1606 #ifdeà
DEBUG_CURR_TIME


1607 
	`´štf
("’‹¸fšd_Ã¬e¡_ev’t, ssd->cu¼’t_timi %Îd\n",
ssd
->
cu¼’t_time
);

1609 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1611 
	`´štf
("chªÃl[%d].Ãxt_¡©i 0x%x,ssd->chªÃl_h—d[%d].Ãxt_¡©e_´ediù_timi %Îd, chªÃl[%d].cu¼’t_¡©i 0x%x,ssd->chªÃl_h—d[%d].cu¼’t_timi %Îd\n",
i
,
ssd
->
chªÃl_h—d
[i].
Ãxt_¡©e
,i,ssd->chªÃl_h—d[i].
Ãxt_¡©e_´ediù_time
 ,i,ssd->chªÃl_h—d[i].
cu¼’t_¡©e
,i,ssd->chªÃl_h—d[i].
cu¼’t_time
 );

1613 
j
 = 0; j < 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
]; j++) {

1615 
	`´štf
("ssd->chªÃl_h—d[%d].ch_h—d[%d].Ãxt_¡©e_´ediù_timi %Îd, ssd->chªÃl_h—d[%d].ch_h—d[%d].Ãxt_¡©i 0x%x ssd->chªÃl_h—d[%d].ch_h—d[%d].cu¼’t_timi %Îd, ssd->chªÃl_h—d[%d].ch_h—d[%d].cu¼’t_¡©i 0x%x \n", 
i
,
j
,
ssd
->
chªÃl_h—d
[i].
ch_h—d
[j].
Ãxt_¡©e_´ediù_time
 ,i,j,ssd->chªÃl_h—d[i].ch_h—d[j].
Ãxt_¡©e
 , i,j,ssd->chªÃl_h—d[i].ch_h—d[j].
cu¼’t_time
 ,i,j,ssd->chªÃl_h—d[i].ch_h—d[j].
cu¼’t_¡©e
 );

1624 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1625 ià(
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e
 =ğ
CHANNEL_IDLE
)

1626 ià(
time1
 > 
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e_´ediù_time
)

1627 ià(
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e_´ediù_time
 > ssd->
cu¼’t_time
)

1628 
time1
 = 
ssd
->
chªÃl_h—d
[
i
].
Ãxt_¡©e_´ediù_time
;

1629 
j
 = 0; j < 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
]; j++) {

1634 ià(
time2
 > 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
Ãxt_¡©e_´ediù_time
)

1635 ià(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
Ãxt_¡©e_´ediù_time
 > ssd->
cu¼’t_time
)

1636 
time2
 = 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
Ãxt_¡©e_´ediù_time
;

1647 #ifdeà
DEBUG


1648 
	`´štf
("»suÉime1 i %Îd,ime2 i %Îd\n", 
time1
, 
time2
);

1652 
time
 = (
time1
 > 
time2
) ?ime2 :ime1;

1653  
time
;

1654 
	}
}

1659 
	$ä“_®l_node
(
ssd_šfo
 *
ssd
) {

1660 
i
, 
j
, 
k
, 
l
, 
n
;

1661 
bufãr_group
 *
±
 = 
NULL
;

1662 
dœeù_”a£
 *
”a£_node
 = 
NULL
;

1663 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++) {

1664 
j
 = 0; j < 
ssd
->
·¿m‘”
->
ch_chªÃl
[0]; j++) {

1665 
k
 = 0; k < 
ssd
->
·¿m‘”
->
d›_ch
; k++) {

1666 
l
 = 0;† < 
ssd
->
·¿m‘”
->
¶ªe_d›
;†++) {

1667 
n
 = 0;‚ < 
ssd
->
·¿m‘”
->
block_¶ªe
;‚++) {

1668 
	`ä“
(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
n
].
·ge_h—d
);

1669 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
n
].
·ge_h—d
 = 
NULL
;

1671 
	`ä“
(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
);

1672 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
 = 
NULL
;

1673 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
”a£_node
 !ğ
NULL
) {

1674 
”a£_node
 = 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].erase_node;

1675 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
”a£_node
 =ƒ¿£_node->
Ãxt_node
;

1676 
	`ä“
(
”a£_node
);

1677 
”a£_node
 = 
NULL
;

1681 
	`ä“
(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
);

1682 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
 = 
NULL
;

1684 
	`ä“
(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
);

1685 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
 = 
NULL
;

1687 
	`ä“
(
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
);

1688 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
 = 
NULL
;

1690 
	`ä“
(
ssd
->
chªÃl_h—d
);

1691 
ssd
->
chªÃl_h—d
 = 
NULL
;

1693 
	`avlT»eDe¡roy
(
ssd
->
d¿m
->
bufãr
);

1694 
ssd
->
d¿m
->
bufãr
 = 
NULL
;

1696 
	`ä“
(
ssd
->
d¿m
->
m­
->
m­_’Œy
);

1697 
ssd
->
d¿m
->
m­
->
m­_’Œy
 = 
NULL
;

1698 
	`ä“
(
ssd
->
d¿m
->
m­
);

1699 
ssd
->
d¿m
->
m­
 = 
NULL
;

1700 
	`ä“
(
ssd
->
d¿m
);

1701 
ssd
->
d¿m
 = 
NULL
;

1702 
	`ä“
(
ssd
->
·¿m‘”
);

1703 
ssd
->
·¿m‘”
 = 
NULL
;

1705 
	`ä“
(
ssd
);

1706 
ssd
 = 
NULL
;

1707 
	}
}

1714 
ssd_šfo
 *
	$make_aged
(
ssd_šfo
 *
ssd
) {

1715 
i
, 
j
, 
k
, 
l
, 
m
, 
n
, 
µn
;

1716 
th»should
, 
æag
 = 0;

1718 ià(
ssd
->
·¿m‘”
->
aged
 == 1) {

1720 
th»should
 = (è(
ssd
->
·¿m‘”
->
block_¶ªe
 * ssd->·¿m‘”->
·ge_block
 * ssd->·¿m‘”->
aged_¿tio
);

1721 
i
 = 0; i < 
ssd
->
·¿m‘”
->
chªÃl_numb”
; i++)

1722 
j
 = 0; j < 
ssd
->
·¿m‘”
->
ch_chªÃl
[
i
]; j++)

1723 
k
 = 0; k < 
ssd
->
·¿m‘”
->
d›_ch
; k++)

1724 
l
 = 0;† < 
ssd
->
·¿m‘”
->
¶ªe_d›
;†++) {

1725 
æag
 = 0;

1726 
m
 = 0; m < 
ssd
->
·¿m‘”
->
block_¶ªe
; m++) {

1727 ià(
æag
 >ğ
th»should
) {

1730 
n
 = 0;‚ < (
ssd
->
·¿m‘”
->
·ge_block
 * ssd->·¿m‘”->
aged_¿tio
 + 1);‚++) {

1731 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
·ge_h—d
[
n
].
v®id_¡©e
 = 0;

1732 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
·ge_h—d
[
n
].
ä“_¡©e
 = 0;

1733 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
·ge_h—d
[
n
].
Ín
 = 0;

1734 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
ä“_·ge_num
--;

1735 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
šv®id_·ge_num
++;

1736 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
blk_h—d
[
m
].
Ï¡_wr™e_·ge
++;

1737 
ssd
->
chªÃl_h—d
[
i
].
ch_h—d
[
j
].
d›_h—d
[
k
].
¶ªe_h—d
[
l
].
ä“_·ge
--;

1738 
æag
++;

1740 
µn
 = 
	`fšd_µn
(
ssd
, 
i
, 
j
, 
k
, 
l
, 
m
, 
n
);

1741 #ifdeà
DEBUGONLYGC


1749  
ssd
;

1752  
ssd
;

1753 
	}
}

1760 
ssd_šfo
 *
	$no_bufãr_di¡ribu‹
(
ssd_šfo
 *
ssd
) {

1761 
l¢
, 
Ín
, 
Ï¡_Ín
, 
fœ¡_Ín
, 
com¶‘e_æag
 = 0, 
¡©e
;

1762 
æag
 = 0, 
æag1
 = 1, 
aùive_»giÚ_æag
 = 0;

1763 
»que¡
 *
»q
 = 
NULL
;

1764 
sub_»que¡
 *
sub
 = 
NULL
, *
sub_r
 = NULL, *
upd©e
 = NULL;

1765 
loÿl
 *
loc
 = 
NULL
;

1766 
chªÃl_šfo
 *
p_ch
 = 
NULL
;

1767 
mask
 = 0;

1768 
off£t1
 = 0, 
off£t2
 = 0;

1769 
sub_size
 = 0;

1770 
sub_¡©e
 = 0;

1771 
ssd
->
d¿m
->
cu¼’t_time
 = ssd->current_time;

1773 #ifdeà
DEBUG_CURR_TIME


1774 
	`´štf
("cu¼’t_timi %Îd iÀno_bufãr_di¡ribu‹ funùiÚ\n", 
ssd
->
cu¼’t_time
);

1776 
»q
 = 
ssd
->
»que¡_
;

1777 
l¢
 = 
»q
->lsn;

1778 
Ín
 = 
»q
->
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1779 
Ï¡_Ín
 = (
»q
->
l¢
 +„eq->
size
 - 1è/ 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1780 
fœ¡_Ín
 = 
»q
->
l¢
 / 
ssd
->
·¿m‘”
->
sub·ge_·ge
;

1782 ià(
»q
->
İ”©iÚ
 =ğ
READ
) {

1783 
Ín
 <ğ
Ï¡_Ín
) {

1784 
sub_¡©e
 = (
ssd
->
d¿m
->
m­
->
m­_’Œy
[
Ín
].
¡©e
 & 0x7fffffff);

1785 
sub_size
 = 
	`size
(
sub_¡©e
);

1786 
sub
 = 
	`ü—t_sub_»que¡
(
ssd
, 
Ín
, 
sub_size
, 
sub_¡©e
, 
»q
,„eq->
İ”©iÚ
);

1787 
Ín
++;

1789 } ià(
»q
->
İ”©iÚ
 =ğ
WRITE
) {

1790 
Ín
 <ğ
Ï¡_Ín
) {

1791 
mask
 = ~(0xfffffffà<< (
ssd
->
·¿m‘”
->
sub·ge_·ge
));

1792 
¡©e
 = 
mask
;

1793 ià(
Ín
 =ğ
fœ¡_Ín
) {

1794 
off£t1
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - ((
Ín
 + 1è* ssd->·¿m‘”->sub·ge_·g- 
»q
->
l¢
);

1795 
¡©e
 = s‹ & (0xfffffffà<< 
off£t1
);

1797 ià(
Ín
 =ğ
Ï¡_Ín
) {

1798 
off£t2
 = 
ssd
->
·¿m‘”
->
sub·ge_·ge
 -

1799 ((
Ín
 + 1è* 
ssd
->
·¿m‘”
->
sub·ge_·ge
 - (
»q
->
l¢
 +„eq->
size
));

1800 
¡©e
 = s‹ & (~(0xfffffffà<< 
off£t2
));

1802 
sub_size
 = 
	`size
(
¡©e
);

1804 
sub
 = 
	`ü—t_sub_»que¡
(
ssd
, 
Ín
, 
sub_size
, 
¡©e
, 
»q
,„eq->
İ”©iÚ
);

1805 
Ín
++;

1809  
ssd
;

1810 
	}
}

	@/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/ssd.h

18 
	~<¡dlib.h
>

19 
	~<¡dio.h
>

20 
	~<time.h
>

21 
	~<¡ršg.h
>

22 
	~<sys/ty³s.h
>

23 
	~"š™Ÿlize.h
"

24 
	~"æash.h
"

25 
	~"·gem­.h
"

27 
	#MAX_INT64
 0x7ffffffffffffffæl

	)

36 
´štfsub_»que¡_¡©us
(
ssd_šfo
 *
ssd
);

37 
´štf_ssd_»que¡_queue
(
ssd_šfo
 *
ssd
);

39 
´štf_ssd_gc_node
(
ssd_šfo
 *
ssd
);

41 
judgšg_»ad_š_gc_ch
(
ssd_šfo
 *
ssd
, 
chªÃl
);

42 
´štf_ev”y_ch_»ad_sub»que¡
(
ssd_šfo
 *
ssd
);

43 
´štf_ev”y_ch_¡©ic_sub»que¡
(
ssd_šfo
 *
ssd
);

45 
ÿlc_»q_¦ack_time
(
»que¡
 * 
»q
);

47 
´štf_gc_node_šfÜm©iÚ
(
gc_İ”©iÚ
* 
gc_node
);

49 
ssd_šfo
 *
simuÏ‹
(ssd_info *);

51 
g‘_»que¡s
(
ssd_šfo
 *);

53 
ssd_šfo
 *
bufãr_mªagem’t
(ssd_info *);

55 
Ín2µn
(
ssd_šfo
 *, 
l¢
);

57 
ssd_šfo
 *
di¡ribu‹
(ssd_info *);

59 
Œaû_ouut
(
ssd_šfo
 *);

61 
¡©i¡ic_ouut
(
ssd_šfo
 *);

63 
size
();

65 
Œªsãr_size
(
ssd_šfo
 *, , , 
»que¡
 *);

67 
št64_t
 
fšd_Ã¬e¡_ev’t
(
ssd_šfo
 *);

69 
ä“_®l_node
(
ssd_šfo
 *);

71 
ssd_šfo
 *
make_aged
(ssd_info *);

73 
ssd_šfo
 *
no_bufãr_di¡ribu‹
(ssd_info *);

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/malloc.h

19 #iâdeà
_MALLOC_H


20 
	#_MALLOC_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<¡ddef.h
>

24 
	~<¡dio.h
>

26 #ifdeà
_LIBC


27 
	#__MALLOC_HOOK_VOLATILE


	)

28 
	#__MALLOC_DEPRECATED


	)

30 
	#__MALLOC_HOOK_VOLATILE
 vŞ©e

	)

31 
	#__MALLOC_DEPRECATED
 
__©Œibu‹_d•»ÿ‹d__


	)

35 
__BEGIN_DECLS


38 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

41 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

42 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

49 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

50 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

53 
	$ä“
 (*
__±r
è
__THROW
;

56 
	$cä“
 (*
__±r
è
__THROW
;

59 *
	$mem®ign
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

60 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

63 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

67 *
	$pv®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

71 *(*
__mÜecÜe
è(
±rdiff_t
 
__size
);

74 *
	$__deçuÉ_mÜecÜe
 (
±rdiff_t
 
__size
)

75 
__THROW
 
__©Œibu‹_m®loc__
;

79 
	sm®lšfo


81 
¬’a
;

82 
Üdblks
;

83 
smblks
;

84 
hblks
;

85 
hblkhd
;

86 
usmblks
;

87 
fsmblks
;

88 
uÜdblks
;

89 
fÜdblks
;

90 
k“pco¡
;

94 
m®lšfo
 
	$m®lšfo
 (è
__THROW
;

97 #iâdeà
M_MXFAST


98 
	#M_MXFAST
 1

	)

100 #iâdeà
M_NLBLKS


101 
	#M_NLBLKS
 2

	)

103 #iâdeà
M_GRAIN


104 
	#M_GRAIN
 3

	)

106 #iâdeà
M_KEEP


107 
	#M_KEEP
 4

	)

111 
	#M_TRIM_THRESHOLD
 -1

	)

112 
	#M_TOP_PAD
 -2

	)

113 
	#M_MMAP_THRESHOLD
 -3

	)

114 
	#M_MMAP_MAX
 -4

	)

115 
	#M_CHECK_ACTION
 -5

	)

116 
	#M_PERTURB
 -6

	)

117 
	#M_ARENA_TEST
 -7

	)

118 
	#M_ARENA_MAX
 -8

	)

121 
	$m®lİt
 (
__·¿m
, 
__v®
è
__THROW
;

125 
	$m®loc_Œim
 (
size_t
 
__·d
è
__THROW
;

129 
size_t
 
	$m®loc_u§bË_size
 (*
__±r
è
__THROW
;

132 
	$m®loc_¡©s
 (è
__THROW
;

135 
	$m®loc_šfo
 (
__İtiÚs
, 
FILE
 *
__å
è
__THROW
;

138 *
	$m®loc_g‘_¡©e
 (è
__THROW
;

142 
	$m®loc_£t_¡©e
 (*
__±r
è
__THROW
;

147 (*
__MALLOC_HOOK_VOLATILE
 
__m®loc_š™Ÿlize_hook
) ()

148 
__MALLOC_DEPRECATED
;

150 (*
__MALLOC_HOOK_VOLATILE
 
__ä“_hook
è(*
__±r
,

152 
__MALLOC_DEPRECATED
;

153 *(*
__MALLOC_HOOK_VOLATILE
 
__m®loc_hook
)(
size_t
 
__size
,

155 
__MALLOC_DEPRECATED
;

156 *(*
__MALLOC_HOOK_VOLATILE
 
__»®loc_hook
)(*
__±r
,

157 
size_t
 
__size
,

159 
__MALLOC_DEPRECATED
;

160 *(*
__MALLOC_HOOK_VOLATILE
 
__mem®ign_hook
)(
size_t
 
__®ignm’t
,

161 
size_t
 
__size
,

163 
__MALLOC_DEPRECATED
;

164 (*
__MALLOC_HOOK_VOLATILE
 
__aá”_mÜecÜe_hook
) ();

167 
	$__m®loc_check_š™
 (è
__THROW
 
__MALLOC_DEPRECATED
;

170 
__END_DECLS


	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@avlTree.h

1 #iâdeà
AVLTREE_H


2 
	#AVLTREE_H
 10000

	)

4 
	~<¡ršg.h
>

5 
	~<m®loc.h
>

6 
	~<¡dlib.h
>

8 
	#AVL_NULL
 (
TREE_NODE
 *)0

	)

10 
	#EH_FACTOR
 0

	)

11 
	#LH_FACTOR
 1

	)

12 
	#RH_FACTOR
 -1

	)

13 
	#LEFT_MINUS
 0

	)

14 
	#RIGHT_MINUS
 1

	)

17 
	#ORDER_LIST_WANTED


	)

19 
	#INSERT_PREV
 0

	)

20 
	#INSERT_NEXT
 1

	)

22 
	s_AVL_TREE_NODE
 {

23 #ifdeà
ORDER_LIST_WANTED


24 
_AVL_TREE_NODE
 *
	m´ev
;

25 
_AVL_TREE_NODE
 *
	mÃxt
;

27 
_AVL_TREE_NODE
 *
	mŒ“_roÙ
;

28 
_AVL_TREE_NODE
 *
	mËá_chd
;

29 
_AVL_TREE_NODE
 *
	mright_chd
;

30 
	mbf
;

31 } 
	tTREE_NODE
;

33 
	sbufãr_šfo
 {

34 
	m»ad_h™
;

35 
	m»ad_miss_h™
;

36 
	mwr™e_h™
;

37 
	mwr™e_miss_h™
;

39 
bufãr_group
 *
	mbufãr_h—d
;

40 
bufãr_group
 *
	mbufãr_
;

41 
TREE_NODE
 *
	mpT»eH—d”
;

43 
	mmax_bufãr_£ùÜ
;

44 
	mbufãr_£ùÜ_couÁ
;

46 #ifdeà
ORDER_LIST_WANTED


47 
TREE_NODE
 *
	mpLi¡H—d”
;

48 
TREE_NODE
 *
	mpLi¡Ta
;

50 
	mcouÁ
;

51 (*
	mkeyCom·»
)(
	mTREE_NODE
 *, TREE_NODE *);

53 (*
	mä“
)(
	mTREE_NODE
 *);

54 } 
	ttAVLT»e
;

57 
avlT»eHigh
(
TREE_NODE
 *);

59 
avlT»eCheck
(
tAVLT»e
 *, 
TREE_NODE
 *);

61 
R_RÙ©e
(
TREE_NODE
 **);

63 
L_RÙ©e
(
TREE_NODE
 **);

65 
LeáB®ªû
(
TREE_NODE
 **);

67 
RightB®ªû
(
TREE_NODE
 **);

69 
avlD–B®ªû
(
tAVLT»e
 *, 
TREE_NODE
 *, );

71 
AVL_TREE_LOCK
(
tAVLT»e
 *, );

73 
AVL_TREE_UNLOCK
(
tAVLT»e
 *);

75 
AVL_TREENODE_FREE
(
tAVLT»e
 *, 
TREE_NODE
 *);

77 #ifdeà
ORDER_LIST_WANTED


79 
Üd”Li¡In£¹
(
tAVLT»e
 *, 
TREE_NODE
 *, TREE_NODE *, );

81 
Üd”Li¡Remove
(
tAVLT»e
 *, 
TREE_NODE
 *);

83 
TREE_NODE
 *
avlT»eFœ¡
(
tAVLT»e
 *);

85 
TREE_NODE
 *
avlT»eLa¡
(
tAVLT»e
 *);

87 
TREE_NODE
 *
avlT»eNext
(TREE_NODE *
pNode
);

89 
TREE_NODE
 *
avlT»eP»v
(TREE_NODE *
pNode
);

93 
avlT»eIn£¹
(
tAVLT»e
 *, 
TREE_NODE
 **, TREE_NODE *, *);

95 
avlT»eRemove
(
tAVLT»e
 *, 
TREE_NODE
 *);

97 
TREE_NODE
 *
avlT»eLookup
(
tAVLT»e
 *, TREE_NODE *, TREE_NODE *);

99 
tAVLT»e
 *
avlT»eC»©e
(*, *);

101 
avlT»eDe¡roy
(
tAVLT»e
 *);

103 
avlT»eFlush
(
tAVLT»e
 *);

105 
avlT»eAdd
(
tAVLT»e
 *, 
TREE_NODE
 *);

107 
avlT»eD–
(
tAVLT»e
 *, 
TREE_NODE
 *);

109 
TREE_NODE
 *
avlT»eFšd
(
tAVLT»e
 *, TREE_NODE *);

111 
avlT»eCouÁ
(
tAVLT»e
 *);

	@flash.h

19 #iâdeà
FLASH_H


20 
	#FLASH_H
 100000

	)

22 
	~<¡dlib.h
>

23 
	~"·gem­.h
"

25 
ssd_šfo
 *
´oûss
(ssd_info *);

27 
ssd_šfo
 *
š£¹2bufãr
(ssd_šfØ*, , , 
sub_»que¡
 *, 
»que¡
 *);

29 
ssd_šfo
 *

30 
æash_·ge_¡©e_modify
(
ssd_šfo
 *, 
sub_»que¡
 *, , , , ,

33 
ssd_šfo
 *

34 
make_§me_Ëv–
(
ssd_šfo
 *, , , , , , );

36 
fšd_Ëv–_·ge
(
ssd_šfo
 *, , , , 
sub_»que¡
 *,

37 
sub_»que¡
 *);

39 
make_Ëv–_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub0
, sub_»que¡ *
sub1
);

40 
ssd_šfo
 *
compu‹_£rve_time
(ssd_šfØ*
ssd
, 
chªÃl
, 
ch
, 
d›
,

41 
sub_»que¡
 **
subs
, 
subs_couÁ
, 
commªd
);

44 
g‘_µn_fÜ_advªûd_commªds
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 **
subs
,

45 
subs_couÁ
, 
commªd
);

47 
g‘_µn_fÜ_nÜm®_commªd
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
sub_»que¡
 *
sub
);

49 
ssd_šfo
 *
dyÇmic_advªûd_´oûss
(ssd_šfØ*
ssd
, 
chªÃl
, 
ch
);

51 
sub_»que¡
 *
fšd_two_¶ªe_·ge
(
ssd_šfo
 *, sub_request *);

53 
sub_»que¡
 *
fšd_š‹¾—ve_»ad_·ge
(
ssd_šfo
 *, sub_request *);

55 
fšd_twİÏÃ_wr™e_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_twİÏÃ_Úe
,

56 
sub_»que¡
 *
sub_twİÏÃ_two
);

58 
fšd_š‹¾—ve_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_š‹¾—ve_Úe
,

59 
sub_»que¡
 *
sub_š‹¾—ve_two
);

61 
sub_»que¡
 *

62 
fšd_»ad_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
);

64 
sub_»que¡
 *
fšd_wr™e_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
);

66 
sub_»que¡
 *

67 
ü—t_sub_»que¡
(
ssd_šfo
 *
ssd
, 
Ín
, 
size
, 
¡©e
, 
»que¡
 *
»q
,

68 
İ”©iÚ
);

70 
sub_»que¡
 *

71 
fšd_š‹¾—ve_twİÏÃ_·ge
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
Ú•age
, 
commªd
);

74 
fšd_š‹¾—ve_twİÏÃ_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»que¡_Úe
,

75 
sub_»que¡
 *
sub_»que¡_two
, 
commªd
);

77 
ssd_šfo
 *
d–‘e_äom_chªÃl
(ssd_šfØ*
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub_»q
);

79 
ssd_šfo
 *

80 
un_g»ed_š‹¾—ve_cİyback
(
ssd_šfo
 *, , , , 
sub_»que¡
 *,

81 
sub_»que¡
 *);

83 
ssd_šfo
 *
un_g»ed_cİyback
(ssd_šfØ*, , , , 
sub_»que¡
 *);

86 
fšd_aùive_block
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

88 
wr™e_·ge
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

89 
aùive_block
, *
µn
);

91 
®loÿ‹_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub_»q
);

94 
go_Úe_¡•
(
ssd_šfo
 *
ssd
, 
sub_»que¡
 *
sub1
, sub_»que¡ *
sub2
, 
aim_¡©e
,

95 
commªd
);

97 
£rviûs_2_r_cmd_Œªs_ªd_com¶‘e
(
ssd_šfo
 *
ssd
);

99 
£rviûs_2_r_wa™
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

100 *
chªge_cu¼’t_time_æag
);

102 
£rviûs_2_r_d©a_Œªs
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

103 *
chªge_cu¼’t_time_æag
);

105 
£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,

106 *
chªge_cu¼’t_time_æag
);

109 
£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
, *
chªge_cu¼’t_time_æag
);

110 
£rviûs_2_wr™e_busy_š_ch
(
ssd_šfo
 *
ssd
);

111 
£rviûs_2_gc_busy_š_ch
(
ssd_šfo
 *
ssd
);

112 
gc_Œy_to_su¥’d_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
, 
cu¼’t_¡©e
, 
Ãxt_¡©e
, 
time
);

113 
Œy_to_»¡Üe_gc_funùiÚ
(
ssd_šfo
 *
ssd
, 
gc_İ”©iÚ
 *
gc_node
, 
chªÃl
, 
ch
);

115 
Œy_to_»¡Üe_wr™e_funùiÚ
(
ssd_šfo
 *
ssd
);

117 
Ãw_£rviûs_2_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, *
chªÃl_busy_æag
,*
chªge_cu¼’t_time_æag
);

121 
d–‘e_w_sub_»que¡
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
sub_»que¡
 *
sub
);

123 
cİy_back
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
);

126 
¡©ic_wr™e
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
sub_»que¡
 *
sub
);

	@initialize.h

18 #iâdeà
INITIALIZE_H


19 
	#INITIALIZE_H
 10000

	)

21 
	~<¡dio.h
>

22 
	~<¡ršg.h
>

23 
	~<¡dlib.h
>

24 
	~<time.h
>

25 
	~<ùy³.h
>

26 
	~<sys/ty³s.h
>

27 
	~"avlT»e.h
"

29 
	#SECTOR
 512

	)

30 
	#BUFSIZE
 200

	)

32 
	#DYNAMIC_ALLOCATION
 0

	)

33 
	#STATIC_ALLOCATION
 1

	)

35 
	#INTERLEAVE
 0

	)

36 
	#TWO_PLANE
 1

	)

38 
	#NORMAL
 2

	)

39 
	#INTERLEAVE_TWO_PLANE
 3

	)

40 
	#COPY_BACK
 4

	)

42 
	#AD_RANDOM
 1

	)

43 
	#AD_COPYBACK
 2

	)

44 
	#AD_TWOPLANE
 4

	)

45 
	#AD_INTERLEAVE
 8

	)

46 
	#AD_TWOPLANE_READ
 16

	)

48 
	#READ
 1

	)

49 
	#WRITE
 0

	)

57 
	#CHANNEL_IDLE
 000

	)

58 
	#CHANNEL_C_A_TRANSFER
 3

	)

59 
	#CHANNEL_GC
 4

	)

61 
	#CHANNEL_GC_ERASE
 5

	)

64 
	#CHANNEL_DATA_TRANSFER
 7

	)

65 
	#CHANNEL_TRANSFER
 8

	)

66 
	#CHANNEL_UNKNOWN
 9

	)

68 
	#CHIP_IDLE
 100

	)

69 
	#CHIP_WRITE_BUSY
 101

	)

70 
	#CHIP_READ_BUSY
 102

	)

71 
	#CHIP_C_A_TRANSFER
 103

	)

73 
	#CHIP_WRITE_DATA_CMD_BUSY
 104

	)

74 
	#CHIP_GC_RW_BUSY
 105

	)

76 
	#CHIP_DATA_TRANSFER
 107

	)

77 
	#CHIP_WAIT
 108

	)

78 
	#CHIP_ERASE_BUSY
 109

79 
	#CHIP_COPYBACK_BUSY
 110

	)

80 
	#UNKNOWN
 111

	)

82 
	#SR_WAIT
 200

	)

83 
	#SR_R_C_A_TRANSFER
 201

	)

84 
	#SR_R_READ
 202

	)

85 
	#SR_R_DATA_TRANSFER
 203

	)

86 
	#SR_W_C_A_DATA_TRANSFER
 204

	)

87 
	#SR_W_DATA_TRANSFER_ONE_PROG_OF_ITERATIONS
 205

	)

88 
	#SR_W_DATA_TRANSFER_ONE_VERIFY_OF_ITERATIONS
 207

	)

89 
	#SR_W_TRANSFER
 206

	)

92 
	#SR_W_DATA_TRANSFER
 208

93 

	)

94 
	#SR_COMPLETE
 299

	)

96 
	#REQUEST_IN
 300

97 
	#OUTPUT
 301

98 

	)

99 
	#GC_WAIT
 400

	)

100 
	#GC_ERASE_C_A
 401

	)

101 
	#GC_COPY_BACK
 402

	)

102 
	#GC_COMPLETE
 403

	)

103 
	#GC_INTERRUPT
 0

	)

104 
	#GC_UNINTERRUPT
 1

	)

106 
	#CHANNEL
(
l¢
èÖ¢&0x0000)>>16

	)

107 
	#ch
(
l¢
èÖ¢&0x0000)>>16

	)

108 
	#d›
(
l¢
èÖ¢&0x0000)>>16

	)

109 
	#PLANE
(
l¢
èÖ¢&0x0000)>>16

	)

110 
	#BLOKC
(
l¢
èÖ¢&0x0000)>>16

	)

111 
	#PAGE
(
l¢
èÖ¢&0x0000)>>16

	)

112 
	#SUBPAGE
(
l¢
èÖ¢&0x0000)>>16

	)

114 
	#PG_SUB
 0xffffffff

	)

120 
	#TRUE
 1

	)

121 
	#FALSE
 0

	)

122 
	#SUCCESS
 1

	)

123 
	#FAILURE
 0

	)

124 
	#ERROR
 -1

	)

125 
	#INFEASIBLE
 -2

	)

126 
	#OVERFLOW
 -3

	)

127 
	tStus
;

129 
	sac_time_ch¬aù”i¡ics
 {

130 
	mtPROG
;

132 
	mtPROG_r_phy
;

134 
	mtPROG_w_tÙ®
;

135 
	mtPROG_Nw_cyşe
;

136 
	mtPROG_Tw_cyşe
;

137 
	mtPROG_w_´ogam
;

138 
	mtPROG_w_v”ify
;

139 
	mtPROG_bufãr
;

143 
	mtDBSY
;

144 
	mtBERS
;

145 
	mtCLS
;

146 
	mtCLH
;

147 
	mtCS
;

148 
	mtCH
;

149 
	mtWP
;

150 
	mtALS
;

151 
	mtALH
;

152 
	mtDS
;

153 
	mtDH
;

154 
	mtWC
;

155 
	mtWH
;

156 
	mtADL
;

157 
	mtR
;

158 
	mtAR
;

159 
	mtCLR
;

160 
	mtRR
;

161 
	mtRP
;

162 
	mtWB
;

163 
	mtRC
;

164 
	mtREA
;

165 
	mtCEA
;

166 
	mtRHZ
;

167 
	mtCHZ
;

168 
	mtRHOH
;

169 
	mtRLOH
;

170 
	mtCOH
;

171 
	mtREH
;

172 
	mtIR
;

173 
	mtRHW
;

174 
	mtWHR
;

175 
	mtRST
;

176 } 
	gac_timšg
;

179 
	sssd_šfo
 {

181 
	mdebug_sign
;

182 
	mgc_su¥’d_times
;

183 
	mwr™e_su¥’d_times
;

184 
	mgc_su¥’d_došg
;

185 
	mwr™e_su¥’d_došg
;

186 
	mÜigš®_tÙ®_·ges_numb”
;

187 
	maá”_´e_´oûss_·ges_numb”
;

188 
	maá”_´e_´oûs£_ªd_aged_·ges_numb”
;

189 
	mÏ¡_tÙ®_avaabË_·ges_numb”
;

196 
	mssd_’”gy
;

197 
št64_t
 
	mcu¼’t_time
;

198 
št64_t
 
	mÃxt_»que¡_time
;

199 
	m»®_time_sub»q
;

200 
	mæag
;

201 
	maùive_æag
;

202 
	m·ge
;

204 
	mtok’
;

205 
	mgc_»que¡
;

207 
	mwr™e_»que¡_couÁ
;

208 
	m»ad_»que¡_couÁ
;

209 
št64_t
 
	mwr™e_avg
;

210 
št64_t
 
	m»ad_avg
;

212 
	mmš_l¢
;

213 
	mmax_l¢
;

214 
	m»ad_couÁ
;

215 
	m´og¿m_couÁ
;

216 
	m”a£_couÁ
;

217 
	mdœeù_”a£_couÁ
;

218 
	mcİy_back_couÁ
;

219 
	mm_¶ªe_»ad_couÁ
;

220 
	mm_¶ªe_´og_couÁ
;

221 
	mš‹¾—ve_couÁ
;

222 
	mš‹¾—ve_»ad_couÁ
;

223 
	mš‹r_m¶ªe_couÁ
;

224 
	mš‹r_m¶ªe_´og_couÁ
;

225 
	mš‹¾—ve_”a£_couÁ
;

226 
	mm¶ªe_”a£_cÚut
;

227 
	mš‹¾—ve_m¶ªe_”a£_couÁ
;

228 
	mgc_cİy_back
;

229 
	mwr™e_æash_couÁ
;

230 
	mwa¡e_·ge_couÁ
;

231 
	mave_»ad_size
;

232 
	mave_wr™e_size
;

233 
	m»que¡_queue_Ëngth
;

234 
	mupd©e_»ad_couÁ
;

236 
	m·¿m‘”f’ame
[30];

237 
	mŒaûf’ame
[30];

238 
	mouutf’ame
[30];

239 
	m¡©i¡icf’ame
[30];

240 
	m¡©i¡icf’ame2
[30];

242 
FILE
 *
	mouutfe
;

243 
FILE
 *
	mŒaûfe
;

244 
FILE
 *
	m¡©i¡icfe
;

245 
FILE
 *
	m¡©i¡icfe2
;

247 
·¿m‘”_v®ue
 *
	m·¿m‘”
;

248 
d¿m_šfo
 *
	md¿m
;

249 
»que¡
 *
	m»que¡_queue
;

250 
»que¡
 *
	m»que¡_
;

251 
sub_»que¡
 *
	msubs_w_h—d
;

252 
sub_»que¡
 *
	msubs_w_
;

253 
ev’t_node
 *
	mev’t
;

254 
chªÃl_šfo
 *
	mchªÃl_h—d
;

258 
	schªÃl_šfo
 {

259 
	mch
;

260 
	m»ad_couÁ
;

261 
	m´og¿m_couÁ
;

262 
	m”a£_couÁ
;

263 
	mtok’
;

265 
	mcu¼’t_¡©e
;

266 
	mÃxt_¡©e
;

267 
št64_t
 
	mcu¼’t_time
;

268 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

270 
ev’t_node
 *
	mev’t
;

271 
sub_»que¡
 *
	msubs_r_h—d
;

272 
sub_»que¡
 *
	msubs_r_
;

273 
sub_»que¡
 *
	msubs_w_h—d
;

274 
sub_»que¡
 *
	msubs_w_
;

275 
gc_İ”©iÚ
 *
	mgc_commªd
;

276 
ch_šfo
 *
	mch_h—d
;

284 
	sch_šfo
 {

285 
	md›_num
;

286 
	m¶ªe_num_d›
;

287 
	mblock_num_¶ªe
;

288 
	m·ge_num_block
;

289 
	msub·ge_num_·ge
;

290 
	m”s_lim™
;

291 
	mtok’
;

293 
	mcu¼’t_¡©e
;

294 
	mÃxt_¡©e
;

295 
št64_t
 
	mcu¼’t_time
;

296 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

298 
	m»ad_couÁ
;

299 
	m´og¿m_couÁ
;

300 
	m”a£_couÁ
;

302 
ac_time_ch¬aù”i¡ics
 
	mac_timšg
;

303 
d›_šfo
 *
	md›_h—d
;

305 
	mwr™e_´“m±ive_sign
;

306 
	mnum_w_cyşe
;

310 
	mch_¡©us
;

311 
	mch_¡©us_time
;

312 
	mch_»ad_queue_Ëngth
;

313 
	mch_wr™e_queue_Ëngth
;

315 
sub_»que¡
 *
	m¡Üedsub
;

319 
	sd›_šfo
 {

321 
	mtok’
;

322 
¶ªe_šfo
 *
	m¶ªe_h—d
;

327 
	s¶ªe_šfo
 {

328 
	madd_»g_µn
;

335 
	mä“_·ge
;

336 
	m”s_šv®id
;

337 
	maùive_block
;

338 
	mÿn_”a£_block
;

339 
dœeù_”a£
 *
	m”a£_node
;

340 
blk_šfo
 *
	mblk_h—d
;

344 
	sblk_šfo
 {

345 
	m”a£_couÁ
;

346 
	mä“_·ge_num
;

347 
	mšv®id_·ge_num
;

348 
	mÏ¡_wr™e_·ge
;

349 
·ge_šfo
 *
	m·ge_h—d
;

353 
	s·ge_šfo
 {

354 
	mv®id_¡©e
;

355 
	mä“_¡©e
;

356 
	mÍn
;

357 
	mwr™‹n_couÁ
;

361 
	sd¿m_šfo
 {

362 
	md¿m_ÿ·c™y
;

363 
št64_t
 
	mcu¼’t_time
;

365 
d¿m_·¿m‘”
 *
	md¿m_·¿m‹rs
;

366 
m­_šfo
 *
	mm­
;

367 
bufãr_šfo
 *
	mbufãr
;

381 
	sbufãr_group
 {

382 
TREE_NODE
 
	mnode
;

383 
bufãr_group
 *
	mLRU_lšk_Ãxt
;

384 
bufãr_group
 *
	mLRU_lšk_´e
;

386 
	mgroup
;

387 
	m¡Üed
;

388 
	mdœty_ş—n
;

389 
	mæag
;

390 } 
	tbuf_node
;

393 
	sd¿m_·¿m‘”
 {

394 
	maùive_cu¼’t
;

395 
	m¦“p_cu¼’t
;

396 
	mvŞge
;

397 
	mşock_time
;

401 
	sm­_šfo
 {

402 
’Œy
 *
	mm­_’Œy
;

403 
bufãr_šfo
 *
	m©ch_šfo
;

407 
	scÚŒŞËr_šfo
 {

408 
	mäequ’cy
;

409 
št64_t
 
	mşock_time
;

410 
	mpow”
;

414 
	s»que¡
 {

415 
št64_t
 
	mtime
;

416 
	ml¢
;

417 
	msize
;

418 
	mİ”©iÚ
;

420 *
	mÃed_di¡r_æag
;

421 
	mcom¶‘e_l¢_couÁ
;

423 
	mdi¡ri_æag
;

425 
št64_t
 
	mbegš_time
;

426 
št64_t
 
	m»¥Ú£_time
;

427 
	m’”gy_cÚsum±iÚ
;

429 
sub_»que¡
 *
	msubs
;

430 
»que¡
 *
	mÃxt_node
;

434 
	ssub_»que¡
 {

435 
	mÍn
;

436 
	mµn
;

437 
	mİ”©iÚ
;

438 
	msize
;

441 
	mcu¼’t_¡©e
;

442 
št64_t
 
	mcu¼’t_time
;

443 
	mÃxt_¡©e
;

444 
št64_t
 
	mÃxt_¡©e_´ediù_time
;

445 
	m¡©e
;

448 
št64_t
 
	mbegš_time
;

449 
št64_t
 
	mcom¶‘e_time
;

451 
loÿl
 *
	mloÿtiÚ
;

452 
sub_»que¡
 *
	mÃxt_subs
;

453 
sub_»que¡
 *
	mÃxt_node
;

454 
sub_»que¡
 *
	mupd©e
;

458 
št64_t
 
	m£rviûd_time
;

459 
št64_t
 
	m¦ack_time
;

460 
	mÏ¡_sign
;

468 
	sev’t_node
 {

469 
	mty³
;

470 
št64_t
 
	m´ediù_time
;

471 
ev’t_node
 *
	mÃxt_node
;

472 
ev’t_node
 *
	m´e_node
;

475 
	s·¿m‘”_v®ue
 {

476 
	mch_num
;

477 
	md¿m_ÿ·c™y
;

478 
	mıu_sd¿m
;

480 
	mchªÃl_numb”
;

481 
	mch_chªÃl
[100];

483 
	md›_ch
;

484 
	m¶ªe_d›
;

485 
	mblock_¶ªe
;

486 
	m·ge_block
;

487 
	msub·ge_·ge
;

489 
	m·ge_ÿ·c™y
;

490 
	msub·ge_ÿ·c™y
;

493 
	m”s_lim™
;

494 
	madd»ss_m­pšg
;

495 
	mw—r_Ëv–šg
;

496 
	mgc
;

497 
	mş—n_š_background
;

498 
	m®loc_poŞ
;

499 
	mov”´ovide
;

500 
	mgc_th»shŞd
;

502 
	mİ”©šg_cu¼’t
;

503 
	msuµly_vŞge
;

504 
	md¿m_aùive_cu¼’t
;

505 
	md¿m_¡ªdby_cu¼’t
;

506 
	md¿m_»äesh_cu¼’t
;

507 
	md¿m_vŞge
;

509 
	mbufãr_mªagem’t
;

510 
	mschedulšg_®gÜ™hm
;

511 
	mquick_¿dio
;

512 
	m»Ï‹d_m­pšg
;

514 
	mtime_¡•
;

515 
	msm®l_Ïrge_wr™e
;

517 
	m¡ršg
;

518 
	mš‹¾—všg
;

519 
	mp–ššg
;

520 
	mth»shŞd_fixed_adju¡
;

521 
	mth»shŞd_v®ue
;

522 
	maùive_wr™e
;

523 
	mgc_h¬d_th»shŞd
;

524 
	m®loÿtiÚ_scheme
;

525 
	m¡©ic_®loÿtiÚ
;

526 
	mdyÇmic_®loÿtiÚ
;

527 
	madvªûd_commªds
;

528 
	mad_´iÜ™y
;

529 
	mad_´iÜ™y2
;

530 
	mg»ed_CB_ad
;

531 
	mg»ed_MPW_ad
;

532 
	maged
;

533 
	maged_¿tio
;

534 
	mqueue_Ëngth
;

536 
ac_time_ch¬aù”i¡ics
 
	mtime_ch¬aù”i¡ics
;

542 
	s’Œy
 {

543 
	m²
;

544 
	m¡©e
;

548 
	sloÿl
 {

549 
	mchªÃl
;

550 
	mch
;

551 
	md›
;

552 
	m¶ªe
;

553 
	mblock
;

554 
	m·ge
;

555 
	msub_·ge
;

559 
	sgc_šfo
 {

560 
št64_t
 
	mbegš_time
;

561 
	mcİy_back_couÁ
;

562 
	m”a£_couÁ
;

563 
št64_t
 
	m´oûss_time
;

564 
	m’”gy_cÚsum±iÚ
;

568 
	sdœeù_”a£
 {

569 
	mblock
;

570 
dœeù_”a£
 *
	mÃxt_node
;

577 
	sgc_İ”©iÚ
 {

578 
	mch
;

579 
	md›
;

580 
	m¶ªe
;

581 
	mblock
;

582 
	m·ge
;

583 
	m¡©e
;

584 
	m´iÜ™y
;

585 
gc_İ”©iÚ
 *
	mÃxt_node
;

587 
	mcİy_·ge_numb”
;

588 
	mcİy_v®id_numb”
;

589 
	mpos_š_cİy
;

590 
	m»ad
;

591 
	mwr™e
;

592 
	m”a£
;

593 
	mviùim_block_numb”
;

595 
	mgc_»ad_šÃr
;

596 
	mgc_wr™e_šÃr
;

597 
	m»ad_wr™e_’d
;

598 
	mÏ¡_·ge_š_viùim_d—l
;

600 
	mviùim_block_ä“·ge_¡©i¡ic
;

601 
	mch_¡©us
;

602 
	mch_Ãxt_¡©us
;

603 
	msign_fÜ_´“m±ive
;

604 
	mch_Ãxt_´ediù_time_diff
;

611 
	sD¿m_wr™e_m­
 {

612 
	m¡©e
;

613 } 
	tD¿m_wr™e_m­
;

616 
ssd_šfo
 *
š™ŸtiÚ
(ssd_info *);

618 
·¿m‘”_v®ue
 *
lßd_·¿m‘”s
(
·¿m‘”_fe
[30]);

620 
·ge_šfo
 *
š™Ÿlize_·ge
(·ge_šfØ*
p_·ge
);

622 
blk_šfo
 *
š™Ÿlize_block
(blk_šfØ*
p_block
, 
·¿m‘”_v®ue
 *
·¿m‘”
);

624 
¶ªe_šfo
 *
š™Ÿlize_¶ªe
(¶ªe_šfØ*
p_¶ªe
, 
·¿m‘”_v®ue
 *
·¿m‘”
);

626 
d›_šfo
 *
š™Ÿlize_d›
(d›_šfØ*
p_d›
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
);

628 
ch_šfo
 *
š™Ÿlize_ch
(ch_šfØ*
p_ch
, 
·¿m‘”_v®ue
 *
·¿m‘”
, 
cu¼’t_time
);

630 
ssd_šfo
 *
š™Ÿlize_chªÃls
(ssd_šfØ*
ssd
);

632 
d¿m_šfo
 *
š™Ÿlize_d¿m
(
ssd_šfo
 *
ssd
);

	@pagemap.h

18 #iâdeà
PAGEMAP_H


19 
	#PAGEMAP_H
 10000

	)

21 
	~<sys/ty³s.h
>

22 
	~"š™Ÿlize.h
"

24 
	#MAX_INT64
 0x7ffffffffffffffæl

	)

26 
fe_as£¹
(
”rÜ
, *
s
);

28 
®loc_as£¹
(*
p
, *
s
);

30 
Œaû_as£¹
(
št64_t
 
time_t
, 
deviû
, 
l¢
, 
size
, 
İe
);

32 
loÿl
 *
fšd_loÿtiÚ
(
ssd_šfo
 *
ssd
, 
µn
);

35 
fšd_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

36 
block
, 
·ge
);

38 
ssd_šfo
 *
´e_´oûss_·ge
(ssd_šfØ*
ssd
);

40 
g‘_µn_fÜ_´e_´oûss
(
ssd_šfo
 *
ssd
, 
l¢
);

42 
ssd_šfo
 *

43 
g‘_µn
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

44 
sub_»que¡
 *
sub
);

46 
gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
æag
);

49 
gc_dœeù_”a£
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

51 
unš‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

53 
š‹¼u±_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

54 
gc_İ”©iÚ
 *
gc_node
);

56 
decide_gc_švoke
(
ssd_šfo
 *
ssd
, 
chªÃl
);

58 
£t_’Œy_¡©e
(
ssd_šfo
 *
ssd
, 
l¢
, 
size
);

61 
g‘_µn_fÜ_gc
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
);

63 
”a£_İ”©iÚ
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›
, 
¶ªe
,

64 
block
);

66 
”a£_¶ªes
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
ch
, 
d›1
, 
¶ªe1
,

67 
commªd
);

69 
move_·ge
(
ssd_šfo
 *
ssd
, 
loÿl
 *
loÿtiÚ
, *
Œªsãr_size
);

71 
gc_fÜ_chªÃl
(
ssd_šfo
 *
ssd
, 
chªÃl
);

73 
d–‘e_gc_node
(
ssd_šfo
 *
ssd
, 
chªÃl
, 
gc_İ”©iÚ
 *
gc_node
);

	@ssd.h

18 
	~<¡dlib.h
>

19 
	~<¡dio.h
>

20 
	~<time.h
>

21 
	~<¡ršg.h
>

22 
	~<sys/ty³s.h
>

23 
	~"š™Ÿlize.h
"

24 
	~"æash.h
"

25 
	~"·gem­.h
"

27 
	#MAX_INT64
 0x7ffffffffffffffæl

	)

36 
´štfsub_»que¡_¡©us
(
ssd_šfo
 *
ssd
);

37 
´štf_ssd_»que¡_queue
(
ssd_šfo
 *
ssd
);

39 
´štf_ssd_gc_node
(
ssd_šfo
 *
ssd
);

41 
judgšg_»ad_š_gc_ch
(
ssd_šfo
 *
ssd
, 
chªÃl
);

42 
´štf_ev”y_ch_»ad_sub»que¡
(
ssd_šfo
 *
ssd
);

43 
´štf_ev”y_ch_¡©ic_sub»que¡
(
ssd_šfo
 *
ssd
);

45 
ÿlc_»q_¦ack_time
(
»que¡
 * 
»q
);

47 
´štf_gc_node_šfÜm©iÚ
(
gc_İ”©iÚ
* 
gc_node
);

49 
ssd_šfo
 *
simuÏ‹
(ssd_info *);

51 
g‘_»que¡s
(
ssd_šfo
 *);

53 
ssd_šfo
 *
bufãr_mªagem’t
(ssd_info *);

55 
Ín2µn
(
ssd_šfo
 *, 
l¢
);

57 
ssd_šfo
 *
di¡ribu‹
(ssd_info *);

59 
Œaû_ouut
(
ssd_šfo
 *);

61 
¡©i¡ic_ouut
(
ssd_šfo
 *);

63 
size
();

65 
Œªsãr_size
(
ssd_šfo
 *, , , 
»que¡
 *);

67 
št64_t
 
fšd_Ã¬e¡_ev’t
(
ssd_šfo
 *);

69 
ä“_®l_node
(
ssd_šfo
 *);

71 
ssd_šfo
 *
make_aged
(ssd_info *);

73 
ssd_šfo
 *
no_bufãr_di¡ribu‹
(ssd_info *);

	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
32
1289
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/avlTree.c
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/avlTree.h
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/flash.c
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/flash.h
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/initialize.c
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/initialize.h
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/pagemap.c
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/pagemap.h
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/ssd.c
/home/lxc/ssdsimnew/new_for_picture_codes/has_all_suspend_backup_new_changed/ssd.h
/usr/include/ctype.h
/usr/include/malloc.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/time.h
avlTree.h
flash.h
initialize.h
pagemap.h
ssd.h
/usr/include/alloca.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/wchar.h
/usr/include/wctype.h
